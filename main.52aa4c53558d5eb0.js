"use strict";(self.webpackChunkprithvi_analytics=self.webpackChunkprithvi_analytics||[]).push([[179],{306:(wn,zt,tt)=>{function we(i){return"function"==typeof i}function se(i){const t=i(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const ge=se(i=>function(t){i(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function $(i,e){if(i){const t=i.indexOf(e);0<=t&&i.splice(t,1)}}class J{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:n}=this;if(we(n))try{n()}catch(s){e=s instanceof ge?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{kt(s)}catch(o){e=e??[],o instanceof ge?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ge(e)}}add(e){var t;if(e&&e!==this)if(this.closed)kt(e);else{if(e instanceof J){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&$(t,e)}remove(e){const{_finalizers:t}=this;t&&$(t,e),e instanceof J&&e._removeParent(this)}}J.EMPTY=(()=>{const i=new J;return i.closed=!0,i})();const Le=J.EMPTY;function Xe(i){return i instanceof J||i&&"closed"in i&&we(i.remove)&&we(i.add)&&we(i.unsubscribe)}function kt(i){we(i)?i():i.unsubscribe()}const si={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},wi={setTimeout(i,e,...t){const{delegate:n}=wi;return n?.setTimeout?n.setTimeout(i,e,...t):setTimeout(i,e,...t)},clearTimeout(i){const{delegate:e}=wi;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function wt(i){wi.setTimeout(()=>{const{onUnhandledError:e}=si;if(!e)throw i;e(i)})}function ke(){}const je=zr("C",void 0,void 0);function zr(i,e,t){return{kind:i,value:e,error:t}}let Gr=null;function Hi(i){if(si.useDeprecatedSynchronousErrorHandling){const e=!Gr;if(e&&(Gr={errorThrown:!1,error:null}),i(),e){const{errorThrown:t,error:n}=Gr;if(Gr=null,t)throw n}}else i()}class na extends J{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Xe(e)&&e.add(this)):this.destination=By}static create(e,t,n){return new ia(e,t,n)}next(e){this.isStopped?Pd(function mn(i){return zr("N",i,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Pd(function Ot(i){return zr("E",void 0,i)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Pd(je,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ky=Function.prototype.bind;function Wr(i,e){return ky.call(i,e)}class Ny{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){Cc(n)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){Cc(n)}else Cc(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Cc(t)}}}class ia extends na{constructor(e,t,n){let r;if(super(),we(e)||!e)r={next:e??void 0,error:t??void 0,complete:n??void 0};else{let s;this&&si.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Wr(e.next,s),error:e.error&&Wr(e.error,s),complete:e.complete&&Wr(e.complete,s)}):r=e}this.destination=new Ny(r)}}function Cc(i){si.useDeprecatedSynchronousErrorHandling?function _s(i){si.useDeprecatedSynchronousErrorHandling&&Gr&&(Gr.errorThrown=!0,Gr.error=i)}(i):wt(i)}function Pd(i,e){const{onStoppedNotification:t}=si;t&&wi.setTimeout(()=>t(i,e))}const By={closed:!0,next:ke,error:function xp(i){throw i},complete:ke},Ld="function"==typeof Symbol&&Symbol.observable||"@@observable";function jr(i){return i}function Fd(i){return 0===i.length?jr:1===i.length?i[0]:function(t){return i.reduce((n,r)=>r(n),t)}}let dn=(()=>{class i{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new i;return n.source=this,n.operator=t,n}subscribe(t,n,r){const s=function Nd(i){return i&&i instanceof na||function wp(i){return i&&we(i.next)&&we(i.error)&&we(i.complete)}(i)&&Xe(i)}(t)?t:new ia(t,n,r);return Hi(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=kd(n))((r,s)=>{const o=new ia({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[Ld](){return this}pipe(...t){return Fd(t)(this)}toPromise(t){return new(t=kd(t))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=e=>new i(e),i})();function kd(i){var e;return null!==(e=i??si.Promise)&&void 0!==e?e:Promise}const Bd=se(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let qe=(()=>{class i extends dn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const n=new Vd(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new Bd}next(t){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(t)}})}error(t){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:n,isStopped:r,observers:s}=this;return n||r?Le:(this.currentObservers=null,s.push(t),new J(()=>{this.currentObservers=null,$(s,t)}))}_checkFinalizedStatuses(t){const{hasError:n,thrownError:r,isStopped:s}=this;n?t.error(r):s&&t.complete()}asObservable(){const t=new dn;return t.source=this,t}}return i.create=(e,t)=>new Vd(e,t),i})();class Vd extends qe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)}error(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Le}}function Ud(i){return we(i?.lift)}function k(i){return e=>{if(Ud(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function P(i,e,t,n,r){return new V(i,e,t,n,r)}class V extends na{constructor(e,t,n,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Z(i,e){return k((t,n)=>{let r=0;t.subscribe(P(n,s=>{n.next(i.call(e,s,r++))}))})}function co(i){return this instanceof co?(this.v=i,this):new co(i)}function Uy(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=t.apply(i,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){n[h]&&(r[h]=function(f){return new Promise(function(m,p){s.push([h,f,m,p])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof co?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(n[h](f))}catch(m){d(s[0][3],m)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function WB(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=i[Symbol.asyncIterator];return e?e.call(i):(i=function sa(i){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=i[s](o)).done,o.value)})}}}const Hy=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function TC(i){return we(i?.then)}function AC(i){return we(i[Ld])}function IC(i){return Symbol.asyncIterator&&we(i?.[Symbol.asyncIterator])}function RC(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const PC=function $B(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function LC(i){return we(i?.[PC])}function OC(i){return Uy(this,arguments,function*(){const t=i.getReader();try{for(;;){const{value:n,done:r}=yield co(t.read());if(r)return yield co(void 0);yield yield co(n)}}finally{t.releaseLock()}})}function FC(i){return we(i?.getReader)}function zi(i){if(i instanceof dn)return i;if(null!=i){if(AC(i))return function qB(i){return new dn(e=>{const t=i[Ld]();if(we(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(Hy(i))return function XB(i){return new dn(e=>{for(let t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}(i);if(TC(i))return function YB(i){return new dn(e=>{i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,wt)})}(i);if(IC(i))return kC(i);if(LC(i))return function KB(i){return new dn(e=>{for(const t of i)if(e.next(t),e.closed)return;e.complete()})}(i);if(FC(i))return function ZB(i){return kC(OC(i))}(i)}throw RC(i)}function kC(i){return new dn(e=>{(function QB(i,e){var t,n,r,s;return function lo(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=WB(i);!(n=yield t.next()).done;)if(e.next(n.value),e.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(i,e).catch(t=>e.error(t))})}function uo(i,e,t,n=0,r=!1){const s=e.schedule(function(){t(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function pi(i,e,t=1/0){return we(e)?pi((n,r)=>Z((s,o)=>e(n,s,r,o))(zi(i(n,r))),t):("number"==typeof e&&(t=e),k((n,r)=>function JB(i,e,t,n,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=p=>c<n?m(p):l.push(p),m=p=>{s&&e.next(p),c++;let g=!1;zi(t(p,u++)).subscribe(P(e,_=>{r?.(_),s?f(_):e.next(_)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<n;){const _=l.shift();o?uo(e,o,()=>m(_)):m(_)}h()}catch(_){e.error(_)}}))};return i.subscribe(P(e,f,()=>{d=!0,h()})),()=>{a?.()}}(n,r,i,t)))}function Dc(i=1/0){return pi(jr,i)}const ho=new dn(i=>i.complete());function NC(i){return i&&we(i.schedule)}function zy(i){return i[i.length-1]}function Gy(i){return we(zy(i))?i.pop():void 0}function zd(i){return NC(zy(i))?i.pop():void 0}function BC(i,e=0){return k((t,n)=>{t.subscribe(P(n,r=>uo(n,i,()=>n.next(r),e),()=>uo(n,i,()=>n.complete(),e),r=>uo(n,i,()=>n.error(r),e)))})}function VC(i,e=0){return k((t,n)=>{n.add(i.schedule(()=>t.subscribe(n),e))})}function UC(i,e){if(!i)throw new Error("Iterable cannot be null");return new dn(t=>{uo(t,e,()=>{const n=i[Symbol.asyncIterator]();uo(t,e,()=>{n.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Xn(i,e){return e?function aV(i,e){if(null!=i){if(AC(i))return function nV(i,e){return zi(i).pipe(VC(e),BC(e))}(i,e);if(Hy(i))return function rV(i,e){return new dn(t=>{let n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}(i,e);if(TC(i))return function iV(i,e){return zi(i).pipe(VC(e),BC(e))}(i,e);if(IC(i))return UC(i,e);if(LC(i))return function sV(i,e){return new dn(t=>{let n;return uo(t,e,()=>{n=i[PC](),uo(t,e,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>we(n?.return)&&n.return()})}(i,e);if(FC(i))return function oV(i,e){return UC(OC(i),e)}(i,e)}throw RC(i)}(i,e):zi(i)}function tl(...i){const e=zd(i),t=function tV(i,e){return"number"==typeof zy(i)?i.pop():e}(i,1/0),n=i;return n.length?1===n.length?zi(n[0]):Dc(t)(Xn(n,e)):ho}function HC(i={}){const{connector:e=(()=>new qe),resetOnError:t=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},m=()=>{const p=o;f(),p?.unsubscribe()};return k((p,g)=>{c++,!d&&!u&&h();const _=l=l??e();g.add(()=>{c--,0===c&&!d&&!u&&(a=Wy(m,r))}),_.subscribe(g),!o&&c>0&&(o=new ia({next:y=>_.next(y),error:y=>{d=!0,h(),a=Wy(f,t,y),_.error(y)},complete:()=>{u=!0,h(),a=Wy(f,n),_.complete()}}),zi(p).subscribe(o))})(s)}}function Wy(i,e,...t){if(!0===e)return void i();if(!1===e)return;const n=new ia({next:()=>{n.unsubscribe(),i()}});return e(...t).subscribe(n)}function rn(i){for(let e in i)if(i[e]===rn)return e;throw Error("Could not find renamed property on target object.")}function jy(i,e){for(const t in e)e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(i[t]=e[t])}function sn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(sn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const e=i.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function $y(i,e){return null==i||""===i?null===e?"":e:null==e||""===e?i:i+" "+e}const lV=rn({__forward_ref__:rn});function Qt(i){return i.__forward_ref__=Qt,i.toString=function(){return sn(this())},i}function nt(i){return qy(i)?i():i}function qy(i){return"function"==typeof i&&i.hasOwnProperty(lV)&&i.__forward_ref__===Qt}class le extends Error{constructor(e,t){super(function Mp(i,e){return`NG0${Math.abs(i)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function at(i){return"string"==typeof i?i:null==i?"":String(i)}function Sp(i,e){throw new le(-201,!1)}function yr(i,e){null==i&&function Yt(i,e,t,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${t} ${n} ${e} <=Actual]`))}(e,i,null,"!=")}function xe(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Nt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Cp(i){return zC(i,Ep)||zC(i,WC)}function zC(i,e){return i.hasOwnProperty(e)?i[e]:null}function GC(i){return i&&(i.hasOwnProperty(Xy)||i.hasOwnProperty(_V))?i[Xy]:null}const Ep=rn({\u0275prov:rn}),Xy=rn({\u0275inj:rn}),WC=rn({ngInjectableDef:rn}),_V=rn({ngInjectorDef:rn});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let Yy;function $r(i){const e=Yy;return Yy=i,e}function jC(i,e,t){const n=Cp(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:t&Ke.Optional?null:void 0!==e?e:void Sp(sn(i))}function oa(i){return{toString:i}.toString()}var ys=(()=>((ys=ys||{})[ys.OnPush=0]="OnPush",ys[ys.Default=1]="Default",ys))(),vs=(()=>{return(i=vs||(vs={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",vs;var i})();const on=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Tc={},Wt=[],Dp=rn({\u0275cmp:rn}),Ky=rn({\u0275dir:rn}),Zy=rn({\u0275pipe:rn}),$C=rn({\u0275mod:rn}),po=rn({\u0275fac:rn}),Gd=rn({__NG_ELEMENT_ID__:rn});let vV=0;function Yn(i){return oa(()=>{const t=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===ys.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Wt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||vs.Emulated,id:"c"+vV++,styles:i.styles||Wt,_:null,setInput:null,schemas:i.schemas||null,tView:null},s=i.dependencies,o=i.features;return r.inputs=YC(i.inputs,n),r.outputs=YC(i.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(qC).filter(XC):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Wi).filter(XC):null,r})}function qC(i){return Jt(i)||Gi(i)}function XC(i){return null!==i}function Ut(i){return oa(()=>({type:i.type,bootstrap:i.bootstrap||Wt,declarations:i.declarations||Wt,imports:i.imports||Wt,exports:i.exports||Wt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function YC(i,e){if(null==i)return Tc;const t={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=n,e&&(e[r]=s)}return t}const Ne=Yn;function or(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Jt(i){return i[Dp]||null}function Gi(i){return i[Ky]||null}function Wi(i){return i[Zy]||null}function vr(i,e){const t=i[$C]||null;if(!t&&!0===e)throw new Error(`Type ${sn(i)} does not have '\u0275mod' property.`);return t}function ar(i){return Array.isArray(i)&&"object"==typeof i[1]}function xs(i){return Array.isArray(i)&&!0===i[1]}function ev(i){return 0!=(8&i.flags)}function Rp(i){return 2==(2&i.flags)}function Pp(i){return 1==(1&i.flags)}function ws(i){return null!==i.template}function CV(i){return 0!=(256&i[2])}function ol(i,e){return i.hasOwnProperty(po)?i[po]:null}class TV{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ji(){return QC}function QC(i){return i.type.prototype.ngOnChanges&&(i.setInput=IV),AV}function AV(){const i=eE(this),e=i?.current;if(e){const t=i.previous;if(t===Tc)i.previous=e;else for(let n in e)t[n]=e[n];i.current=null,this.ngOnChanges(e)}}function IV(i,e,t,n){const r=eE(i)||function RV(i,e){return i[JC]=e}(i,{previous:Tc,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new TV(l&&l.currentValue,e,o===Tc),i[n]=e}ji.ngInherit=!0;const JC="__ngSimpleChanges__";function eE(i){return i[JC]||null}function Kn(i){for(;Array.isArray(i);)i=i[0];return i}function Lp(i,e){return Kn(e[i])}function Yr(i,e){return Kn(e[i.index])}function sv(i,e){return i.data[e]}function Lc(i,e){return i[e]}function xr(i,e){const t=e[i];return ar(t)?t:t[0]}function Op(i){return 64==(64&i[2])}function aa(i,e){return null==e?null:i[e]}function tE(i){i[18]=0}function ov(i,e){i[5]+=e;let t=i,n=i[3];for(;null!==n&&(1===e&&1===t[5]||-1===e&&0===t[5]);)n[5]+=e,t=n,n=n[3]}const st={lFrame:fE(null),bindingsEnabled:!0};function iE(){return st.bindingsEnabled}function ue(){return st.lFrame.lView}function Ft(){return st.lFrame.tView}function oi(){let i=oE();for(;null!==i&&64===i.type;)i=i.parent;return i}function oE(){return st.lFrame.currentTNode}function Vs(i,e){const t=st.lFrame;t.currentTNode=i,t.isParent=e}function av(){return st.lFrame.isParent}function lv(){st.lFrame.isParent=!1}function $i(){const i=st.lFrame;let e=i.bindingRootIndex;return-1===e&&(e=i.bindingRootIndex=i.tView.bindingStartIndex),e}function Oc(){return st.lFrame.bindingIndex++}function $V(i,e){const t=st.lFrame;t.bindingIndex=t.bindingRootIndex=i,cv(e)}function cv(i){st.lFrame.currentDirectiveIndex=i}function uv(i){const e=st.lFrame.currentDirectiveIndex;return-1===e?null:i[e]}function uE(){return st.lFrame.currentQueryIndex}function dv(i){st.lFrame.currentQueryIndex=i}function XV(i){const e=i[1];return 2===e.type?e.declTNode:1===e.type?i[6]:null}function dE(i,e,t){if(t&Ke.SkipSelf){let r=e,s=i;for(;!(r=r.parent,null!==r||t&Ke.Host||(r=XV(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,i=s}const n=st.lFrame=hE();return n.currentTNode=e,n.lView=i,!0}function hv(i){const e=hE(),t=i[1];st.lFrame=e,e.currentTNode=t.firstChild,e.lView=i,e.tView=t,e.contextLView=i,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function hE(){const i=st.lFrame,e=null===i?null:i.child;return null===e?fE(i):e}function fE(i){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=e),e}function pE(){const i=st.lFrame;return st.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const mE=pE;function fv(){const i=pE();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function qi(){return st.lFrame.selectedIndex}function la(i){st.lFrame.selectedIndex=i}function Pn(){const i=st.lFrame;return sv(i.tView,i.selectedIndex)}function Fp(i,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){const s=i.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-t,o),a&&((i.contentHooks||(i.contentHooks=[])).push(t,a),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(t,a)),l&&(i.viewHooks||(i.viewHooks=[])).push(-t,l),c&&((i.viewHooks||(i.viewHooks=[])).push(t,c),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(t,c)),null!=u&&(i.destroyHooks||(i.destroyHooks=[])).push(t,u)}}function kp(i,e,t){gE(i,e,3,t)}function Np(i,e,t,n){(3&i[2])===t&&gE(i,e,t,n)}function pv(i,e){let t=i[2];(3&t)===e&&(t&=2047,t+=1,i[2]=t)}function gE(i,e,t,n){const s=n??-1,o=e.length-1;let a=0;for(let l=void 0!==n?65535&i[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=n&&a>=n)break}else e[l]<0&&(i[18]+=65536),(a<s||-1==s)&&(iU(i,t,e,l),i[18]=(4294901760&i[18])+l+2),l++}function iU(i,e,t,n){const r=t[n]<0,s=t[n+1],a=i[r?-t[n]:t[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===e){i[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Yd{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function Bp(i,e,t){let n=0;for(;n<t.length;){const r=t[n];if("number"==typeof r){if(0!==r)break;n++;const s=t[n++],o=t[n++],a=t[n++];i.setAttribute(e,o,a,s)}else{const s=r,o=t[++n];yE(s)?i.setProperty(e,s,o):i.setAttribute(e,s,o),n++}}return n}function _E(i){return 3===i||4===i||6===i}function yE(i){return 64===i.charCodeAt(0)}function Vp(i,e){if(null!==e&&0!==e.length)if(null===i||0===i.length)i=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r?t=r:0===t||vE(i,t,r,null,-1===t||2===t?e[++n]:null)}}return i}function vE(i,e,t,n,r){let s=0,o=i.length;if(-1===e)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===t){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,e),s=o+1),i.splice(s++,0,t),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function bE(i){return-1!==i}function Fc(i){return 32767&i}function kc(i,e){let t=function lU(i){return i>>16}(i),n=e;for(;t>0;)n=n[15],t--;return n}let gv=!0;function Up(i){const e=gv;return gv=i,e}let cU=0;const Us={};function Zd(i,e){const t=yv(i,e);if(-1!==t)return t;const n=e[1];n.firstCreatePass&&(i.injectorIndex=e.length,_v(n.data,i),_v(e,null),_v(n.blueprint,null));const r=Hp(i,e),s=i.injectorIndex;if(bE(r)){const o=Fc(r),a=kc(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function _v(i,e){i.push(0,0,0,0,0,0,0,0,e)}function yv(i,e){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===e[i.injectorIndex+8]?-1:i.injectorIndex}function Hp(i,e){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let t=0,n=null,r=e;for(;null!==r;){if(n=AE(r),null===n)return-1;if(t++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|t<<16}return-1}function zp(i,e,t){!function uU(i,e,t){let n;"string"==typeof t?n=t.charCodeAt(0)||0:t.hasOwnProperty(Gd)&&(n=t[Gd]),null==n&&(n=t[Gd]=cU++);const r=255&n;e.data[i+(r>>5)]|=1<<r}(i,e,t)}function ME(i,e,t){if(t&Ke.Optional||void 0!==i)return i;Sp()}function SE(i,e,t,n){if(t&Ke.Optional&&void 0===n&&(n=null),0==(t&(Ke.Self|Ke.Host))){const r=i[9],s=$r(void 0);try{return r?r.get(e,n,t&Ke.Optional):jC(e,n,t&Ke.Optional)}finally{$r(s)}}return ME(n,0,t)}function CE(i,e,t,n=Ke.Default,r){if(null!==i){if(1024&e[2]){const o=function mU(i,e,t,n,r){let s=i,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=EE(s,o,t,n|Ke.Self,Us);if(a!==Us)return a;let l=s.parent;if(!l){const c=o[21];if(c){const u=c.get(t,Us,n);if(u!==Us)return u}l=AE(o),o=o[15]}s=l}return r}(i,e,t,n,Us);if(o!==Us)return o}const s=EE(i,e,t,n,Us);if(s!==Us)return s}return SE(e,t,n,r)}function EE(i,e,t,n,r){const s=function fU(i){if("string"==typeof i)return i.charCodeAt(0)||0;const e=i.hasOwnProperty(Gd)?i[Gd]:void 0;return"number"==typeof e?e>=0?255&e:pU:e}(t);if("function"==typeof s){if(!dE(e,i,n))return n&Ke.Host?ME(r,0,n):SE(e,t,n,r);try{const o=s(n);if(null!=o||n&Ke.Optional)return o;Sp()}finally{mE()}}else if("number"==typeof s){let o=null,a=yv(i,e),l=-1,c=n&Ke.Host?e[16][6]:null;for((-1===a||n&Ke.SkipSelf)&&(l=-1===a?Hp(i,e):e[a+8],-1!==l&&TE(n,!1)?(o=e[1],a=Fc(l),e=kc(l,e)):a=-1);-1!==a;){const u=e[1];if(DE(s,a,u.data)){const d=hU(a,e,t,o,n,c);if(d!==Us)return d}l=e[a+8],-1!==l&&TE(n,e[1].data[a+8]===c)&&DE(s,a,e)?(o=u,a=Fc(l),e=kc(l,e)):a=-1}}return r}function hU(i,e,t,n,r,s){const o=e[1],a=o.data[i+8],u=Gp(a,o,t,null==n?Rp(a)&&gv:n!=o&&0!=(3&a.type),r&Ke.Host&&s===a);return null!==u?Qd(e,o,u,a):Us}function Gp(i,e,t,n,r){const s=i.providerIndexes,o=e.data,a=1048575&s,l=i.directiveStart,u=s>>20,h=r?a+u:i.directiveEnd;for(let f=n?a:a+u;f<h;f++){const m=o[f];if(f<l&&t===m||f>=l&&m.type===t)return f}if(r){const f=o[l];if(f&&ws(f)&&f.type===t)return l}return null}function Qd(i,e,t,n){let r=i[t];const s=e.data;if(function rU(i){return i instanceof Yd}(r)){const o=r;o.resolving&&function cV(i,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${i}`:"";throw new le(-200,`Circular dependency in DI detected for ${i}${t}`)}(function Gt(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():at(i)}(s[t]));const a=Up(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?$r(o.injectImpl):null;dE(i,n,Ke.Default);try{r=i[t]=o.factory(void 0,s,i,n),e.firstCreatePass&&t>=n.directiveStart&&function nU(i,e,t){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(n){const o=QC(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(i,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-i,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,s))}(t,s[t],e)}finally{null!==l&&$r(l),Up(a),o.resolving=!1,mE()}}return r}function DE(i,e,t){return!!(t[e+(i>>5)]&1<<i)}function TE(i,e){return!(i&Ke.Self||i&Ke.Host&&e)}class Nc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return CE(this._tNode,this._lView,e,n,t)}}function pU(){return new Nc(oi(),ue())}function Mi(i){return oa(()=>{const e=i.prototype.constructor,t=e[po]||vv(e),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[po]||vv(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function vv(i){return qy(i)?()=>{const e=vv(nt(i));return e&&e()}:ol(i)}function AE(i){const e=i[1],t=e.type;return 2===t?e.declTNode:1===t?i[6]:null}function ua(i){return function dU(i,e){if("class"===e)return i.classes;if("style"===e)return i.styles;const t=i.attrs;if(t){const n=t.length;let r=0;for(;r<n;){const s=t[r];if(_E(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(oi(),i)}const Vc="__parameters__";function Hc(i,e,t){return oa(()=>{const n=function bv(i){return function(...t){if(i){const n=i(...t);for(const r in n)this[r]=n[r]}}}(e);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Vc)?l[Vc]:Object.defineProperty(l,Vc,{value:[]})[Vc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class pe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=xe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function wr(i,e){void 0===e&&(e=i);for(let t=0;t<i.length;t++){let n=i[t];Array.isArray(n)?(e===i&&(e=i.slice(0,t)),wr(n,e)):e!==i&&e.push(n)}return e}function _o(i,e){i.forEach(t=>Array.isArray(t)?_o(t,e):e(t))}function RE(i,e,t){e>=i.length?i.push(t):i.splice(e,0,t)}function Wp(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function th(i,e){const t=[];for(let n=0;n<i;n++)t.push(e);return t}function Mr(i,e,t){let n=zc(i,e);return n>=0?i[1|n]=t:(n=~n,function vU(i,e,t,n){let r=i.length;if(r==e)i.push(t,n);else if(1===r)i.push(n,i[0]),i[0]=t;else{for(r--,i.push(i[r-1],i[r]);r>e;)i[r]=i[r-2],r--;i[e]=t,i[e+1]=n}}(i,n,e,t)),n}function wv(i,e){const t=zc(i,e);if(t>=0)return i[1|t]}function zc(i,e){return function OE(i,e,t){let n=0,r=i.length>>t;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<t];if(e===o)return s<<t;o>e?r=s:n=s+1}return~(r<<t)}(i,e,1)}const nh={},Sv="__NG_DI_FLAG__",$p="ngTempTokenPath",DU=/\n/gm,FE="__source";let ih;function Gc(i){const e=ih;return ih=i,e}function AU(i,e=Ke.Default){if(void 0===ih)throw new le(-203,!1);return null===ih?jC(i,void 0,e):ih.get(i,e&Ke.Optional?null:void 0,e)}function j(i,e=Ke.Default){return(function yV(){return Yy}()||AU)(nt(i),e)}function gn(i,e=Ke.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),j(i,e)}function Cv(i){const e=[];for(let t=0;t<i.length;t++){const n=nt(i[t]);if(Array.isArray(n)){if(0===n.length)throw new le(900,!1);let r,s=Ke.Default;for(let o=0;o<n.length;o++){const a=n[o],l=IU(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(j(r,s))}else e.push(j(n))}return e}function rh(i,e){return i[Sv]=e,i.prototype[Sv]=e,i}function IU(i){return i[Sv]}const da=rh(Hc("Optional"),8),Wc=rh(Hc("SkipSelf"),4);let Dv,Yp;function $c(i){return function Tv(){if(void 0===Yp&&(Yp=null,on.trustedTypes))try{Yp=on.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Yp}()?.createHTML(i)||i}class al{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class jU extends al{getTypeName(){return"HTML"}}class $U extends al{getTypeName(){return"Style"}}class qU extends al{getTypeName(){return"Script"}}class XU extends al{getTypeName(){return"URL"}}class YU extends al{getTypeName(){return"ResourceURL"}}function Sr(i){return i instanceof al?i.changingThisBreaksApplicationSecurity:i}function Hs(i,e){const t=function KU(i){return i instanceof al&&i.getTypeName()||null}(i);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class nH{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString($c(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class iH{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const n=this.inertDocument.createElement("body");t.appendChild(n)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=$c(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=$c(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const sH=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Zp(i){return(i=String(i)).match(sH)?i:"unsafe:"+i}function yo(i){const e={};for(const t of i.split(","))e[t]=!0;return e}function ah(...i){const e={};for(const t of i)for(const n in t)t.hasOwnProperty(n)&&(e[n]=!0);return e}const YE=yo("area,br,col,hr,img,wbr"),KE=yo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ZE=yo("rp,rt"),Iv=ah(YE,ah(KE,yo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ah(ZE,yo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ah(ZE,KE)),Rv=yo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),QE=ah(Rv,yo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),oH=yo("script,style,template");class aH{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Iv.hasOwnProperty(t))return this.sanitizedSomething=!0,!oH.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,a=o.toLowerCase();if(!QE.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Rv[a]&&(l=Zp(l)),this.buf.push(" ",o,'="',JE(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Iv.hasOwnProperty(t)&&!YE.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(JE(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const lH=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cH=/([^\#-~ |!])/g;function JE(i){return i.replace(/&/g,"&amp;").replace(lH,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(cH,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Qp;function eD(i,e){let t=null;try{Qp=Qp||function XE(i){const e=new iH(i);return function rH(){try{return!!(new window.DOMParser).parseFromString($c(""),"text/html")}catch{return!1}}()?new nH(e):e}(i);let n=e?String(e):"";t=Qp.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=t.innerHTML,t=Qp.getInertBodyElement(n)}while(n!==s);return $c((new aH).sanitizeChildren(Pv(t)||t))}finally{if(t){const n=Pv(t)||t;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function Pv(i){return"content"in i&&function uH(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var jt=(()=>((jt=jt||{})[jt.NONE=0]="NONE",jt[jt.HTML=1]="HTML",jt[jt.STYLE=2]="STYLE",jt[jt.SCRIPT=3]="SCRIPT",jt[jt.URL=4]="URL",jt[jt.RESOURCE_URL=5]="RESOURCE_URL",jt))();const Ov=new pe("ENVIRONMENT_INITIALIZER"),nD=new pe("INJECTOR",-1),iD=new pe("INJECTOR_DEF_TYPES");class rD{get(e,t=nh){if(t===nh){const n=new Error(`NullInjectorError: No provider for ${sn(e)}!`);throw n.name="NullInjectorError",n}return t}}function yH(...i){return{\u0275providers:sD(0,i)}}function sD(i,...e){const t=[],n=new Set;let r;return _o(e,s=>{const o=s;Fv(o,t,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&oD(r,t),t}function oD(i,e){for(let t=0;t<i.length;t++){const{providers:r}=i[t];_o(r,s=>{e.push(s)})}}function Fv(i,e,t,n){if(!(i=nt(i)))return!1;let r=null,s=GC(i);const o=!s&&Jt(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const l=i.ngModule;if(s=GC(l),!s)return!1;r=l}const a=n.has(r);if(o){if(a)return!1;if(n.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Fv(c,e,t,n)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;n.add(r);try{_o(s.imports,u=>{Fv(u,e,t,n)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&oD(c,e)}if(!a){const c=ol(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:Wt},{provide:iD,useValue:r,multi:!0},{provide:Ov,useValue:()=>j(r),multi:!0})}const l=s.providers;null==l||a||_o(l,u=>{e.push(u)})}}return r!==i&&void 0!==i.providers}const vH=rn({provide:String,useValue:rn});function kv(i){return null!==i&&"object"==typeof i&&vH in i}function ll(i){return"function"==typeof i}const Nv=new pe("Set Injector scope."),Jp={},xH={};let Bv;function em(){return void 0===Bv&&(Bv=new rD),Bv}class ha{}class cD extends ha{constructor(e,t,n,r){super(),this.parent=t,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uv(e,o=>this.processProvider(o)),this.records.set(nD,qc(void 0,this)),r.has("environment")&&this.records.set(ha,qc(void 0,this));const s=this.records.get(Nv);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(iD.multi,Wt,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Gc(this),n=$r(void 0);try{return e()}finally{Gc(t),$r(n)}}get(e,t=nh,n=Ke.Default){this.assertNotDestroyed();const r=Gc(this),s=$r(void 0);try{if(!(n&Ke.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function EH(i){return"function"==typeof i||"object"==typeof i&&i instanceof pe}(e)&&Cp(e);a=l&&this.injectableDefInScope(l)?qc(Vv(e),Jp):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&Ke.Self?em():this.parent).get(e,t=n&Ke.Optional&&t===nh?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[$p]=o[$p]||[]).unshift(sn(e)),r)throw o;return function RU(i,e,t,n){const r=i[$p];throw e[FE]&&r.unshift(e[FE]),i.message=function PU(i,e,t,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=sn(e);if(Array.isArray(e))r=e.map(sn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):sn(a)))}r=`{${s.join(", ")}}`}return`${t}${n?"("+n+")":""}[${r}]: ${i.replace(DU,"\n  ")}`}("\n"+i.message,r,t,n),i.ngTokenPath=r,i[$p]=null,i}(o,e,"R3InjectorError",this.source)}throw o}finally{$r(s),Gc(r)}}resolveInjectorInitializers(){const e=Gc(this),t=$r(void 0);try{const n=this.get(Ov.multi,Wt,Ke.Self);for(const r of n)r()}finally{Gc(e),$r(t)}}toString(){const e=[],t=this.records;for(const n of t.keys())e.push(sn(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processProvider(e){let t=ll(e=nt(e))?e:nt(e&&e.provide);const n=function MH(i){return kv(i)?qc(void 0,i.useValue):qc(uD(i),Jp)}(e);if(ll(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=qc(void 0,Jp,!0),r.factory=()=>Cv(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,n)}hydrate(e,t){return t.value===Jp&&(t.value=xH,t.value=t.factory()),"object"==typeof t.value&&t.value&&function CH(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=nt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Vv(i){const e=Cp(i),t=null!==e?e.factory:ol(i);if(null!==t)return t;if(i instanceof pe)throw new le(204,!1);if(i instanceof Function)return function wH(i){const e=i.length;if(e>0)throw th(e,"?"),new le(204,!1);const t=function mV(i){const e=i&&(i[Ep]||i[WC]);if(e){const t=function gV(i){if(i.hasOwnProperty("name"))return i.name;const e=(""+i).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(i);return null!==t?()=>t.factory(i):()=>new i}(i);throw new le(204,!1)}function uD(i,e,t){let n;if(ll(i)){const r=nt(i);return ol(r)||Vv(r)}if(kv(i))n=()=>nt(i.useValue);else if(function lD(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...Cv(i.deps||[]));else if(function aD(i){return!(!i||!i.useExisting)}(i))n=()=>j(nt(i.useExisting));else{const r=nt(i&&(i.useClass||i.provide));if(!function SH(i){return!!i.deps}(i))return ol(r)||Vv(r);n=()=>new r(...Cv(i.deps))}return n}function qc(i,e,t=!1){return{factory:i,value:e,multi:t?[]:void 0}}function DH(i){return!!i.\u0275providers}function Uv(i,e){for(const t of i)Array.isArray(t)?Uv(t,e):DH(t)?Uv(t.\u0275providers,e):e(t)}class dD{}class IH{resolveComponentFactory(e){throw function AH(i){const e=Error(`No component factory found for ${sn(i)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=i,e}(e)}}let cl=(()=>{class i{}return i.NULL=new IH,i})();function RH(){return Xc(oi(),ue())}function Xc(i,e){return new $t(Yr(i,e))}let $t=(()=>{class i{constructor(t){this.nativeElement=t}}return i.__NG_ELEMENT_ID__=RH,i})();function PH(i){return i instanceof $t?i.nativeElement:i}class ch{}let zs=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function LH(){const i=ue(),t=xr(oi().index,i);return(ar(t)?t:i)[11]}(),i})(),OH=(()=>{class i{}return i.\u0275prov=xe({token:i,providedIn:"root",factory:()=>null}),i})();class ul{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const FH=new ul("14.2.2"),Hv={};function $v(i){return i.ngOriginalError}class vo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&$v(e);for(;t&&$v(t);)t=$v(t);return t||null}}const qv=new Map;let qH=0;const Yv="__ngContext__";function Ri(i,e){ar(e)?(i[Yv]=e[20],function YH(i){qv.set(i[20],i)}(e)):i[Yv]=e}function SD(i){return i.ownerDocument.defaultView}function bo(i){return i instanceof Function?i():i}var lr=(()=>((lr=lr||{})[lr.Important=1]="Important",lr[lr.DashCase=2]="DashCase",lr))();function Zv(i,e){return undefined(i,e)}function dh(i){const e=i[3];return xs(e)?e[3]:e}function Qv(i){return DD(i[13])}function Jv(i){return DD(i[4])}function DD(i){for(;null!==i&&!xs(i);)i=i[4];return i}function Kc(i,e,t,n,r){if(null!=n){let s,o=!1;xs(n)?s=n:ar(n)&&(o=!0,n=n[0]);const a=Kn(n);0===i&&null!==t?null==r?LD(e,t,a):dl(e,t,a,r||null,!0):1===i&&null!==t?dl(e,t,a,r||null,!0):2===i?function UD(i,e,t){const n=tm(i,e);n&&function xz(i,e,t,n){i.removeChild(e,t,n)}(i,n,e,t)}(e,a,o):3===i&&e.destroyNode(a),null!=s&&function Sz(i,e,t,n,r){const s=t[7];s!==Kn(t)&&Kc(e,i,n,s,r);for(let a=10;a<t.length;a++){const l=t[a];hh(l[1],l,i,e,n,s)}}(e,i,s,t,r)}}function tb(i,e,t){return i.createElement(e,t)}function AD(i,e){const t=i[9],n=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,ov(r,-1)),t.splice(n,1)}function nb(i,e){if(i.length<=10)return;const t=10+e,n=i[t];if(n){const r=n[17];null!==r&&r!==i&&AD(r,n),e>0&&(i[t-1][4]=n[4]);const s=Wp(i,10+e);!function fz(i,e){hh(i,e,e[11],2,null,null),e[0]=null,e[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function ID(i,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&hh(i,e,t,3,null,null),function gz(i){let e=i[13];if(!e)return ib(i[1],i);for(;e;){let t=null;if(ar(e))t=e[13];else{const n=e[10];n&&(t=n)}if(!t){for(;e&&!e[4]&&e!==i;)ar(e)&&ib(e[1],e),e=e[3];null===e&&(e=i),ar(e)&&ib(e[1],e),t=e&&e[4]}e=t}}(e)}}function ib(i,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function bz(i,e){let t;if(null!=i&&null!=(t=i.destroyHooks))for(let n=0;n<t.length;n+=2){const r=e[t[n]];if(!(r instanceof Yd)){const s=t[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(i,e),function vz(i,e){const t=i.cleanup,n=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Kn(e[o]),l=n[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?n[r=c]():n[r=-c].unsubscribe(),s+=2}else{const o=n[r=t[s+1]];t[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();e[7]=null}}(i,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&xs(e[3])){t!==e[3]&&AD(t,e);const n=e[19];null!==n&&n.detachView(i)}!function KH(i){qv.delete(i[20])}(e)}}function RD(i,e,t){return function PD(i,e,t){let n=e;for(;null!==n&&40&n.type;)n=(e=n).parent;if(null===n)return t[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===vs.None||r===vs.Emulated)return null}return Yr(n,t)}(i,e.parent,t)}function dl(i,e,t,n,r){i.insertBefore(e,t,n,r)}function LD(i,e,t){i.appendChild(e,t)}function OD(i,e,t,n,r){null!==n?dl(i,e,t,n,r):LD(i,e,t)}function tm(i,e){return i.parentNode(e)}function FD(i,e,t){return ND(i,e,t)}let ND=function kD(i,e,t){return 40&i.type?Yr(i,t):null};function nm(i,e,t,n){const r=RD(i,n,e),s=e[11],a=FD(n.parent||e[6],n,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)OD(s,r,t[l],a,!1);else OD(s,r,t,a,!1)}function im(i,e){if(null!==e){const t=e.type;if(3&t)return Yr(e,i);if(4&t)return sb(-1,i[e.index]);if(8&t){const n=e.child;if(null!==n)return im(i,n);{const r=i[e.index];return xs(r)?sb(-1,r):Kn(r)}}if(32&t)return Zv(e,i)()||Kn(i[e.index]);{const n=VD(i,e);return null!==n?Array.isArray(n)?n[0]:im(dh(i[16]),n):im(i,e.next)}}return null}function VD(i,e){return null!==e?i[16][6].projection[e.projection]:null}function sb(i,e){const t=10+i+1;if(t<e.length){const n=e[t],r=n[1].firstChild;if(null!==r)return im(n,r)}return e[7]}function ob(i,e,t,n,r,s,o){for(;null!=t;){const a=n[t.index],l=t.type;if(o&&0===e&&(a&&Ri(Kn(a),n),t.flags|=4),64!=(64&t.flags))if(8&l)ob(i,e,t.child,n,r,s,!1),Kc(e,i,r,a,s);else if(32&l){const c=Zv(t,n);let u;for(;u=c();)Kc(e,i,r,u,s);Kc(e,i,r,a,s)}else 16&l?HD(i,e,n,t,r,s):Kc(e,i,r,a,s);t=o?t.projectionNext:t.next}}function hh(i,e,t,n,r,s){ob(t,n,i.firstChild,e,r,s,!1)}function HD(i,e,t,n,r,s){const o=t[16],l=o[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Kc(e,i,r,l[c],s);else ob(i,e,l,o[3],r,s,!0)}function zD(i,e,t){i.setAttribute(e,"style",t)}function ab(i,e,t){""===t?i.removeAttribute(e,"class"):i.setAttribute(e,"class",t)}function GD(i,e,t){let n=i.length;for(;;){const r=i.indexOf(e,t);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=e.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}t=r+1}}const WD="ng-template";function Ez(i,e,t){let n=0;for(;n<i.length;){let r=i[n++];if(t&&"class"===r){if(r=i[n],-1!==GD(r.toLowerCase(),e,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function jD(i){return 4===i.type&&i.value!==WD}function Dz(i,e,t){return e===(4!==i.type||t?i.value:WD)}function Tz(i,e,t){let n=4;const r=i.attrs||[],s=function Rz(i){for(let e=0;e<i.length;e++)if(_E(i[e]))return e;return i.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!Dz(i,l,t)||""===l&&1===e.length){if(Ms(n))return!1;o=!0}}else{const c=8&n?l:e[++a];if(8&n&&null!==i.attrs){if(!Ez(i.attrs,c,t)){if(Ms(n))return!1;o=!0}continue}const d=Az(8&n?"class":l,r,jD(i),t);if(-1===d){if(Ms(n))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&n?h:null;if(f&&-1!==GD(f,c,0)||2&n&&c!==h){if(Ms(n))return!1;o=!0}}}}else{if(!o&&!Ms(n)&&!Ms(l))return!1;if(o&&Ms(l))continue;o=!1,n=l|1&n}}return Ms(n)||o}function Ms(i){return 0==(1&i)}function Az(i,e,t,n){if(null===e)return-1;let r=0;if(n||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Pz(i,e){let t=i.indexOf(4);if(t>-1)for(t++;t<i.length;){const n=i[t];if("number"==typeof n)return-1;if(n===e)return t;t++}return-1}(e,i)}function $D(i,e,t=!1){for(let n=0;n<e.length;n++)if(Tz(i,e[n],t))return!0;return!1}function Lz(i,e){e:for(let t=0;t<e.length;t++){const n=e[t];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function qD(i,e){return i?":not("+e.trim()+")":e}function Oz(i){let e=i[0],t=1,n=2,r="",s=!1;for(;t<i.length;){let o=i[t];if("string"==typeof o)if(2&n){const a=i[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!Ms(o)&&(e+=qD(s,r),r=""),n=o,s=s||!Ms(n);t++}return""!==r&&(e+=qD(s,r)),e}const lt={};function li(i){XD(Ft(),ue(),qi()+i,!1)}function XD(i,e,t,n){if(!n)if(3==(3&e[2])){const s=i.preOrderCheckHooks;null!==s&&kp(e,s,t)}else{const s=i.preOrderHooks;null!==s&&Np(e,s,0,t)}la(t)}function QD(i,e=null,t=null,n){const r=JD(i,e,t,n);return r.resolveInjectorInitializers(),r}function JD(i,e=null,t=null,n,r=new Set){const s=[t||Wt,yH(i)];return n=n||("object"==typeof i?void 0:sn(i)),new cD(s,e||em(),n||null,r)}let Mn=(()=>{class i{static create(t,n){if(Array.isArray(t))return QD({name:""},n,t,"");{const r=t.name??"";return QD({name:r},t.parent,t.providers,r)}}}return i.THROW_IF_NOT_FOUND=nh,i.NULL=new rD,i.\u0275prov=xe({token:i,providedIn:"any",factory:()=>j(nD)}),i.__NG_ELEMENT_ID__=-1,i})();function N(i,e=Ke.Default){const t=ue();return null===t?j(i,e):CE(oi(),t,nt(i),e)}function hb(){throw new Error("invalid")}function sm(i,e){return i<<17|e<<2}function Ss(i){return i>>17&32767}function fb(i){return 2|i}function xo(i){return(131068&i)>>2}function pb(i,e){return-131069&i|e<<2}function mb(i){return 1|i}function gT(i,e){const t=i.contentQueries;if(null!==t)for(let n=0;n<t.length;n+=2){const r=t[n],s=t[n+1];if(-1!==s){const o=i.data[s];dv(r),o.contentQueries(2,e[s],s)}}}function lm(i,e,t,n,r,s,o,a,l,c,u){const d=e.blueprint.slice();return d[0]=r,d[2]=76|n,(null!==u||i&&1024&i[2])&&(d[2]|=1024),tE(d),d[3]=d[15]=i,d[8]=t,d[10]=o||i&&i[10],d[11]=a||i&&i[11],d[12]=l||i&&i[12]||null,d[9]=c||i&&i[9]||null,d[6]=s,d[20]=function XH(){return qH++}(),d[21]=u,d[16]=2==e.type?i[16]:d,d}function Qc(i,e,t,n,r){let s=i.data[e];if(null===s)s=function Mb(i,e,t,n,r){const s=oE(),o=av(),l=i.data[e]=function _4(i,e,t,n,r,s){return{type:t,index:n,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(i,e,t,n,r),function jV(){return st.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=n,s.attrs=r;const o=function Xd(){const i=st.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Vs(s,!0),s}function Jc(i,e,t,n){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(n),i.blueprint.push(n),i.data.push(null);return r}function Sb(i,e,t){hv(e);try{const n=i.viewQuery;null!==n&&Pb(1,n,t);const r=i.template;null!==r&&_T(i,e,r,1,t),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&gT(i,e),i.staticViewQueries&&Pb(2,i.viewQuery,t);const s=i.components;null!==s&&function p4(i,e){for(let t=0;t<e.length;t++)L4(i,e[t])}(e,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{e[2]&=-5,fv()}}function cm(i,e,t,n){const r=e[2];if(128!=(128&r)){hv(e);try{tE(e),function lE(i){return st.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==t&&_T(i,e,t,2,n);const o=3==(3&r);if(o){const c=i.preOrderCheckHooks;null!==c&&kp(e,c,null)}else{const c=i.preOrderHooks;null!==c&&Np(e,c,0,null),pv(e,0)}if(function R4(i){for(let e=Qv(i);null!==e;e=Jv(e)){if(!e[2])continue;const t=e[9];for(let n=0;n<t.length;n++){const r=t[n],s=r[3];0==(512&r[2])&&ov(s,1),r[2]|=512}}}(e),function I4(i){for(let e=Qv(i);null!==e;e=Jv(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];Op(n)&&cm(r,n,r.template,n[8])}}(e),null!==i.contentQueries&&gT(i,e),o){const c=i.contentCheckHooks;null!==c&&kp(e,c)}else{const c=i.contentHooks;null!==c&&Np(e,c,1),pv(e,1)}!function h4(i,e){const t=i.hostBindingOpCodes;if(null!==t)try{for(let n=0;n<t.length;n++){const r=t[n];if(r<0)la(~r);else{const s=r,o=t[++n],a=t[++n];$V(o,s),a(2,e[s])}}}finally{la(-1)}}(i,e);const a=i.components;null!==a&&function f4(i,e){for(let t=0;t<e.length;t++)P4(i,e[t])}(e,a);const l=i.viewQuery;if(null!==l&&Pb(2,l,n),o){const c=i.viewCheckHooks;null!==c&&kp(e,c)}else{const c=i.viewHooks;null!==c&&Np(e,c,2),pv(e,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,ov(e[3],-1))}finally{fv()}}}function _T(i,e,t,n,r){const s=qi(),o=2&n;try{la(-1),o&&e.length>22&&XD(i,e,22,!1),t(n,r)}finally{la(s)}}function Cb(i,e,t){!iE()||(function w4(i,e,t,n){const r=t.directiveStart,s=t.directiveEnd;i.firstCreatePass||Zd(t,e),Ri(n,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=ws(l);c&&D4(e,t,l);const u=Qd(e,i,a,t);Ri(u,e),null!==o&&T4(0,a-r,u,l,0,o),c&&(xr(t.index,e)[8]=u)}}(i,e,t,Yr(t,e)),128==(128&t.flags)&&function M4(i,e,t){const n=t.directiveStart,r=t.directiveEnd,s=t.index,o=function qV(){return st.lFrame.currentDirectiveIndex}();try{la(s);for(let a=n;a<r;a++){const l=i.data[a],c=e[a];cv(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&CT(l,c)}}finally{la(-1),cv(o)}}(i,e,t))}function Eb(i,e,t=Yr){const n=e.localNames;if(null!==n){let r=e.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?t(e,i):i[o];i[r++]=a}}}function vT(i){const e=i.tView;return null===e||e.incompleteFirstPass?i.tView=Db(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):e}function Db(i,e,t,n,r,s,o,a,l,c){const u=22+n,d=u+r,h=function m4(i,e){const t=[];for(let n=0;n<e;n++)t.push(n<i?null:lt);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:i,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function bT(i,e,t,n){const r=IT(e);null===t?r.push(n):(r.push(t),i.firstCreatePass&&RT(i).push(n,r.length-1))}function xT(i,e,t){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(t=null===t?{}:t).hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}return t}function wT(i,e){const n=e.directiveEnd,r=i.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<n;c++){const u=r[c],d=u.inputs,h=null===s||jD(e)?null:A4(d,s);o.push(h),a=xT(d,c,a),l=xT(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}function Cr(i,e,t,n,r,s,o,a){const l=Yr(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[n])?(Lb(i,t,u,n,r),Rp(e)&&MT(t,e.index)):3&e.type&&(n=function y4(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,e.value||"",n):r,s.setProperty(l,n,r))}function MT(i,e){const t=xr(e,i);16&t[2]||(t[2]|=32)}function Tb(i,e,t,n){let r=!1;if(iE()){const s=function S4(i,e,t){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];$D(t,o.selectors,!1)&&(r||(r=[]),zp(Zd(t,e),i,o.type),ws(o)?(ET(i,t),r.unshift(o)):r.push(o))}return r}(i,e,t),o=null===n?null:{"":-1};if(null!==s){r=!0,DT(t,i.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=Jc(i,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=Vp(t.mergedAttrs,d.hostAttrs),TT(i,t,e,c,d),E4(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t.index),l=!0),c++}wT(i,t)}o&&function C4(i,e,t){if(e){const n=i.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new le(-301,!1);n.push(e[r],s)}}}(t,n,o)}return t.mergedAttrs=Vp(t.mergedAttrs,t.attrs),r}function ST(i,e,t,n,r,s){const o=s.hostBindings;if(o){let a=i.hostBindingOpCodes;null===a&&(a=i.hostBindingOpCodes=[]);const l=~e.index;(function x4(i){let e=i.length;for(;e>0;){const t=i[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(n,r,o)}}function CT(i,e){null!==i.hostBindings&&i.hostBindings(1,e)}function ET(i,e){e.flags|=2,(i.components||(i.components=[])).push(e.index)}function E4(i,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=i;ws(e)&&(t[""]=i)}}function DT(i,e,t){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+t,i.providerIndexes=e}function TT(i,e,t,n,r){i.data[n]=r;const s=r.factory||(r.factory=ol(r.type)),o=new Yd(s,ws(r),N);i.blueprint[n]=o,t[n]=o,ST(i,e,0,n,Jc(i,t,r.hostVars,lt),r)}function D4(i,e,t){const n=Yr(e,i),r=vT(t),s=i[10],o=um(i,lm(i,r,null,t.onPush?32:16,n,e,s,s.createRenderer(n,t),null,null,null));i[e.index]=o}function Gs(i,e,t,n,r,s){const o=Yr(i,e);!function Ab(i,e,t,n,r,s,o){if(null==s)i.removeAttribute(e,r,t);else{const a=null==o?at(s):o(s,n||"",r);i.setAttribute(e,r,a,t)}}(e[11],o,s,i.value,t,n,r)}function T4(i,e,t,n,r,s){const o=s[e];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?n.setInput(t,d,c,u):t[u]=d}}}function A4(i,e){let t=null,n=0;for(;n<e.length;){const r=e[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,i[r],e[n+1])),n+=2}else n+=2;else n+=4}return t}function AT(i,e,t,n){return new Array(i,!0,!1,e,null,0,n,t,null,null)}function P4(i,e){const t=xr(e,i);if(Op(t)){const n=t[1];48&t[2]?cm(n,t,n.template,t[8]):t[5]>0&&Ib(t)}}function Ib(i){for(let n=Qv(i);null!==n;n=Jv(n))for(let r=10;r<n.length;r++){const s=n[r];if(Op(s))if(512&s[2]){const o=s[1];cm(o,s,o.template,s[8])}else s[5]>0&&Ib(s)}const t=i[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=xr(t[n],i);Op(r)&&r[5]>0&&Ib(r)}}function L4(i,e){const t=xr(e,i),n=t[1];(function O4(i,e){for(let t=e.length;t<i.blueprint.length;t++)e.push(i.blueprint[t])})(n,t),Sb(n,t,t[8])}function um(i,e){return i[13]?i[14][4]=e:i[13]=e,i[14]=e,e}function Rb(i){for(;i;){i[2]|=32;const e=dh(i);if(CV(i)&&!e)return i;i=e}return null}function dm(i,e,t,n=!0){const r=e[10];r.begin&&r.begin();try{cm(i,e,i.template,t)}catch(o){throw n&&LT(e,o),o}finally{r.end&&r.end()}}function Pb(i,e,t){dv(0),e(i,t)}function IT(i){return i[7]||(i[7]=[])}function RT(i){return i.cleanup||(i.cleanup=[])}function PT(i,e,t){return(null===i||ws(i))&&(t=function FV(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(t[e.index])),t[11]}function LT(i,e){const t=i[9],n=t?t.get(vo,null):null;n&&n.handleError(e)}function Lb(i,e,t,n,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=i.data[o];null!==c.setInput?c.setInput(l,r,n,a):l[a]=r}}function hm(i,e,t){let n=t?i.styles:null,r=t?i.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=$y(r,a):2==s&&(n=$y(n,a+": "+e[++o]+";"))}t?i.styles=n:i.stylesWithoutHost=n,t?i.classes=r:i.classesWithoutHost=r}function fm(i,e,t,n,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&n.push(Kn(s)),xs(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&fm(l[1],l,c,n)}const o=t.type;if(8&o)fm(i,e,t.child,n);else if(32&o){const a=Zv(t,e);let l;for(;l=a();)n.push(l)}else if(16&o){const a=VD(e,t);if(Array.isArray(a))n.push(...a);else{const l=dh(e[16]);fm(l[1],l,a,n,!0)}}t=r?t.projectionNext:t.next}return n}class fh{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return fm(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(xs(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(nb(e,n),Wp(t,n))}this._attachedToViewContainer=!1}ID(this._lView[1],this._lView)}onDestroy(e){bT(this._lView[1],this._lView,null,e)}markForCheck(){Rb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){dm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mz(i,e){hh(i,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=e}}class F4 extends fh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;dm(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class Ob extends cl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Jt(e);return new ph(t,this.ngModule)}}function OT(i){const e=[];for(let t in i)i.hasOwnProperty(t)&&e.push({propName:i[t],templateName:t});return e}class N4{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){const r=this.injector.get(e,Hv,n);return r!==Hv||t===Hv?r:this.parentInjector.get(e,t,n)}}class ph extends dD{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Fz(i){return i.map(Oz).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return OT(this.componentDef.inputs)}get outputs(){return OT(this.componentDef.outputs)}create(e,t,n,r){let s=(r=r||this.ngModule)instanceof ha?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new N4(e,s):e,a=o.get(ch,null);if(null===a)throw new le(407,!1);const l=o.get(OH,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=n?function g4(i,e,t){return i.selectRootElement(e,t===vs.ShadowDom)}(c,n,this.componentDef.encapsulation):tb(a.createRenderer(null,this.componentDef),u,function k4(i){const e=i.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Db(0,null,null,1,0,null,null,null,null,null),m=lm(null,f,null,h,null,null,a,c,l,o,null);let p,g;hv(m);try{const _=function U4(i,e,t,n,r,s){const o=t[1];t[22]=i;const l=Qc(o,22,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(hm(l,c,!0),null!==i&&(Bp(r,i,c),null!==l.classes&&ab(r,i,l.classes),null!==l.styles&&zD(r,i,l.styles)));const u=n.createRenderer(i,e),d=lm(t,vT(e),null,e.onPush?32:16,t[22],l,n,u,s||null,null,null);return o.firstCreatePass&&(zp(Zd(l,t),o,e.type),ET(o,l),DT(l,t.length,1)),um(t,d),t[22]=d}(d,this.componentDef,m,a,c);if(d)if(n)Bp(c,d,["ng-version",FH.full]);else{const{attrs:y,classes:v}=function kz(i){const e=[],t=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&e.push(s,i[++n]):8===r&&t.push(s);else{if(!Ms(r))break;r=s}n++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);y&&Bp(c,d,y),v&&v.length>0&&ab(c,d,v.join(" "))}if(g=sv(f,22),void 0!==t){const y=g.projection=[];for(let v=0;v<this.ngContentSelectors.length;v++){const b=t[v];y.push(null!=b?Array.from(b):null)}}p=function H4(i,e,t,n){const r=t[1],s=function b4(i,e,t){const n=oi();i.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),TT(i,n,e,Jc(i,e,1,null),t),wT(i,n));const r=Qd(e,i,n.directiveStart,n);Ri(r,e);const s=Yr(n,e);return s&&Ri(s,e),r}(r,t,e);if(i[8]=t[8]=s,null!==n)for(const a of n)a(s,e);if(e.contentQueries){const a=oi();e.contentQueries(1,s,a.directiveStart)}const o=oi();return!r.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(la(o.index),ST(t[1],o,0,o.directiveStart,o.directiveEnd,e),CT(e,s)),s}(_,this.componentDef,m,[z4]),Sb(f,m,null)}finally{fv()}return new V4(this.componentType,p,Xc(g,m),m,g)}}class V4 extends class TH{}{constructor(e,t,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new F4(r),this.componentType=e}setInput(e,t){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[e])){const s=this._rootLView;Lb(s[1],s,r,e,t),MT(s,this._tNode.index)}}get injector(){return new Nc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function z4(){const i=oi();Fp(ue()[1],i)}function ut(i){let e=function FT(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),t=!0;const n=[i];for(;e;){let r;if(ws(i))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new le(903,!1);r=e.\u0275dir}if(r){if(t){n.push(r);const o=i;o.inputs=Fb(i.inputs),o.declaredInputs=Fb(i.declaredInputs),o.outputs=Fb(i.outputs);const a=r.hostBindings;a&&$4(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&W4(i,l),c&&j4(i,c),jy(i.inputs,r.inputs),jy(i.declaredInputs,r.declaredInputs),jy(i.outputs,r.outputs),ws(r)&&r.data.animation){const u=i.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===ut&&(t=!1)}}e=Object.getPrototypeOf(e)}!function G4(i){let e=0,t=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=e+=r.hostVars,r.hostAttrs=Vp(r.hostAttrs,t=Vp(t,r.hostAttrs))}}(n)}function Fb(i){return i===Tc?{}:i===Wt?[]:i}function W4(i,e){const t=i.viewQuery;i.viewQuery=t?(n,r)=>{e(n,r),t(n,r)}:e}function j4(i,e){const t=i.contentQueries;i.contentQueries=t?(n,r,s)=>{e(n,r,s),t(n,r,s)}:e}function $4(i,e){const t=i.hostBindings;i.hostBindings=t?(n,r)=>{e(n,r),t(n,r)}:e}let pm=null;function hl(){if(!pm){const i=on.Symbol;if(i&&i.iterator)pm=i.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(pm=n)}}}return pm}function mh(i){return!!kb(i)&&(Array.isArray(i)||!(i instanceof Map)&&hl()in i)}function kb(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ws(i,e,t){return i[e]=t}function Pi(i,e,t){return!Object.is(i[e],t)&&(i[e]=t,!0)}function bn(i,e,t,n){const r=ue();return Pi(r,Oc(),e)&&(Ft(),Gs(Pn(),r,i,e,t,n)),bn}function pl(i,e,t,n,r,s,o,a){const l=ue(),c=Ft(),u=i+22,d=c.firstCreatePass?function eG(i,e,t,n,r,s,o,a,l){const c=e.consts,u=Qc(e,i,4,o||null,aa(c,a));Tb(e,t,u,aa(c,l)),Fp(e,u);const d=u.tViews=Db(2,u,n,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,n,r,s,o):c.data[u];Vs(d,!1);const h=l[11].createComment("");nm(c,l,h,d),Ri(h,l),um(l,l[u]=AT(h,l,h,d)),Pp(d)&&Cb(c,l,d),null!=o&&Eb(l,d,a)}function Li(i,e,t){const n=ue();return Pi(n,Oc(),e)&&Cr(Ft(),Pn(),n,i,e,n[11],t,!1),Li}function Nb(i,e,t,n,r){const o=r?"class":"style";Lb(i,t,e.inputs[o],o,n)}function vt(i,e,t,n){const r=ue(),s=Ft(),o=22+i,a=r[11],l=r[o]=tb(a,e,function tU(){return st.lFrame.currentNamespace}()),c=s.firstCreatePass?function nG(i,e,t,n,r,s,o){const a=e.consts,c=Qc(e,i,2,r,aa(a,s));return Tb(e,t,c,aa(a,o)),null!==c.attrs&&hm(c,c.attrs,!1),null!==c.mergedAttrs&&hm(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,n):s.data[o];Vs(c,!0);const u=c.mergedAttrs;null!==u&&Bp(a,l,u);const d=c.classes;null!==d&&ab(a,l,d);const h=c.styles;return null!==h&&zD(a,l,h),64!=(64&c.flags)&&nm(s,r,l,c),0===function VV(){return st.lFrame.elementDepthCount}()&&Ri(l,r),function UV(){st.lFrame.elementDepthCount++}(),Pp(c)&&(Cb(s,r,c),function yT(i,e,t){if(ev(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,c,r)),null!==n&&Eb(r,c),vt}function Mt(){let i=oi();av()?lv():(i=i.parent,Vs(i,!1));const e=i;!function HV(){st.lFrame.elementDepthCount--}();const t=Ft();return t.firstCreatePass&&(Fp(t,i),ev(i)&&t.queries.elementEnd(i)),null!=e.classesWithoutHost&&function oU(i){return 0!=(16&i.flags)}(e)&&Nb(t,e,ue(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function aU(i){return 0!=(32&i.flags)}(e)&&Nb(t,e,ue(),e.stylesWithoutHost,!1),Mt}function Yi(i,e,t,n){return vt(i,e,t,n),Mt(),Yi}function _h(i){return!!i&&"function"==typeof i.then}function XT(i){return!!i&&"function"==typeof i.subscribe}const Ub=XT;function _n(i,e,t,n){const r=ue(),s=Ft(),o=oi();return YT(s,r,r[11],o,i,e,0,n),_n}function gm(i,e){const t=oi(),n=ue(),r=Ft();return YT(r,n,PT(uv(r.data),t,n),t,i,e),gm}function YT(i,e,t,n,r,s,o,a){const l=Pp(n),u=i.firstCreatePass&&RT(i),d=e[8],h=IT(e);let f=!0;if(3&n.type||a){const g=Yr(n,e),_=a?a(g):g,y=h.length,v=a?x=>a(Kn(x[n.index])):n.index;let b=null;if(!a&&l&&(b=function rG(i,e,t,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===n){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,e,r,n.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,f=!1;else{s=ZT(n,e,d,s,!1);const x=t.listen(_,r,s);h.push(s,x),u&&u.push(r,v,y,y+1)}}else s=ZT(n,e,d,s,!1);const m=n.outputs;let p;if(f&&null!==m&&(p=m[r])){const g=p.length;if(g)for(let _=0;_<g;_+=2){const M=e[p[_]][p[_+1]].subscribe(s),C=h.length;h.push(s,M),u&&u.push(r,n.index,C,-(C+1))}}}function KT(i,e,t,n){try{return!1!==t(n)}catch(r){return LT(i,r),!1}}function ZT(i,e,t,n,r){return function s(o){if(o===Function)return n;Rb(2&i.flags?xr(i.index,e):e);let l=KT(e,0,n,o),c=s.__ngNextListenerFn__;for(;c;)l=KT(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function yh(i=1){return function YV(i){return(st.lFrame.contextLView=function KV(i,e){for(;i>0;)e=e[15],i--;return e}(i,st.lFrame.contextLView))[8]}(i)}function sG(i,e){let t=null;const n=function Iz(i){const e=i.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(i);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===n?$D(i,s,!0):Lz(n,s))return r}else t=r}return t}function js(i){const e=ue()[16][6];if(!e.projection){const n=e.projection=th(i?i.length:1,null),r=n.slice();let s=e.child;for(;null!==s;){const o=i?sG(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function cr(i,e=0,t){const n=ue(),r=Ft(),s=Qc(r,22+i,16,null,t||null);null===s.projection&&(s.projection=e),lv(),64!=(64&s.flags)&&function Mz(i,e,t){HD(e[11],0,e,t,RD(i,t,e),FD(t.parent||e[6],t,e))}(r,n,s)}function aA(i,e,t,n,r){const s=i[t+1],o=null===e;let a=n?Ss(s):xo(s),l=!1;for(;0!==a&&(!1===l||o);){const u=i[a+1];lG(i[a],e)&&(l=!0,i[a+1]=n?mb(u):fb(u)),a=n?Ss(u):xo(u)}l&&(i[t+1]=n?fb(s):mb(s))}function lG(i,e){return null===i||null==e||(Array.isArray(i)?i[1]:i)===e||!(!Array.isArray(i)||"string"!=typeof e)&&zc(i,e)>=0}function gi(i,e){return function Cs(i,e,t,n){const r=ue(),s=Ft(),o=function go(i){const e=st.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,t}(2);s.firstUpdatePass&&function gA(i,e,t,n){const r=i.data;if(null===r[t+1]){const s=r[qi()],o=function mA(i,e){return e>=i.expandoStartIndex}(i,t);(function bA(i,e){return 0!=(i.flags&(e?16:32))})(s,n)&&null===e&&!o&&(e=!1),e=function _G(i,e,t,n){const r=uv(i);let s=n?e.residualClasses:e.residualStyles;if(null===r)0===(n?e.classBindings:e.styleBindings)&&(t=vh(t=zb(null,i,e,t,n),e.attrs,n),s=null);else{const o=e.directiveStylingLast;if(-1===o||i[o]!==r)if(t=zb(r,i,e,t,n),null===s){let l=function yG(i,e,t){const n=t?e.classBindings:e.styleBindings;if(0!==xo(n))return i[Ss(n)]}(i,e,n);void 0!==l&&Array.isArray(l)&&(l=zb(null,i,e,l[1],n),l=vh(l,e.attrs,n),function vG(i,e,t,n){i[Ss(t?e.classBindings:e.styleBindings)]=n}(i,e,n,l))}else s=function bG(i,e,t){let n;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)n=vh(n,i[s].hostAttrs,t);return vh(n,e.attrs,t)}(i,e,n)}return void 0!==s&&(n?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,n),function oG(i,e,t,n,r,s){let o=s?e.classBindings:e.styleBindings,a=Ss(o),l=xo(o);i[n]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||zc(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=Ss(i[a+1]);i[n+1]=sm(h,a),0!==h&&(i[h+1]=pb(i[h+1],n)),i[a+1]=function t4(i,e){return 131071&i|e<<17}(i[a+1],n)}else i[n+1]=sm(a,0),0!==a&&(i[a+1]=pb(i[a+1],n)),a=n;else i[n+1]=sm(l,0),0===a?a=n:i[l+1]=pb(i[l+1],n),l=n;c&&(i[n+1]=fb(i[n+1])),aA(i,u,n,!0),aA(i,u,n,!1),function aG(i,e,t,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof e&&zc(s,e)>=0&&(t[n+1]=mb(t[n+1]))}(e,u,i,n,s),o=sm(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,n)}}(s,i,o,n),e!==lt&&Pi(r,o,e)&&function yA(i,e,t,n,r,s,o,a){if(!(3&e.type))return;const l=i.data,c=l[a+1];_m(function lT(i){return 1==(1&i)}(c)?vA(l,e,t,r,xo(c),o):void 0)||(_m(s)||function aT(i){return 2==(2&i)}(c)&&(s=vA(l,null,t,r,a,o)),function Cz(i,e,t,n,r){if(e)r?i.addClass(t,n):i.removeClass(t,n);else{let s=-1===n.indexOf("-")?void 0:lr.DashCase;null==r?i.removeStyle(t,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=lr.Important),i.setStyle(t,n,r,s))}}(n,o,Lp(qi(),t),r,s))}(s,s.data[qi()],r,r[11],i,r[o+1]=function MG(i,e){return null==i||("string"==typeof e?i+=e:"object"==typeof i&&(i=sn(Sr(i)))),i}(e,t),n,o)}(i,e,null,!0),gi}function zb(i,e,t,n,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],n=vh(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(t.directiveStylingLast=a),n}function vh(i,e,t){const n=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Mr(i,o,!!t||e[++s]))}return void 0===i?null:i}function vA(i,e,t,n,r,s){const o=null===e;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===lt&&(h=d?Wt:void 0);let f=d?wv(h,n):u===n?h:void 0;if(c&&!_m(f)&&(f=wv(l,n)),_m(f)&&(a=f,o))return a;const m=i[r+1];r=o?Ss(m):xo(m)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=wv(l,n))}return a}function _m(i){return void 0!==i}function an(i,e=""){const t=ue(),n=Ft(),r=i+22,s=n.firstCreatePass?Qc(n,r,1,e,null):n.data[r],o=t[r]=function eb(i,e){return i.createText(e)}(t[11],e);nm(n,t,o,s),Vs(s,!1)}function bh(i){return xh("",i,""),bh}function xh(i,e,t){const n=ue(),r=function tu(i,e,t,n){return Pi(i,Oc(),t)?e+at(t)+n:lt}(n,i,e,t);return r!==lt&&function wo(i,e,t){const n=Lp(e,i);!function TD(i,e,t){i.setValue(e,t)}(i[11],n,t)}(n,qi(),r),xh}function ym(i,e,t){const n=ue();return Pi(n,Oc(),e)&&Cr(Ft(),Pn(),n,i,e,n[11],t,!0),ym}function vm(i,e,t){const n=ue();if(Pi(n,Oc(),e)){const s=Ft(),o=Pn();Cr(s,o,n,i,e,PT(uv(s.data),o,n),t,!0)}return vm}const ml=void 0;var GG=["en",[["a","p"],["AM","PM"],ml],[["AM","PM"],ml,ml],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ml,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ml,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ml,"{1} 'at' {0}",ml],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function zG(i){const t=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let uu={};function Ki(i){const e=function WG(i){return i.toLowerCase().replace(/_/g,"-")}(i);let t=VA(e);if(t)return t;const n=e.split("-")[0];if(t=VA(n),t)return t;if("en"===n)return GG;throw new le(701,!1)}function VA(i){return i in uu||(uu[i]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[i]),uu[i]}var Re=(()=>((Re=Re||{})[Re.LocaleId=0]="LocaleId",Re[Re.DayPeriodsFormat=1]="DayPeriodsFormat",Re[Re.DayPeriodsStandalone=2]="DayPeriodsStandalone",Re[Re.DaysFormat=3]="DaysFormat",Re[Re.DaysStandalone=4]="DaysStandalone",Re[Re.MonthsFormat=5]="MonthsFormat",Re[Re.MonthsStandalone=6]="MonthsStandalone",Re[Re.Eras=7]="Eras",Re[Re.FirstDayOfWeek=8]="FirstDayOfWeek",Re[Re.WeekendRange=9]="WeekendRange",Re[Re.DateFormat=10]="DateFormat",Re[Re.TimeFormat=11]="TimeFormat",Re[Re.DateTimeFormat=12]="DateTimeFormat",Re[Re.NumberSymbols=13]="NumberSymbols",Re[Re.NumberFormats=14]="NumberFormats",Re[Re.CurrencyCode=15]="CurrencyCode",Re[Re.CurrencySymbol=16]="CurrencySymbol",Re[Re.CurrencyName=17]="CurrencyName",Re[Re.Currencies=18]="Currencies",Re[Re.Directionality=19]="Directionality",Re[Re.PluralCase=20]="PluralCase",Re[Re.ExtraData=21]="ExtraData",Re))();const du="en-US";let UA=du;function jb(i,e,t,n,r){if(i=nt(i),Array.isArray(i))for(let s=0;s<i.length;s++)jb(i[s],e,t,n,r);else{const s=Ft(),o=ue();let a=ll(i)?i:nt(i.provide),l=uD(i);const c=oi(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(ll(i)||!i.multi){const f=new Yd(l,r,N),m=qb(a,e,r?u:u+h,d);-1===m?(zp(Zd(c,o),s,a),$b(s,i,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[m]=f,o[m]=f)}else{const f=qb(a,e,u+h,d),m=qb(a,e,u,u+h),p=f>=0&&t[f],g=m>=0&&t[m];if(r&&!g||!r&&!p){zp(Zd(c,o),s,a);const _=function z5(i,e,t,n,r){const s=new Yd(i,t,N);return s.multi=[],s.index=e,s.componentProviders=0,h1(s,r,n&&!t),s}(r?H5:U5,t.length,r,n,l);!r&&g&&(t[m].providerFactory=_),$b(s,i,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(_),o.push(_)}else $b(s,i,f>-1?f:m,h1(t[r?m:f],l,!r&&n));!r&&n&&g&&t[m].componentProviders++}}}function $b(i,e,t,n){const r=ll(e),s=function bH(i){return!!i.useClass}(e);if(r||s){const l=(s?nt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[n,l]):c[u+1].push(n,l)}else c.push(t,l)}}}function h1(i,e,t){return t&&i.componentProviders++,i.multi.push(e)-1}function qb(i,e,t,n){for(let r=t;r<n;r++)if(e[r]===i)return r;return-1}function U5(i,e,t,n){return Xb(this.multi,[])}function H5(i,e,t,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Qd(t,t[1],this.providerFactory.index,n);s=a.slice(0,o),Xb(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],Xb(r,s);return s}function Xb(i,e){for(let t=0;t<i.length;t++)e.push((0,i[t])());return e}function qt(i,e=[]){return t=>{t.providersResolver=(n,r)=>function V5(i,e,t){const n=Ft();if(n.firstCreatePass){const r=ws(i);jb(t,n.data,n.blueprint,r,!0),jb(e,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,e)}}class gl{}class f1{}class p1 extends gl{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ob(this);const n=vr(e);this._bootstrapComponents=bo(n.bootstrap),this._r3Injector=JD(e,t,[{provide:gl,useValue:this},{provide:cl,useValue:this.componentFactoryResolver}],sn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Yb extends f1{constructor(e){super(),this.moduleType=e}create(e){return new p1(this.moduleType,e)}}class W5 extends gl{constructor(e,t,n){super(),this.componentFactoryResolver=new Ob(this),this.instance=null;const r=new cD([...e,{provide:gl,useValue:this},{provide:cl,useValue:this.componentFactoryResolver}],t||em(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Sm(i,e,t=null){return new W5(i,e,t).injector}let j5=(()=>{class i{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const n=sD(0,t.type),r=n.length>0?Sm([n],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=xe({token:i,providedIn:"environment",factory:()=>new i(j(ha))}),i})();function m1(i){i.getStandaloneInjector=e=>e.get(j5).getOrCreateStandaloneInjector(i)}function Zb(i,e,t,n){return M1(ue(),$i(),i,e,t,n)}function w1(i,e,t,n,r){return function S1(i,e,t,n,r,s,o){const a=e+t;return function fl(i,e,t,n){const r=Pi(i,e,t);return Pi(i,e+1,n)||r}(i,a,r,s)?Ws(i,a+2,o?n.call(o,r,s):n(r,s)):Dh(i,a+2)}(ue(),$i(),i,e,t,n,r)}function Dh(i,e){const t=i[e];return t===lt?void 0:t}function M1(i,e,t,n,r,s){const o=e+t;return Pi(i,o,r)?Ws(i,o+1,s?n.call(s,r):n(r)):Dh(i,o+1)}function hu(i,e){const t=Ft();let n;const r=i+22;t.firstCreatePass?(n=function lW(i,e){if(e)for(let t=e.length-1;t>=0;t--){const n=e[t];if(i===n.name)return n}}(e,t.pipeRegistry),t.data[r]=n,n.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,n.onDestroy)):n=t.data[r];const s=n.factory||(n.factory=ol(n.type)),o=$r(N);try{const a=Up(!1),l=s();return Up(a),function tG(i,e,t,n){t>=i.data.length&&(i.data[t]=null,i.blueprint[t]=null),e[t]=n}(t,ue(),r,l),l}finally{$r(o)}}function fu(i,e,t){const n=i+22,r=ue(),s=Lc(r,n);return function Th(i,e){return i[1].data[e].pure}(r,n)?M1(r,$i(),e,s.transform,t,s):s.transform(t)}function Qb(i){return e=>{setTimeout(i,void 0,e)}}const Rt=class fW extends qe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r=e,s=t||(()=>null),o=n;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Qb(s),r&&(r=Qb(r)),o&&(o=Qb(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof J&&e.add(a),a}};function pW(){return this._results[hl()]()}class Ah{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=hl(),n=Ah.prototype;n[t]||(n[t]=pW)}get changes(){return this._changes||(this._changes=new Rt)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=wr(e);(this._changesDetected=!function _U(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=e[n];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ds=(()=>{class i{}return i.__NG_ELEMENT_ID__=_W,i})();const mW=Ds,gW=class extends mW{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e,t){const n=this._declarationTContainer.tViews,r=lm(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),Sb(n,r,e),new fh(r)}};function _W(){return Cm(oi(),ue())}function Cm(i,e){return 4&i.type?new gW(e,i,Xc(i,e)):null}let Zr=(()=>{class i{}return i.__NG_ELEMENT_ID__=yW,i})();function yW(){return I1(oi(),ue())}const vW=Zr,T1=class extends vW{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Xc(this._hostTNode,this._hostLView)}get injector(){return new Nc(this._hostTNode,this._hostLView)}get parentInjector(){const e=Hp(this._hostTNode,this._hostLView);if(bE(e)){const t=kc(e,this._hostLView),n=Fc(e);return new Nc(t[1].data[n+8],t)}return new Nc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=A1(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,n,r,s){const o=e&&!function eh(i){return"function"==typeof i}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,n=d.injector,r=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const l=o?e:new ph(Jt(e)),c=n||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(ha,null);h&&(s=h)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const n=e._lView,r=n[1];if(function BV(i){return xs(i[3])}(n)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=n[3],h=new T1(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function _z(i,e,t,n){const r=10+n,s=t.length;n>0&&(t[r-1][4]=e),n<s-10?(e[4]=t[r],RE(t,10+n,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function yz(i,e){const t=i[9];e[16]!==e[3][3][16]&&(i[2]=!0),null===t?i[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(i),e[2]|=64}(r,n,o,s);const a=sb(s,o),l=n[11],c=tm(l,o[7]);return null!==c&&function pz(i,e,t,n,r,s){n[0]=r,n[6]=e,hh(i,n,t,1,r,s)}(r,o[6],l,n,c,a),e.attachToViewContainerRef(),RE(Jb(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=A1(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=nb(this._lContainer,t);n&&(Wp(Jb(this._lContainer),t),ID(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=nb(this._lContainer,t);return n&&null!=Wp(Jb(this._lContainer),t)?new fh(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function A1(i){return i[8]}function Jb(i){return i[8]||(i[8]=[])}function I1(i,e){let t;const n=e[i.index];if(xs(n))t=n;else{let r;if(8&i.type)r=Kn(n);else{const s=e[11];r=s.createComment("");const o=Yr(i,e);dl(s,tm(s,o),r,function wz(i,e){return i.nextSibling(e)}(s,o),!1)}e[i.index]=t=AT(n,e,r,i),um(e,t)}return new T1(t,i,e)}class e0{constructor(e){this.queryList=e,this.matches=null}clone(){return new e0(this.queryList)}setDirty(){this.queryList.setDirty()}}class t0{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<n;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new t0(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==F1(e,t).matches&&this.queries[t].setDirty()}}class R1{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class n0{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,s=this.getByIndex(n).embeddedTView(e,r);s&&(s.indexInDeclarationView=n,null!==t?t.push(s):t=[s])}return null!==t?new n0(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class r0{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new r0(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(e,t,wW(t,s)),this.matchTNodeWithReadOption(e,t,Gp(t,e,s,!1,!1))}else n===Ds?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Gp(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===$t||r===Zr||r===Ds&&4&t.type)this.addMatch(t.index,-2);else{const s=Gp(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function wW(i,e){const t=i.localNames;if(null!==t)for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1];return null}function SW(i,e,t,n){return-1===t?function MW(i,e){return 11&i.type?Xc(i,e):4&i.type?Cm(i,e):null}(e,i):-2===t?function CW(i,e,t){return t===$t?Xc(e,i):t===Ds?Cm(e,i):t===Zr?I1(e,i):void 0}(i,e,n):Qd(i,i[1],t,e)}function P1(i,e,t,n){const r=e[19].queries[n];if(null===r.matches){const s=i.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:SW(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function s0(i,e,t,n){const r=i.queries.getByIndex(t),s=r.matches;if(null!==s){const o=P1(i,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&s0(h[1],h,c,n)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];s0(f[1],f,c,n)}}}}}return n}function Sn(i){const e=ue(),t=Ft(),n=uE();dv(n+1);const r=F1(t,n);if(i.dirty&&function NV(i){return 4==(4&i[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?s0(t,e,n,[]):P1(t,e,r,n);i.reset(s,PH),i.notifyOnChanges()}return!0}return!1}function Mo(i,e,t){const n=Ft();n.firstCreatePass&&(O1(n,new R1(i,e,t),-1),2==(2&e)&&(n.staticViewQueries=!0)),L1(n,ue(),e)}function Zi(i,e,t,n){const r=Ft();if(r.firstCreatePass){const s=oi();O1(r,new R1(e,t,n),s.index),function DW(i,e){const t=i.contentQueries||(i.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(i.queries.length-1,e)}(r,i),2==(2&t)&&(r.staticContentQueries=!0)}L1(r,ue(),t)}function Cn(){return function EW(i,e){return i[19].queries[e].queryList}(ue(),uE())}function L1(i,e,t){const n=new Ah(4==(4&t));bT(i,e,n,n.destroy),null===e[19]&&(e[19]=new t0),e[19].queries.push(new e0(n))}function O1(i,e,t){null===i.queries&&(i.queries=new n0),i.queries.track(new r0(e,t))}function F1(i,e){return i.queries.getByIndex(e)}function Dm(...i){}const Tm=new pe("Application Initializer");let Am=(()=>{class i{constructor(t){this.appInits=t,this.resolve=Dm,this.reject=Dm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(_h(s))t.push(s);else if(Ub(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{n()}).catch(r=>{this.reject(r)}),0===t.length&&n(),this.initialized=!0}}return i.\u0275fac=function(t){return new(t||i)(j(Tm,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Rh=new pe("AppId",{providedIn:"root",factory:function eI(){return`${u0()}${u0()}${u0()}`}});function u0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tI=new pe("Platform Initializer"),d0=new pe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),nI=new pe("appBootstrapListener"),ma=new pe("AnimationModuleType");let XW=(()=>{class i{log(t){console.log(t)}warn(t){console.warn(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Xs=new pe("LocaleId",{providedIn:"root",factory:()=>gn(Xs,Ke.Optional|Ke.SkipSelf)||function YW(){return typeof $localize<"u"&&$localize.locale||du}()});class ZW{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let h0=(()=>{class i{compileModuleSync(t){return new Yb(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const n=this.compileModuleSync(t),s=bo(vr(t).declarations).reduce((o,a)=>{const l=Jt(a);return l&&o.push(new ph(l)),o},[]);return new ZW(n,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const e8=(()=>Promise.resolve(0))();function f0(i){typeof Zone>"u"?e8.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Et{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rt(!1),this.onMicrotaskEmpty=new Rt(!1),this.onStable=new Rt(!1),this.onError=new Rt(!1),typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function t8(){let i=on.requestAnimationFrame,e=on.cancelAnimationFrame;if(typeof Zone<"u"&&i&&e){const t=i[Zone.__symbol__("OriginalDelegate")];t&&(i=t);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function r8(i){const e=()=>{!function i8(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(on,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,m0(i),i.isCheckStableRunning=!0,p0(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),m0(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,s,o,a)=>{try{return sI(i),t.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&e(),oI(i)}},onInvoke:(t,n,r,s,o,a,l)=>{try{return sI(i),t.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&e(),oI(i)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,m0(i),p0(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Et.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(Et.isInAngularZone())throw new le(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,n8,Dm,Dm);try{return s.runTask(o,t,n)}finally{s.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const n8={};function p0(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function m0(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function sI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function oI(i){i._nesting--,p0(i)}class s8{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Rt,this.onMicrotaskEmpty=new Rt,this.onStable=new Rt,this.onError=new Rt}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}const aI=new pe(""),Im=new pe("");let y0,g0=(()=>{class i{constructor(t,n,r){this._ngZone=t,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,y0||(function o8(i){y0=i}(r),r.addToWindow(n)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Et.assertNotInAngularZone(),f0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())f0(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(t)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,n,r){return[]}}return i.\u0275fac=function(t){return new(t||i)(j(Et),j(_0),j(Im))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})(),_0=(()=>{class i{constructor(){this._applications=new Map}registerApplication(t,n){this._applications.set(t,n)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,n=!0){return y0?.findTestabilityInTree(this,t,n)??null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),ga=null;const lI=new pe("AllowMultipleToken"),v0=new pe("PlatformDestroyListeners");class cI{constructor(e,t){this.name=e,this.token=t}}function dI(i,e,t=[]){const n=`Platform: ${e}`,r=new pe(n);return(s=[])=>{let o=b0();if(!o||o.injector.get(lI,!1)){const a=[...t,...s,{provide:r,useValue:!0}];i?i(a):function c8(i){if(ga&&!ga.get(lI,!1))throw new le(400,!1);ga=i;const e=i.get(fI);(function uI(i){const e=i.get(tI,null);e&&e.forEach(t=>t())})(i)}(function hI(i=[],e){return Mn.create({name:e,providers:[{provide:Nv,useValue:"platform"},{provide:v0,useValue:new Set([()=>ga=null])},...i]})}(a,n))}return function d8(i){const e=b0();if(!e)throw new le(401,!1);return e}()}}function b0(){return ga?.get(fI)??null}let fI=(()=>{class i{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,n){const r=function mI(i,e){let t;return t="noop"===i?new s8:("zone.js"===i?void 0:i)||new Et(e),t}(n?.ngZone,function pI(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:Et,useValue:r}];return r.run(()=>{const o=Mn.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(vo,null);if(!l)throw new le(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Rm(this._modules,a),c.unsubscribe()})}),function gI(i,e,t){try{const n=t();return _h(n)?n.catch(r=>{throw e.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw e.runOutsideAngular(()=>i.handleError(n)),n}}(l,r,()=>{const c=a.injector.get(Am);return c.runInitializers(),c.donePromise.then(()=>(function HA(i){yr(i,"Expected localeId to be defined"),"string"==typeof i&&(UA=i.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Xs,du)||du),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,n=[]){const r=_I({},n);return function a8(i,e,t){const n=new Yb(t);return Promise.resolve(n)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const n=t.injector.get(gu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new le(403,!1);t.instance.ngDoBootstrap(n)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new le(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const t=this._injector.get(v0,null);t&&(t.forEach(n=>n()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(t){return new(t||i)(j(Mn))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function _I(i,e){return Array.isArray(e)?e.reduce(_I,i):{...i,...e}}let gu=(()=>{class i{constructor(t,n,r){this._zone=t,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new dn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new dn(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Et.assertNotInAngularZone(),f0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Et.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=tl(s,o.pipe(HC()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,n){const r=t instanceof dD;if(!this._injector.get(Am).done)throw!r&&function Ac(i){const e=Jt(i)||Gi(i)||Wi(i);return null!==e&&e.standalone}(t),new le(405,false);let o;o=r?t:this._injector.get(cl).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function l8(i){return i.isBoundToModule}(o)?void 0:this._injector.get(gl),c=o.create(Mn.NULL,[],n||o.selector,a),u=c.location.nativeElement,d=c.injector.get(aI,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Rm(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new le(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){const n=t;Rm(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(nI,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Rm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new le(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(t){return new(t||i)(j(Et),j(ha),j(vo))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Rm(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}let vI=!0,Er=(()=>{class i{}return i.__NG_ELEMENT_ID__=p8,i})();function p8(i){return function m8(i,e,t){if(Rp(i)&&!t){const n=xr(i.index,e);return new fh(n,n)}return 47&i.type?new fh(e[16],e):null}(oi(),ue(),16==(16&i))}class SI{constructor(){}supports(e){return mh(e)}create(e){return new x8(e)}}const b8=(i,e)=>e;class x8{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||b8}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const o=!n||t&&t.currentIndex<EI(n,r,s)?t:n,a=EI(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,m=f+h;u<=m&&m<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!mh(e))throw new le(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,n=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),n=!0),t=t._next}else r=0,function Z4(i,e){if(Array.isArray(i))for(let t=0;t<i.length;t++)e(i[t]);else{const t=i[hl()]();let n;for(;!(n=t.next()).done;)e(n.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),n=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new w8(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new CI),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new CI),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class w8{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class M8{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class CI{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new M8,this.map.set(t,n)),n.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function EI(i,e,t){const n=i.previousIndex;if(null===n)return n;let r=0;return t&&n<t.length&&(r=t[n]),n+e+r}class DI{constructor(){}supports(e){return e instanceof Map||kb(e)}create(){return new S8}}class S8{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||kb(e)))throw new le(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(n,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,n),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,n);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let n=t;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new C8(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class C8{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function TI(){return new Om([new SI])}let Om=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(null!=n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||TI()),deps:[[i,new Wc,new da]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(null!=n)return n;throw new le(901,!1)}}return i.\u0275prov=xe({token:i,providedIn:"root",factory:TI}),i})();function AI(){return new Ph([new DI])}let Ph=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||AI()),deps:[[i,new Wc,new da]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(n)return n;throw new le(901,!1)}}return i.\u0275prov=xe({token:i,providedIn:"root",factory:AI}),i})();const T8=dI(null,"core",[]);let A8=(()=>{class i{constructor(t){}}return i.\u0275fac=function(t){return new(t||i)(j(gu))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({}),i})(),Fm=null;function Ys(){return Fm}const gt=new pe("DocumentToken");let C0=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:function(){return function L8(){return j(II)}()},providedIn:"platform"}),i})();const O8=new pe("Location Initialized");let II=(()=>{class i extends C0{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ys().getBaseHref(this._doc)}onPopState(t){const n=Ys().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){const n=Ys().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,n,r){RI()?this._history.pushState(t,n,r):this.location.hash=r}replaceState(t,n,r){RI()?this._history.replaceState(t,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return i.\u0275fac=function(t){return new(t||i)(j(gt))},i.\u0275prov=xe({token:i,factory:function(){return function F8(){return new II(j(gt))}()},providedIn:"platform"}),i})();function RI(){return!!window.history.pushState}function E0(i,e){if(0==i.length)return e;if(0==e.length)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?i+e.substring(1):1==t?i+e:i+"/"+e}function PI(i){const e=i.match(/#|\?|$/),t=e&&e.index||i.length;return i.slice(0,t-("/"===i[t-1]?1:0))+i.slice(t)}function Eo(i){return i&&"?"!==i[0]?"?"+i:i}let yl=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:function(){return gn(OI)},providedIn:"root"}),i})();const LI=new pe("appBaseHref");let OI=(()=>{class i extends yl{constructor(t,n){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??gn(gt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return E0(this._baseHref,t)}path(t=!1){const n=this._platformLocation.pathname+Eo(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${n}${r}`:n}pushState(t,n,r,s){const o=this.prepareExternalUrl(r+Eo(s));this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){const o=this.prepareExternalUrl(r+Eo(s));this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(j(C0),j(LI,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),k8=(()=>{class i extends yl{constructor(t,n){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(t){const n=E0(this._baseHref,t);return n.length>0?"#"+n:n}pushState(t,n,r,s){let o=this.prepareExternalUrl(r+Eo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){let o=this.prepareExternalUrl(r+Eo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(j(C0),j(LI,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})(),km=(()=>{class i{constructor(t){this._subject=new Rt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const n=this._locationStrategy.getBaseHref();this._baseHref=PI(FI(n)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+Eo(n))}normalize(t){return i.stripTrailingSlash(function B8(i,e){return i&&e.startsWith(i)?e.substring(i.length):e}(this._baseHref,FI(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,n="",r=null){this._locationStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Eo(n)),r)}replaceState(t,n="",r=null){this._locationStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Eo(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(r=>r(t,n))}subscribe(t,n,r){return this._subject.subscribe({next:t,error:n,complete:r})}}return i.normalizeQueryParams=Eo,i.joinWithSlash=E0,i.stripTrailingSlash=PI,i.\u0275fac=function(t){return new(t||i)(j(yl))},i.\u0275prov=xe({token:i,factory:function(){return function N8(){return new km(j(yl))}()},providedIn:"root"}),i})();function FI(i){return i.replace(/\/index.html$/,"")}var ur=(()=>((ur=ur||{})[ur.Decimal=0]="Decimal",ur[ur.Percent=1]="Percent",ur[ur.Currency=2]="Currency",ur[ur.Scientific=3]="Scientific",ur))(),Ze=(()=>((Ze=Ze||{})[Ze.Decimal=0]="Decimal",Ze[Ze.Group=1]="Group",Ze[Ze.List=2]="List",Ze[Ze.PercentSign=3]="PercentSign",Ze[Ze.PlusSign=4]="PlusSign",Ze[Ze.MinusSign=5]="MinusSign",Ze[Ze.Exponential=6]="Exponential",Ze[Ze.SuperscriptingExponent=7]="SuperscriptingExponent",Ze[Ze.PerMille=8]="PerMille",Ze[Ze.Infinity=9]="Infinity",Ze[Ze.NaN=10]="NaN",Ze[Ze.TimeSeparator=11]="TimeSeparator",Ze[Ze.CurrencyDecimal=12]="CurrencyDecimal",Ze[Ze.CurrencyGroup=13]="CurrencyGroup",Ze))();function Qr(i,e){const t=Ki(i),n=t[Re.NumberSymbols][e];if(typeof n>"u"){if(e===Ze.CurrencyDecimal)return t[Re.NumberSymbols][Ze.Decimal];if(e===Ze.CurrencyGroup)return t[Re.NumberSymbols][Ze.Group]}return n}const uj=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function O0(i){const e=parseInt(i);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+i);return e}let WI=(()=>{class i{constructor(t,n,r,s){this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(mh(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${sn(n.item)}`);this._toggleClass(n.item,!0)}),t.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!0)):Object.keys(t).forEach(n=>this._toggleClass(n,!!t[n])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!1)):Object.keys(t).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(t,n){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(t){return new(t||i)(N(Om),N(Ph),N($t),N(zs))},i.\u0275dir=Ne({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})(),$m=(()=>{class i{constructor(t,n){this._viewContainer=t,this._context=new Ej,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){XI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){XI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(N(Zr),N(Ds))},i.\u0275dir=Ne({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class Ej{constructor(){this.$implicit=null,this.ngIf=null}}function XI(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${sn(e)}'.`)}let KI=(()=>{class i{constructor(t,n,r){this._ngEl=t,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,n){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:lr.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(n=>this._setStyle(n.key,null)),t.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),t.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(t){return new(t||i)(N($t),N(Ph),N(zs))},i.\u0275dir=Ne({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})();function Is(i,e){return new le(2100,!1)}class Rj{createSubscription(e,t){return e.subscribe({next:t,error:n=>{throw n}})}dispose(e){e.unsubscribe()}}class Pj{createSubscription(e,t){return e.then(t,n=>{throw n})}dispose(e){}}const Lj=new Pj,Oj=new Rj;let ZI=(()=>{class i{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,n=>this._updateLatestValue(t,n))}_selectStrategy(t){if(_h(t))return Lj;if(XT(t))return Oj;throw Is()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,n){t===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return i.\u0275fac=function(t){return new(t||i)(N(Er,16))},i.\u0275pipe=or({name:"async",type:i,pure:!1,standalone:!0}),i})(),JI=(()=>{class i{constructor(t){this._locale=t}transform(t,n,r){if(!function B0(i){return!(null==i||""===i||i!=i)}(t))return null;r=r||this._locale;try{return function gj(i,e,t){return function P0(i,e,t,n,r,s,o=!1){let a="",l=!1;if(isFinite(i)){let c=function yj(i){let n,r,s,o,a,e=Math.abs(i)+"",t=0;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))n=[0],r=1;else{for(a--;"0"===e.charAt(a);)a--;for(r-=s,n=[],o=0;s<=a;s++,o++)n[o]=Number(e.charAt(s))}return r>22&&(n=n.splice(0,21),t=r-1,r=1),{digits:n,exponent:t,integerLen:r}}(i);o&&(c=function _j(i){if(0===i.digits[0])return i;const e=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(0===e?i.digits.push(0,0):1===e&&i.digits.push(0),i.integerLen+=2),i}(c));let u=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){const y=s.match(uj);if(null===y)throw new Error(`${s} is not a valid digit info`);const v=y[1],b=y[3],x=y[5];null!=v&&(u=O0(v)),null!=b&&(d=O0(b)),null!=x?h=O0(x):null!=b&&d>h&&(h=d)}!function vj(i,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let n=i.digits,r=n.length-i.integerLen;const s=Math.min(Math.max(e,r),t);let o=s+i.integerLen,a=n[o];if(o>0){n.splice(Math.max(i.integerLen,o));for(let d=o;d<n.length;d++)n[d]=0}else{r=Math.max(0,r),i.integerLen=1,n.length=Math.max(1,o=s+1),n[0]=0;for(let d=1;d<o;d++)n[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)n.unshift(0),i.integerLen++;n.unshift(1),i.integerLen++}else n[o-1]++;for(;r<Math.max(0,s);r++)n.push(0);let l=0!==s;const c=e+i.integerLen,u=n.reduceRight(function(d,h,f,m){return m[f]=(h+=d)<10?h:h-10,l&&(0===m[f]&&f>=c?m.pop():l=!1),h>=10?1:0},0);u&&(n.unshift(u),i.integerLen++)}(c,d,h);let f=c.digits,m=c.integerLen;const p=c.exponent;let g=[];for(l=f.every(y=>!y);m<u;m++)f.unshift(0);for(;m<0;m++)f.unshift(0);m>0?g=f.splice(m,f.length):(g=f,f=[0]);const _=[];for(f.length>=e.lgSize&&_.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)_.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&_.unshift(f.join("")),a=_.join(Qr(t,n)),g.length&&(a+=Qr(t,r)+g.join("")),p&&(a+=Qr(t,Ze.Exponential)+"+"+p)}else a=Qr(t,Ze.Infinity);return a=i<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(i,function L0(i,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=i.split(";"),r=n[0],s=n[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let u=0;u<l.length;u++){const d=l.charAt(u);"0"===d?t.minFrac=t.maxFrac=u+1:"#"===d?t.maxFrac=u+1:t.posSuf+=d}const c=a.split(",");if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const u=r.length-t.posPre.length-t.posSuf.length,d=s.indexOf("#");t.negPre=s.substring(0,d).replace(/'/g,""),t.negSuf=s.slice(d+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function D0(i,e){return Ki(i)[Re.NumberFormats][e]}(e,ur.Decimal),Qr(e,Ze.MinusSign)),e,Ze.Group,Ze.Decimal,t)}(function V0(i){if("string"==typeof i&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if("number"!=typeof i)throw new Error(`${i} is not a number`);return i}(t),r,n)}catch(s){throw Is()}}}return i.\u0275fac=function(t){return new(t||i)(N(Xs,16))},i.\u0275pipe=or({name:"number",type:i,pure:!0,standalone:!0}),i})();let U0=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({}),i})();const eR="browser";let e6=(()=>{class i{}return i.\u0275prov=xe({token:i,providedIn:"root",factory:()=>new t6(j(gt),window)}),i})();class t6{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function n6(i,e){const t=i.getElementById(e)||i.getElementsByName(e)[0];if(t)return t;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=tR(this.window.history)||tR(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function tR(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class G0 extends class x6 extends class P8{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function R8(i){Fm||(Fm=i)}(new G0)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function w6(){return kh=kh||document.querySelector("base"),kh?kh.getAttribute("href"):null}();return null==t?null:function M6(i){Xm=Xm||document.createElement("a"),Xm.setAttribute("href",i);const e=Xm.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){kh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function xj(i,e){e=encodeURIComponent(e);for(const t of i.split(";")){const n=t.indexOf("="),[r,s]=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Xm,kh=null;const sR=new pe("TRANSITION_ID"),C6=[{provide:Tm,useFactory:function S6(i,e,t){return()=>{t.get(Am).donePromise.then(()=>{const n=Ys(),r=e.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[sR,gt,Mn],multi:!0}];let D6=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();const Ym=new pe("EventManagerPlugins");let Km=(()=>{class i{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,n,r){return this._findPluginFor(n).addEventListener(t,n,r)}addGlobalEventListener(t,n,r){return this._findPluginFor(n).addGlobalEventListener(t,n,r)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)(j(Ym),j(Et))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();class oR{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=Ys().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let aR=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(t){const n=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})(),Nh=(()=>{class i extends aR{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,n,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(t){const n=[];this._addStylesToHost(this._stylesSet,t,n),this._hostNodes.set(t,n)}removeHost(t){const n=this._hostNodes.get(t);n&&n.forEach(lR),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(t,r,n)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(lR))}}return i.\u0275fac=function(t){return new(t||i)(j(gt))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();function lR(i){Ys().remove(i)}const W0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},j0=/%COMP%/g;function Zm(i,e,t){for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?Zm(i,r,t):(r=r.replace(j0,i),t.push(r))}return t}function dR(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let Qm=(()=>{class i{constructor(t,n,r){this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new $0(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;switch(n.encapsulation){case vs.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new L6(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(t),r}case 1:case vs.ShadowDom:return new O6(this.eventManager,this.sharedStylesHost,t,n);default:if(!this.rendererByCompId.has(n.id)){const r=Zm(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)(j(Km),j(Nh),j(Rh))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();class $0{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(W0[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(fR(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(fR(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const s=W0[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=W0[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(lr.DashCase|lr.Important)?e.style.setProperty(t,n,r&lr.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&lr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,dR(n)):this.eventManager.addEventListener(e,t,dR(n))}}function fR(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class L6 extends $0{constructor(e,t,n,r){super(e),this.component=n;const s=Zm(r+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr=function I6(i){return"_ngcontent-%COMP%".replace(j0,i)}(r+"-"+n.id),this.hostAttr=function R6(i){return"_nghost-%COMP%".replace(j0,i)}(r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class O6 extends $0{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Zm(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let F6=(()=>{class i extends oR{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,r){return t.addEventListener(n,r,!1),()=>this.removeEventListener(t,n,r)}removeEventListener(t,n,r){return t.removeEventListener(n,r)}}return i.\u0275fac=function(t){return new(t||i)(j(gt))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();const pR=["alt","control","meta","shift"],k6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},N6={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let B6=(()=>{class i extends oR{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ys().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),pR.forEach(c=>{const u=n.indexOf(c);u>-1&&(n.splice(u,1),o+=c+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,n){let r=k6[t.key]||t.key,s="";return n.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),pR.forEach(o=>{o!==r&&(0,N6[o])(t)&&(s+=o+".")}),s+=r,s===n)}static eventCallback(t,n,r){return s=>{i.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return i.\u0275fac=function(t){return new(t||i)(j(gt))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();const gR=[{provide:d0,useValue:eR},{provide:tI,useValue:function V6(){G0.makeCurrent()},multi:!0},{provide:gt,useFactory:function H6(){return function zU(i){Dv=i}(document),document},deps:[]}],z6=dI(T8,"browser",gR),_R=new pe(""),yR=[{provide:Im,useClass:class E6{addToWindow(e){on.getAngularTestability=(n,r=!0)=>{const s=e.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},on.getAllAngularTestabilities=()=>e.getAllTestabilities(),on.getAllAngularRootElements=()=>e.getAllRootElements(),on.frameworkStabilizers||(on.frameworkStabilizers=[]),on.frameworkStabilizers.push(n=>{const r=on.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&n(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,n){return null==t?null:e.getTestability(t)??(n?Ys().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:aI,useClass:g0,deps:[Et,_0,Im]},{provide:g0,useClass:g0,deps:[Et,_0,Im]}],vR=[{provide:Nv,useValue:"root"},{provide:vo,useFactory:function U6(){return new vo},deps:[]},{provide:Ym,useClass:F6,multi:!0,deps:[gt,Et,d0]},{provide:Ym,useClass:B6,multi:!0,deps:[gt]},{provide:Qm,useClass:Qm,deps:[Km,Nh,Rh]},{provide:ch,useExisting:Qm},{provide:aR,useExisting:Nh},{provide:Nh,useClass:Nh,deps:[gt]},{provide:Km,useClass:Km,deps:[Ym,Et]},{provide:class i6{},useClass:D6,deps:[]},[]];let bR=(()=>{class i{constructor(t){}static withServerTransition(t){return{ngModule:i,providers:[{provide:Rh,useValue:t.appId},{provide:sR,useExisting:Rh},C6]}}}return i.\u0275fac=function(t){return new(t||i)(j(_R,12))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({providers:[...vR,...yR],imports:[U0,A8]}),i})(),X0=(()=>{class i{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return i.\u0275fac=function(t){return new(t||i)(j(gt))},i.\u0275prov=xe({token:i,factory:function(t){let n=null;return n=t?new t:function W6(){return new X0(j(gt))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let K0=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:function(t){let n=null;return n=t?new(t||i):j(MR),n},providedIn:"root"}),i})(),MR=(()=>{class i extends K0{constructor(t){super(),this._doc=t}sanitize(t,n){if(null==n)return null;switch(t){case jt.NONE:return n;case jt.HTML:return Hs(n,"HTML")?Sr(n):eD(this._doc,String(n)).toString();case jt.STYLE:return Hs(n,"Style")?Sr(n):n;case jt.SCRIPT:if(Hs(n,"Script"))return Sr(n);throw new Error("unsafe value used in a script context");case jt.URL:return Hs(n,"URL")?Sr(n):Zp(String(n));case jt.RESOURCE_URL:if(Hs(n,"ResourceURL"))return Sr(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function ZU(i){return new jU(i)}(t)}bypassSecurityTrustStyle(t){return function QU(i){return new $U(i)}(t)}bypassSecurityTrustScript(t){return function JU(i){return new qU(i)}(t)}bypassSecurityTrustUrl(t){return function eH(i){return new XU(i)}(t)}bypassSecurityTrustResourceUrl(t){return function tH(i){return new YU(i)}(t)}}return i.\u0275fac=function(t){return new(t||i)(j(gt))},i.\u0275prov=xe({token:i,factory:function(t){let n=null;return n=t?new t:function Z6(i){return new MR(i.get(gt))}(j(Mn)),n},providedIn:"root"}),i})();class SR{}const To="*";function Z0(i,e){return{type:7,name:i,definitions:e,options:{}}}function Bh(i,e=null){return{type:4,styles:e,timings:i}}function CR(i,e=null){return{type:3,steps:i,options:e}}function ER(i,e=null){return{type:2,steps:i,options:e}}function Ao(i){return{type:6,styles:i,offset:null}}function Vh(i,e,t){return{type:0,name:i,styles:e,options:t}}function Uh(i,e,t=null){return{type:1,expr:i,animation:e,options:t}}function DR(i=null){return{type:9,options:i}}function TR(i,e,t=null){return{type:11,selector:i,animation:e,options:t}}function AR(i){Promise.resolve().then(i)}class Hh{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){AR(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class IR{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const s=this.players.length;0==s?AR(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){const e=this.players.reduce((t,n)=>null===t||n.totalTime>t.totalTime?n:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}function RR(i){return new le(3e3,!1)}function L$(){return typeof window<"u"&&typeof window.document<"u"}function J0(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ya(i){switch(i.length){case 0:return new Hh;case 1:return i[0];default:return new IR(i)}}function PR(i,e,t,n,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(n.forEach(u=>{const d=u.get("offset"),h=d==l,f=h&&c||new Map;u.forEach((m,p)=>{let g=p,_=m;if("offset"!==p)switch(g=e.normalizePropertyName(g,o),_){case"!":_=r.get(p);break;case To:_=s.get(p);break;default:_=e.normalizeStyleValue(p,g,_,o)}f.set(g,_)}),h||a.push(f),c=f,l=d}),o.length)throw function x$(i){return new le(3502,!1)}();return a}function ex(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&tx(t,"start",i)));break;case"done":i.onDone(()=>n(t&&tx(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&tx(t,"destroy",i)))}}function tx(i,e,t){const s=nx(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,t.totalTime??i.totalTime,!!t.disabled),o=i._data;return null!=o&&(s._data=o),s}function nx(i,e,t,n,r="",s=0,o){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function Dr(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function LR(i){const e=i.indexOf(":");return[i.substring(1,e),i.slice(e+1)]}let ix=(i,e)=>!1,OR=(i,e,t)=>[],FR=null;function rx(i){const e=i.parentNode||i.host;return e===FR?null:e}(J0()||typeof Element<"u")&&(L$()?(FR=(()=>document.documentElement)(),ix=(i,e)=>{for(;e;){if(e===i)return!0;e=rx(e)}return!1}):ix=(i,e)=>i.contains(e),OR=(i,e,t)=>{if(t)return Array.from(i.querySelectorAll(e));const n=i.querySelector(e);return n?[n]:[]});let vl=null,kR=!1;const NR=ix,BR=OR;let VR=(()=>{class i{validateStyleProperty(t){return function F$(i){vl||(vl=function k$(){return typeof document<"u"?document.body:null}()||{},kR=!!vl.style&&"WebkitAppearance"in vl.style);let e=!0;return vl.style&&!function O$(i){return"ebkit"==i.substring(1,6)}(i)&&(e=i in vl.style,!e&&kR&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in vl.style)),e}(t)}matchesElement(t,n){return!1}containsElement(t,n){return NR(t,n)}getParentElement(t){return rx(t)}query(t,n,r){return BR(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,s,o,a=[],l){return new Hh(r,s)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})(),sx=(()=>{class i{}return i.NOOP=new VR,i})();const ox="ng-enter",Jm="ng-leave",eg="ng-trigger",tg=".ng-trigger",HR="ng-animating",ax=".ng-animating";function Io(i){if("number"==typeof i)return i;const e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:lx(parseFloat(e[1]),e[2])}function lx(i,e){return"s"===e?1e3*i:i}function ng(i,e,t){return i.hasOwnProperty("duration")?i:function V$(i,e,t){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(RR()),{duration:0,delay:0,easing:""};r=lx(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=lx(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!t){let a=!1,l=e.length;r<0&&(e.push(function J6(){return new le(3100,!1)}()),a=!0),s<0&&(e.push(function e$(){return new le(3101,!1)}()),a=!0),a&&e.splice(l,0,RR())}return{duration:r,delay:s,easing:o}}(i,e,t)}function zh(i,e={}){return Object.keys(i).forEach(t=>{e[t]=i[t]}),e}function zR(i){const e=new Map;return Object.keys(i).forEach(t=>{e.set(t,i[t])}),e}function va(i,e=new Map,t){if(t)for(let[n,r]of t)e.set(n,r);for(let[n,r]of i)e.set(n,r);return e}function WR(i,e,t){return t?e+":"+t+";":""}function jR(i){let e="";for(let t=0;t<i.style.length;t++){const n=i.style.item(t);e+=WR(0,n,i.style.getPropertyValue(n))}for(const t in i.style)i.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=WR(0,G$(t),i.style[t]));i.setAttribute("style",e)}function Ks(i,e,t){i.style&&(e.forEach((n,r)=>{const s=ux(r);t&&!t.has(r)&&t.set(r,i.style[s]),i.style[s]=n}),J0()&&jR(i))}function bl(i,e){i.style&&(e.forEach((t,n)=>{const r=ux(n);i.style[r]=""}),J0()&&jR(i))}function Gh(i){return Array.isArray(i)?1==i.length?i[0]:ER(i):i}const cx=new RegExp("{{\\s*(.+?)\\s*}}","g");function $R(i){let e=[];if("string"==typeof i){let t;for(;t=cx.exec(i);)e.push(t[1]);cx.lastIndex=0}return e}function Wh(i,e,t){const n=i.toString(),r=n.replace(cx,(s,o)=>{let a=e[o];return null==a&&(t.push(function n$(i){return new le(3003,!1)}()),a=""),a.toString()});return r==n?i:r}function ig(i){const e=[];let t=i.next();for(;!t.done;)e.push(t.value),t=i.next();return e}const z$=/-+([a-z0-9])/g;function ux(i){return i.replace(z$,(...e)=>e[1].toUpperCase())}function G$(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Tr(i,e,t){switch(e.type){case 7:return i.visitTrigger(e,t);case 0:return i.visitState(e,t);case 1:return i.visitTransition(e,t);case 2:return i.visitSequence(e,t);case 3:return i.visitGroup(e,t);case 4:return i.visitAnimate(e,t);case 5:return i.visitKeyframes(e,t);case 6:return i.visitStyle(e,t);case 8:return i.visitReference(e,t);case 9:return i.visitAnimateChild(e,t);case 10:return i.visitAnimateRef(e,t);case 11:return i.visitQuery(e,t);case 12:return i.visitStagger(e,t);default:throw function i$(i){return new le(3004,!1)}()}}function qR(i,e){return window.getComputedStyle(i)[e]}function Y$(i,e){const t=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function K$(i,e,t){if(":"==i[0]){const l=function Z$(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(function _$(i){return new le(3016,!1)}()),"* => *"}}(i,t);if("function"==typeof l)return void e.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return t.push(function g$(i){return new le(3015,!1)}()),e;const r=n[1],s=n[2],o=n[3];e.push(XR(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(XR(o,r))}(n,t,e)):t.push(i),t}const ag=new Set(["true","1"]),lg=new Set(["false","0"]);function XR(i,e){const t=ag.has(i)||lg.has(i),n=ag.has(e)||lg.has(e);return(r,s)=>{let o="*"==i||i==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?ag.has(i):lg.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?ag.has(e):lg.has(e)),o&&a}}const Q$=new RegExp("s*:selfs*,?","g");function dx(i,e,t,n){return new J$(i).build(e,t,n)}class J${constructor(e){this._driver=e}build(e,t,n){const r=new nq(t);return this._resetContextStyleTimingState(r),Tr(this,Gh(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function s$(){return new le(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);n+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function o$(){return new le(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{$R(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(ig(s.values()),t.errors.push(function a$(i,e){return new le(3008,!1)}()))}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=Tr(this,Gh(e.animation),t);return{type:1,matchers:Y$(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:xl(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(n=>Tr(this,n,t)),options:xl(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=n;const a=Tr(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:xl(e.options)}}visitAnimate(e,t){const n=function rq(i,e){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return hx(ng(i,e).duration,0,"");const t=i;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=hx(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=ng(t,e);return hx(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let r,s=e.styles?e.styles:Ao({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=Ao(c)}t.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===To?n.push(a):t.errors.push(new le(3002,!1)):n.push(zR(a));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function c$(i,e,t,n,r){return new le(3010,!1)}()),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:r}),t.options&&function H$(i,e,t){const n=e.params||{},r=$R(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||t.push(function t$(i){return new le(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function u$(){return new le(3011,!1)}()),n;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(_=>{const y=this._makeStyleAst(_,t);let v=null!=y.offset?y.offset:function iq(i){if("string"==typeof i)return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(y.styles),b=0;return null!=v&&(s++,b=y.offset=v),l=l||b<0||b>1,a=a||b<c,c=b,o.push(b),y});l&&t.errors.push(function d$(){return new le(3012,!1)}()),a&&t.errors.push(function h$(){return new le(3200,!1)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function f$(){return new le(3202,!1)}()):0==s&&(h=1/(d-1));const f=d-1,m=t.currentTime,p=t.currentAnimateTimings,g=p.duration;return u.forEach((_,y)=>{const v=h>0?y==f?1:h*y:o[y],b=v*g;t.currentTime=m+p.delay+b,p.duration=b,this._validateStyleAst(_,t),_.offset=v,n.styles.push(_)}),n}visitReference(e,t){return{type:8,animation:Tr(this,Gh(e.animation),t),options:xl(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:xl(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:xl(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function eq(i){const e=!!i.split(/\s*,\s*/).find(t=>":self"==t);return e&&(i=i.replace(Q$,"")),i=i.replace(/@\*/g,tg).replace(/@\w+/g,t=>tg+"-"+t.slice(1)).replace(/:animating/g,ax),[i,e]}(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,Dr(t.collectedStyles,t.currentQuerySelector,new Map);const a=Tr(this,Gh(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:xl(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function p$(){return new le(3013,!1)}());const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:ng(e.timings,t.errors,!0);return{type:12,animation:Tr(this,Gh(e.animation),t),timings:n,options:null}}}class nq{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function xl(i){return i?(i=zh(i)).params&&(i.params=function tq(i){return i?zh(i):null}(i.params)):i={},i}function hx(i,e,t){return{duration:i,delay:e,easing:t}}function fx(i,e,t,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class cg{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const aq=new RegExp(":enter","g"),cq=new RegExp(":leave","g");function px(i,e,t,n,r,s=new Map,o=new Map,a,l,c=[]){return(new uq).buildKeyframes(i,e,t,n,r,s,o,a,l,c)}class uq{buildKeyframes(e,t,n,r,s,o,a,l,c,u=[]){c=c||new cg;const d=new mx(e,t,c,r,s,u,[]);d.options=l;const h=l.delay?Io(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),Tr(this,n,d);const f=d.timelines.filter(m=>m.containsAnimation());if(f.length&&a.size){let m;for(let p=f.length-1;p>=0;p--){const g=f[p];if(g.element===t){m=g;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,d.errors,l)}return f.length?f.map(m=>m.buildKeyframes()):[fx(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.get(t.element);if(n){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimateRefDelay(e.animation,t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimateRefDelay(e,t,n){const r=e.options?.delay;if(!r)return;let s;s="string"==typeof r?Io(Wh(r,e.options?.params??{},t.errors)):r,n.delayNextStep(s)}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime;const o=null!=n.duration?Io(n.duration):null,a=null!=n.delay?Io(n.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Tr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ug);const o=Io(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Tr(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Io(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Tr(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return ng(t.params?Wh(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,s=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Io(r.delay):0;s&&(6===t.previousNode.type||0==n&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ug);let o=n;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),Tr(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Tr(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-d+(r.startTime-n.currentTimeline.startTime)}}const ug={};class mx{constructor(e,t,n,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ug,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new dg(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=Io(n.duration)),null!=n.delay&&(r.delay=Io(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Wh(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,s=new mx(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=ug,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},s=new dq(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(aq,"."+this._enterClassName)).replace(cq,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(function m$(i){return new le(3014,!1)}()),a}}class dg{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new dg(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||To),this._currentKeyframe.set(t,To);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function hq(i,e){const t=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||e.keys();for(let s of n)t.set(s,To)}else va(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=Wh(l,s,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??To),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{const r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=va(a,new Map,this._backFill);c.forEach((u,d)=>{"!"===u?e.add(d):u===To&&t.add(d)}),n||c.set("offset",l/this.duration),r.push(c)});const s=e.size?ig(e.values()):[],o=t.size?ig(t.values()):[];if(n){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return fx(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class dq extends dg{constructor(e,t,n,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=n+t,a=t/o,l=va(e[0]);l.set("offset",0),s.push(l);const c=va(e[0]);c.set("offset",ZR(a)),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=va(e[d]);const f=h.get("offset");h.set("offset",ZR((t+f*n)/o)),s.push(h)}n=o,t=0,r="",e=s}return fx(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function ZR(i,e=3){const t=Math.pow(10,e-1);return Math.round(i*t)/t}class gx{}const fq=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class pq extends gx{normalizePropertyName(e,t){return ux(e)}normalizeStyleValue(e,t,n,r){let s="";const o=n.toString().trim();if(fq.has(t)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function r$(i,e){return new le(3005,!1)}())}return o+s}}function QR(i,e,t,n,r,s,o,a,l,c,u,d,h){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const _x={};class JR{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function mq(i,e,t,n,r){return i.some(s=>s(e,t,n,r))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||_x,m=this.buildStyles(n,a&&a.params||_x,d),p=l&&l.params||_x,g=this.buildStyles(r,p,d),_=new Set,y=new Map,v=new Map,b="void"===r,x={params:gq(p,h),delay:this.ast.options?.delay},M=u?[]:px(e,t,this.ast.animation,s,o,m,g,x,c,d);let C=0;if(M.forEach(S=>{C=Math.max(S.duration+S.delay,C)}),d.length)return QR(t,this._triggerName,n,r,b,m,g,[],[],y,v,C,d);M.forEach(S=>{const I=S.element,W=Dr(y,I,new Set);S.preStyleProps.forEach(B=>W.add(B));const K=Dr(v,I,new Set);S.postStyleProps.forEach(B=>K.add(B)),I!==t&&_.add(I)});const w=ig(_.values());return QR(t,this._triggerName,n,r,b,m,g,M,w,y,v,C)}}function gq(i,e){const t=zh(e);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(t[n]=i[n]);return t}class _q{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n=new Map,r=zh(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Wh(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),n.set(l,o)})}),n}}class vq{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new _q(r.style,r.options&&r.options.params||{},n))}),eP(this.states,"true","1"),eP(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new JR(e,r,this.states))}),this.fallbackTransition=function bq(i,e,t){return new JR(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(o=>o.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function eP(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}const xq=new cg;class wq{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const n=[],s=dx(this._driver,t,n,[]);if(n.length)throw function w$(i){return new le(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,n){const r=e.element,s=PR(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=px(this._driver,t,s,ox,Jm,new Map,new Map,n,xq,r),o.forEach(u=>{const d=Dr(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(function M$(){return new le(3300,!1)}()),o=[]),r.length)throw function S$(i){return new le(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,To))})});const c=ya(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function C$(i){return new le(3301,!1)}();return t}listen(e,t,n,r){const s=nx(t,"","","");return ex(this._getPlayer(e),n,s,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const tP="ng-animate-queued",yx="ng-animate-disabled",Dq=[],nP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Tq={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},es="__ng_removed";class vx{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function Pq(i){return i??null}(n?e.value:e),n){const s=zh(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const n=this.options.params;Object.keys(t).forEach(r=>{null==n[r]&&(n[r]=t[r])})}}}const jh="void",bx=new vx(jh);class Aq{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ts(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw function E$(i,e){return new le(3302,!1)}();if(null==n||0==n.length)throw function D$(i){return new le(3303,!1)}();if(!function Lq(i){return"start"==i||"done"==i}(n))throw function T$(i,e){return new le(3400,!1)}();const s=Dr(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);const a=Dr(this._engine.statesByElement,e,new Map);return a.has(t)||(ts(e,eg),ts(e,eg+"-"+t),a.set(t,bx)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function A$(i){return new le(3401,!1)}();return t}trigger(e,t,n,r=!0){const s=this._getTrigger(t),o=new xx(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(ts(e,eg),ts(e,eg+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new vx(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=bx),c.value!==jh&&l.value===c.value){if(!function kq(i,e){const t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||i[s]!==e[s])return!1}return!0}(l.params,c.params)){const p=[],g=s.matchStyles(l.value,l.params,p),_=s.matchStyles(c.value,c.params,p);p.length?this._engine.reportError(p):this._engine.afterFlush(()=>{bl(e,g),Ks(e,_)})}return}const h=Dr(this._engine.playersByElement,e,[]);h.forEach(p=>{p.namespaceId==this.id&&p.triggerName==t&&p.queued&&p.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),m=!1;if(!f){if(!r)return;f=s.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:m}),m||(ts(e,tP),o.onStart(()=>{_u(e,tP)})),o.onDone(()=>{let p=this.players.indexOf(o);p>=0&&this.players.splice(p,1);const g=this._engine.playersByElement.get(e);if(g){let _=g.indexOf(o);_>=0&&g.splice(_,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,tg,!0);n.forEach(r=>{if(r[es])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,jh,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),n&&ya(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=n.get(o)||bx,u=new vx(jh),d=new xx(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const s=e[es];(!s||s===nP)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){ts(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=nx(s,n.triggerName,n.fromState.value,n.toState.value);l._data=e,ex(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(n=>n.element===e)||t,t}}class Iq{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){const n=new Aq(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,n,r){if(hg(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!hg(t))return;const s=t[es];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ts(e,yx)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),_u(e,yx))}removeNode(e,t,n,r){if(hg(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r,s){this.collectedLeaveElements.push(t),t[es]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,n,r,s){return hg(t)?this._fetchNamespace(e).listen(t,n,r,s):()=>{}}_buildInstruction(e,t,n,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,tg,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,ax,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ya(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[es];if(t&&t.setForRemoval){if(e[es]=nP,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(yx)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)ts(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],t.length?ya(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw function I$(i){return new le(3402,!1)}()}_flushAnimations(e,t){const n=new cg,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(O=>{u.add(O);const G=this.driver.query(O,".ng-animate-queued",!0);for(let H=0;H<G.length;H++)u.add(G[H])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=sP(h,this.collectedEnterElements),m=new Map;let p=0;f.forEach((O,G)=>{const H=ox+p++;m.set(G,H),O.forEach(F=>ts(F,H))});const g=[],_=new Set,y=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const G=this.collectedLeaveElements[O],H=G[es];H&&H.setForRemoval&&(g.push(G),_.add(G),H.hasAnimation?this.driver.query(G,".ng-star-inserted",!0).forEach(F=>_.add(F)):y.add(G))}const v=new Map,b=sP(h,Array.from(_));b.forEach((O,G)=>{const H=Jm+p++;v.set(G,H),O.forEach(F=>ts(F,H))}),e.push(()=>{f.forEach((O,G)=>{const H=m.get(G);O.forEach(F=>_u(F,H))}),b.forEach((O,G)=>{const H=v.get(G);O.forEach(F=>_u(F,H))}),g.forEach(O=>{this.processLeaveNode(O)})});const x=[],M=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(t).forEach(H=>{const F=H.player,z=H.element;if(x.push(F),this.collectedEnterElements.length){const $e=z[es];if($e&&$e.setForMove){if($e.previousTriggersValues&&$e.previousTriggersValues.has(H.triggerName)){const We=$e.previousTriggersValues.get(H.triggerName),ze=this.statesByElement.get(H.element);if(ze&&ze.has(H.triggerName)){const Me=ze.get(H.triggerName);Me.value=We,ze.set(H.triggerName,Me)}}return void F.destroy()}}const de=!d||!this.driver.containsElement(d,z),ee=v.get(z),me=m.get(z),fe=this._buildInstruction(H,n,me,ee,de);if(fe.errors&&fe.errors.length)return void M.push(fe);if(de)return F.onStart(()=>bl(z,fe.fromStyles)),F.onDestroy(()=>Ks(z,fe.toStyles)),void r.push(F);if(H.isFallbackTransition)return F.onStart(()=>bl(z,fe.fromStyles)),F.onDestroy(()=>Ks(z,fe.toStyles)),void r.push(F);const He=[];fe.timelines.forEach($e=>{$e.stretchStartingKeyframe=!0,this.disabledNodes.has($e.element)||He.push($e)}),fe.timelines=He,n.append(z,fe.timelines),o.push({instruction:fe,player:F,element:z}),fe.queriedElements.forEach($e=>Dr(a,$e,[]).push(F)),fe.preStyleProps.forEach(($e,We)=>{if($e.size){let ze=l.get(We);ze||l.set(We,ze=new Set),$e.forEach((Me,dt)=>ze.add(dt))}}),fe.postStyleProps.forEach(($e,We)=>{let ze=c.get(We);ze||c.set(We,ze=new Set),$e.forEach((Me,dt)=>ze.add(dt))})});if(M.length){const O=[];M.forEach(G=>{O.push(function R$(i,e){return new le(3505,!1)}())}),x.forEach(G=>G.destroy()),this.reportError(O)}const C=new Map,w=new Map;o.forEach(O=>{const G=O.element;n.has(G)&&(w.set(G,G),this._beforeAnimationBuild(O.player.namespaceId,O.instruction,C))}),r.forEach(O=>{const G=O.element;this._getPreviousPlayers(G,!1,O.namespaceId,O.triggerName,null).forEach(F=>{Dr(C,G,[]).push(F),F.destroy()})});const S=g.filter(O=>aP(O,l,c)),I=new Map;rP(I,this.driver,y,c,To).forEach(O=>{aP(O,l,c)&&S.push(O)});const K=new Map;f.forEach((O,G)=>{rP(K,this.driver,new Set(O),l,"!")}),S.forEach(O=>{const G=I.get(O),H=K.get(O);I.set(O,new Map([...Array.from(G?.entries()??[]),...Array.from(H?.entries()??[])]))});const B=[],L=[],X={};o.forEach(O=>{const{element:G,player:H,instruction:F}=O;if(n.has(G)){if(u.has(G))return H.onDestroy(()=>Ks(G,F.toStyles)),H.disabled=!0,H.overrideTotalTime(F.totalTime),void r.push(H);let z=X;if(w.size>1){let ee=G;const me=[];for(;ee=ee.parentNode;){const fe=w.get(ee);if(fe){z=fe;break}me.push(ee)}me.forEach(fe=>w.set(fe,z))}const de=this._buildAnimation(H.namespaceId,F,C,s,K,I);if(H.setRealPlayer(de),z===X)B.push(H);else{const ee=this.playersByElement.get(z);ee&&ee.length&&(H.parentPlayer=ya(ee)),r.push(H)}}else bl(G,F.fromStyles),H.onDestroy(()=>Ks(G,F.toStyles)),L.push(H),u.has(G)&&r.push(H)}),L.forEach(O=>{const G=s.get(O.element);if(G&&G.length){const H=ya(G);O.setRealPlayer(H)}}),r.forEach(O=>{O.parentPlayer?O.syncPlayerEvents(O.parentPlayer):O.destroy()});for(let O=0;O<g.length;O++){const G=g[O],H=G[es];if(_u(G,Jm),H&&H.hasAnimation)continue;let F=[];if(a.size){let de=a.get(G);de&&de.length&&F.push(...de);let ee=this.driver.query(G,ax,!0);for(let me=0;me<ee.length;me++){let fe=a.get(ee[me]);fe&&fe.length&&F.push(...fe)}}const z=F.filter(de=>!de.destroyed);z.length?Oq(this,G,z):this.processLeaveNode(G)}return g.length=0,B.forEach(O=>{this.players.push(O),O.onDone(()=>{O.destroy();const G=this.players.indexOf(O);this.players.splice(G,1)}),O.play()}),B}elementContainsData(e,t){let n=!1;const r=t[es];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==jh;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,n){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=Dr(n,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const m=f.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),f.destroy(),d.push(f)})}bl(s,t.fromStyles)}_buildAnimation(e,t,n,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(m=>{const p=m.element;u.add(p);const g=p[es];if(g&&g.removedBeforeQueried)return new Hh(m.duration,m.delay);const _=p!==l,y=function Fq(i){const e=[];return oP(i,e),e}((n.get(p)||Dq).map(C=>C.getRealPlayer())).filter(C=>!!C.element&&C.element===p),v=s.get(p),b=o.get(p),x=PR(0,this._normalizer,0,m.keyframes,v,b),M=this._buildPlayer(m,x,y);if(m.subTimeline&&r&&d.add(p),_){const C=new xx(e,a,p);C.setRealPlayer(M),c.push(C)}return M});c.forEach(m=>{Dr(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>function Rq(i,e,t){let n=i.get(e);if(n){if(n.length){const r=n.indexOf(t);n.splice(r,1)}0==n.length&&i.delete(e)}return n}(this.playersByQueriedElement,m.element,m))}),u.forEach(m=>ts(m,HR));const f=ya(h);return f.onDestroy(()=>{u.forEach(m=>_u(m,HR)),Ks(l,t.toStyles)}),d.forEach(m=>{Dr(r,m,[]).push(f)}),f}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Hh(e.duration,e.delay)}}class xx{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new Hh,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>ex(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Dr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function hg(i){return i&&1===i.nodeType}function iP(i,e){const t=i.style.display;return i.style.display=e??"none",t}function rP(i,e,t,n,r){const s=[];t.forEach(l=>s.push(iP(l)));const o=[];n.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const h=e.computeStyle(c,d,r);u.set(d,h),(!h||0==h.length)&&(c[es]=Tq,o.push(c))}),i.set(c,u)});let a=0;return t.forEach(l=>iP(l,s[a++])),o}function sP(i,e){const t=new Map;if(i.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function ts(i,e){i.classList?.add(e)}function _u(i,e){i.classList?.remove(e)}function Oq(i,e,t){ya(t).onDone(()=>i.processLeaveNode(e))}function oP(i,e){for(let t=0;t<i.length;t++){const n=i[t];n instanceof IR?oP(n.players,e):e.push(n)}}function aP(i,e,t){const n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(s=>r.add(s)):e.set(i,n),t.delete(i),!0}class fg{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Iq(e,t,n),this._timelineEngine=new wq(e,t,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,n,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=dx(this._driver,s,l,[]);if(l.length)throw function b$(i,e){return new le(3404,!1)}();a=function yq(i,e,t){return new vq(i,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[s,o]=LR(n);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,s){if("@"==n.charAt(0)){const[o,a]=LR(n);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,n,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Bq=(()=>{class i{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(t);s||i.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ks(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ks(this._element,this._initialStyles),this._endStyles&&(Ks(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(bl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(bl(this._element,this._endStyles),this._endStyles=null),Ks(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function wx(i){let e=null;return i.forEach((t,n)=>{(function Vq(i){return"display"===i||"position"===i})(n)&&(e=e||new Map,e.set(n,t))}),e}class lP{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&e.set(r,this._finished?n:qR(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class Uq{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return NR(e,t)}getParentElement(e){return rx(e)}query(e,t,n){return BR(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}animate(e,t,n,r,s,o=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(f=>f instanceof lP);(function W$(i,e){return 0===i||0===e})(n,r)&&u.forEach(f=>{f.currentSnapshot.forEach((m,p)=>c.set(p,m))});let d=function U$(i){return i.length?i[0]instanceof Map?i:i.map(e=>zR(e)):[]}(t).map(f=>va(f));d=function j$(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,qR(i,a)))}}return e}(e,d,c);const h=function Nq(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=wx(e[0]),e.length>1&&(n=wx(e[e.length-1]))):e instanceof Map&&(t=wx(e)),t||n?new Bq(i,t,n):null}(e,d);return new lP(e,d,l,h)}}let Hq=(()=>{class i extends SR{constructor(t,n){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(n.body,{id:"0",encapsulation:vs.None,styles:[],data:{animation:[]}})}build(t){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?ER(t):t;return cP(this._renderer,null,n,"register",[r]),new zq(n,this._renderer)}}return i.\u0275fac=function(t){return new(t||i)(j(ch),j(gt))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();class zq extends class Q6{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Gq(this._id,e,t||{},this._renderer)}}class Gq{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return cP(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function cP(i,e,t,n,r){return i.setProperty(e,`@@${t}:${n}`,r)}const uP="@.disabled";let Wq=(()=>{class i{constructor(t,n,r){this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,n){const s=this.delegate.createRenderer(t,n);if(!(t&&n&&n.data&&n.data.animation)){let u=this._rendererCache.get(s);return u||(u=new dP("",s,this.engine),this._rendererCache.set(s,u)),u}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return n.data.animation.forEach(l),new jq(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,r){t>=0&&t<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(t){return new(t||i)(j(ch),j(fg),j(Et))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();class dP{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==uP?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class jq extends dP{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==uP?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const r=function $q(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function qq(i){const e=i.indexOf(".");return[i.substring(0,e),i.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(e,t,n)}}let Xq=(()=>{class i extends fg{constructor(t,n,r,s){super(t.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(t){return new(t||i)(j(gt),j(sx),j(gx),j(gu))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();const hP=[{provide:SR,useClass:Hq},{provide:gx,useFactory:function Yq(){return new pq}},{provide:fg,useClass:Xq},{provide:ch,useFactory:function Kq(i,e,t){return new Wq(i,e,t)},deps:[Qm,fg,Et]}],Mx=[{provide:sx,useFactory:()=>new Uq},{provide:ma,useValue:"BrowserAnimations"},...hP],fP=[{provide:sx,useClass:VR},{provide:ma,useValue:"NoopAnimations"},...hP];let Zq=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?fP:Mx}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({providers:Mx,imports:[bR]}),i})();const{isArray:Qq}=Array,{getPrototypeOf:Jq,prototype:e9,keys:t9}=Object;function pP(i){if(1===i.length){const e=i[0];if(Qq(e))return{args:e,keys:null};if(function n9(i){return i&&"object"==typeof i&&Jq(i)===e9}(e)){const t=t9(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:i,keys:null}}const{isArray:i9}=Array;function Sx(i){return Z(e=>function r9(i,e){return i9(e)?i(...e):i(e)}(i,e))}function mP(i,e){return i.reduce((t,n,r)=>(t[n]=e[r],t),{})}function gP(...i){const e=Gy(i),{args:t,keys:n}=pP(i),r=new dn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;zi(t[u]).subscribe(P(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(n?mP(n,a):a),s.complete())}))}});return e?r.pipe(Sx(e)):r}let _P=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return i.\u0275fac=function(t){return new(t||i)(N(zs),N($t))},i.\u0275dir=Ne({type:i}),i})(),wl=(()=>{class i extends _P{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Mi(i)))(n||i)}}(),i.\u0275dir=Ne({type:i,features:[ut]}),i})();const ns=new pe("NgValueAccessor"),o9={provide:ns,useExisting:Qt(()=>Cx),multi:!0},l9=new pe("CompositionEventMode");let Cx=(()=>{class i extends _P{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function a9(){const i=Ys()?Ys().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return i.\u0275fac=function(t){return new(t||i)(N(zs),N($t),N(l9,8))},i.\u0275dir=Ne({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,n){1&t&&_n("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[qt([o9]),ut]}),i})();function ba(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function vP(i){return null!=i&&"number"==typeof i.length}const Fi=new pe("NgValidators"),xa=new pe("NgAsyncValidators"),u9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class d9{static min(e){return function bP(i){return e=>{if(ba(e.value)||ba(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}(e)}static max(e){return function xP(i){return e=>{if(ba(e.value)||ba(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}(e)}static required(e){return function wP(i){return ba(i.value)?{required:!0}:null}(e)}static requiredTrue(e){return function MP(i){return!0===i.value?null:{required:!0}}(e)}static email(e){return function SP(i){return ba(i.value)||u9.test(i.value)?null:{email:!0}}(e)}static minLength(e){return function CP(i){return e=>ba(e.value)||!vP(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function EP(i){return e=>vP(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static pattern(e){return function DP(i){if(!i)return mg;let e,t;return"string"==typeof i?(t="","^"!==i.charAt(0)&&(t+="^"),t+=i,"$"!==i.charAt(i.length-1)&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(ba(n.value))return null;const r=n.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return LP(e)}static composeAsync(e){return OP(e)}}function mg(i){return null}function TP(i){return null!=i}function AP(i){return _h(i)?Xn(i):i}function IP(i){let e={};return i.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function RP(i,e){return e.map(t=>t(i))}function PP(i){return i.map(e=>function h9(i){return!i.validate}(e)?e:t=>e.validate(t))}function LP(i){if(!i)return null;const e=i.filter(TP);return 0==e.length?null:function(t){return IP(RP(t,e))}}function Ex(i){return null!=i?LP(PP(i)):null}function OP(i){if(!i)return null;const e=i.filter(TP);return 0==e.length?null:function(t){return gP(RP(t,e).map(AP)).pipe(Z(IP))}}function Dx(i){return null!=i?OP(PP(i)):null}function FP(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function kP(i){return i._rawValidators}function NP(i){return i._rawAsyncValidators}function Tx(i){return i?Array.isArray(i)?i:[i]:[]}function gg(i,e){return Array.isArray(i)?i.includes(e):i===e}function BP(i,e){const t=Tx(e);return Tx(i).forEach(r=>{gg(t,r)||t.push(r)}),t}function VP(i,e){return Tx(e).filter(t=>!gg(i,t))}class UP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ex(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Dx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ji extends UP{get formDirective(){return null}get path(){return null}}class Ro extends UP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let zP=(()=>{class i extends class HP{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(N(Ro,2))},i.\u0275dir=Ne({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,n){2&t&&gi("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[ut]}),i})();const $h="VALID",yg="INVALID",yu="PENDING",qh="DISABLED";function Px(i){return(vg(i)?i.validators:i)||null}function WP(i){return Array.isArray(i)?Ex(i):i||null}function Lx(i,e){return(vg(e)?e.asyncValidators:i)||null}function jP(i){return Array.isArray(i)?Dx(i):i||null}function vg(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class XP{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=WP(this._rawValidators),this._composedAsyncValidatorFn=jP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===$h}get invalid(){return this.status===yg}get pending(){return this.status==yu}get disabled(){return this.status===qh}get enabled(){return this.status!==qh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=WP(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=jP(e)}addValidators(e){this.setValidators(BP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(BP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VP(e,this._rawAsyncValidators))}hasValidator(e){return gg(this._rawValidators,e)}hasAsyncValidator(e){return gg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=yu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=qh,this.errors=null,this._forEachChild(n=>{n.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=$h,this._forEachChild(n=>{n.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$h||this.status===yu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qh:$h}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=yu,this._hasOwnPendingAsyncValidator=!0;const t=AP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Rt,this.statusChanges=new Rt}_calculateStatus(){return this._allControlsDisabled()?qh:this.errors?yg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yu)?yu:this._anyControlsHaveStatus(yg)?yg:$h}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Ox extends XP{constructor(e,t,n){super(Px(t),Lx(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function qP(i,e,t){i._forEachChild((n,r)=>{if(void 0===t[r])throw new le(1002,"")})})(this,0,e),Object.keys(e).forEach(n=>{(function $P(i,e,t){const n=i.controls;if(!(e?Object.keys(n):n).length)throw new le(1e3,"");if(!n[t])throw new le(1001,"")})(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{const r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>!!n._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,s)=>{n=t(n,r,s)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Xh(i,e){Fx(i,e),e.valueAccessor.writeValue(i.value),i.disabled&&e.valueAccessor.setDisabledState?.(!0),function w9(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&YP(i,e)})}(i,e),function S9(i,e){const t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}(i,e),function M9(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&YP(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function x9(i,e){if(e.valueAccessor.setDisabledState){const t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}(i,e)}function xg(i,e,t=!0){const n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),Mg(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function wg(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Fx(i,e){const t=kP(i);null!==e.validator?i.setValidators(FP(t,e.validator)):"function"==typeof t&&i.setValidators([t]);const n=NP(i);null!==e.asyncValidator?i.setAsyncValidators(FP(n,e.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();wg(e._rawValidators,r),wg(e._rawAsyncValidators,r)}function Mg(i,e){let t=!1;if(null!==i){if(null!==e.validator){const r=kP(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,i.setValidators(s))}}if(null!==e.asyncValidator){const r=NP(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,i.setAsyncValidators(s))}}}const n=()=>{};return wg(e._rawValidators,n),wg(e._rawAsyncValidators,n),t}function YP(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function KP(i,e){Fx(i,e)}function QP(i,e){i._syncPendingControls(),e.forEach(t=>{const n=t.control;"submit"===n.updateOn&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}const A9={provide:Ji,useExisting:Qt(()=>Sg)},Yh=(()=>Promise.resolve())();let Sg=(()=>{class i extends Ji{constructor(t,n){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Rt,this.form=new Ox({},Ex(t),Dx(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Yh.then(()=>{const n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),Xh(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Yh.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Yh.then(()=>{const n=this._findContainer(t.path),r=new Ox({});KP(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Yh.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){Yh.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,QP(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return i.\u0275fac=function(t){return new(t||i)(N(Fi,10),N(xa,10))},i.\u0275dir=Ne({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,n){1&t&&_n("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[qt([A9]),ut]}),i})();function JP(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}function eL(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const Bx=class extends XP{constructor(e=null,t,n){super(Px(t),Lx(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=eL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){JP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){JP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){eL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let oL=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({}),i})();const Vx=new pe("NgModelWithFormControlWarning"),B9={provide:Ro,useExisting:Qt(()=>Ux)};let Ux=(()=>{class i extends Ro{constructor(t,n,r,s){super(),this._ngModelWarningConfig=s,this.update=new Rt,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=function Nx(i,e){if(!e)return null;let t,n,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Cx?t=s:function D9(i){return Object.getPrototypeOf(i.constructor)===wl}(s)?n=s:r=s}),r||n||t||null}(0,r)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const n=t.form.previousValue;n&&xg(n,this,!1),Xh(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}(function kx(i,e){if(!i.hasOwnProperty("model"))return!1;const t=i.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)})(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&xg(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(t){return new(t||i)(N(Fi,10),N(xa,10),N(ns,10),N(Vx,8))},i.\u0275dir=Ne({type:i,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[qt([B9]),ut,ji]}),i})();const V9={provide:Ji,useExisting:Qt(()=>Cg)};let qx,Cg=(()=>{class i extends Ji{constructor(t,n){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Rt,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Mg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const n=this.form.get(t.path);return Xh(n,t),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){xg(t.control||null,t,!1),function T9(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this.submitted=!0,QP(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const n=t.control,r=this.form.get(t.path);n!==r&&(xg(n||null,t),(i=>i instanceof Bx)(r)&&(Xh(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const n=this.form.get(t.path);KP(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const n=this.form.get(t.path);n&&function C9(i,e){return Mg(i,e)}(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Fx(this.form,this),this._oldForm&&Mg(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(t){return new(t||i)(N(Fi,10),N(xa,10))},i.\u0275dir=Ne({type:i,selectors:[["","formGroup",""]],hostBindings:function(t,n){1&t&&_n("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[qt([V9]),ut,ji]}),i})(),i7=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[oL]}),i})(),r7=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:Vx,useValue:t.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[i7]}),i})();function Sl(i,...e){return e.length?e.some(t=>i[t]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}try{qx=typeof Intl<"u"&&Intl.v8BreakIterator}catch{qx=!1}let Kh,Cl,Yx,Ar=(()=>{class i{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Jj(i){return i===eR}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!qx)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(t){return new(t||i)(j(d0))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Xx(i){return function v7(){if(null==Kh&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Kh=!0}))}finally{Kh=Kh||!1}return Kh}()?i:!!i.capture}function b7(){if(null==Cl){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Cl=!1,Cl;if("scrollBehavior"in document.documentElement.style)Cl=!0;else{const i=Element.prototype.scrollTo;Cl=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return Cl}function Kx(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const e=i.shadowRoot.activeElement;if(e===i)break;i=e}return i}function El(i){return i.composedPath?i.composedPath()[0]:i.target}function Zx(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}class Ir extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}}function Ve(...i){return Xn(i,zd(i))}function zn(i,e,t){const n=we(i)||e||t?{next:i,error:e,complete:t}:i;return n?k((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;r.subscribe(P(s,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),s.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),s.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),s.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):jr}class M7 extends J{constructor(e,t){super()}schedule(e,t=0){return this}}const Dg={setInterval(i,e,...t){const{delegate:n}=Dg;return n?.setInterval?n.setInterval(i,e,...t):setInterval(i,e,...t)},clearInterval(i){const{delegate:e}=Dg;return(e?.clearInterval||clearInterval)(i)},delegate:void 0};class Qx extends M7{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return Dg.setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;Dg.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,n=!1;try{this.work(e)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,$(n,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const IL={now:()=>(IL.delegate||Date).now(),delegate:void 0};class Zh{constructor(e,t=Zh.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,n){return new this.schedulerActionCtor(this,e).schedule(n,t)}}Zh.now=IL.now;class Jx extends Zh{constructor(e,t=Zh.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}const ew=new Jx(Qx),S7=ew;function RL(i,e=ew){return k((t,n)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,n.next(c)}};function l(){const c=o+i,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void n.add(r);a()}t.subscribe(P(n,c=>{s=c,o=e.now(),r||(r=e.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{s=r=null}))})}function di(i,e){return k((t,n)=>{let r=0;t.subscribe(P(n,s=>i.call(e,s,r++)&&n.next(s)))})}function dr(i){return i<=0?()=>ho:k((e,t)=>{let n=0;e.subscribe(P(t,r=>{++n<=i&&(t.next(r),i<=n&&t.complete())}))})}function PL(i){return di((e,t)=>i<=t)}function E7(i,e){return i===e}function Dn(i){return k((e,t)=>{zi(i).subscribe(P(t,()=>t.complete(),ke)),!t.closed&&e.subscribe(t)})}function yn(i){return null!=i&&"false"!=`${i}`}function Tg(i){return Array.isArray(i)?i:[i]}function Jn(i){return null==i?"":"string"==typeof i?i:`${i}px`}function bu(i){return i instanceof $t?i.nativeElement:i}let A7=(()=>{class i{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),I7=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({providers:[A7]}),i})();function tw(...i){const e=zd(i),t=Gy(i),{args:n,keys:r}=pP(i);if(0===n.length)return Xn([],e);const s=new dn(function R7(i,e,t=jr){return n=>{LL(e,()=>{const{length:r}=i,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)LL(e,()=>{const c=Xn(i[l],e);let u=!1;c.subscribe(P(n,d=>{s[l]=d,u||(u=!0,a--),a||n.next(t(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,e,r?o=>mP(r,o):jr));return t?s.pipe(Sx(t)):s}function LL(i,e,t){i?uo(t,i,e):e()}function Ag(...i){return function P7(){return Dc(1)}()(Xn(i,zd(i)))}function xu(...i){const e=zd(i);return k((t,n)=>{(e?Ag(i,t,e):Ag(i,t)).subscribe(n)})}const OL=new Set;let wu,L7=(()=>{class i{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):F7}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function O7(i){if(!OL.has(i))try{wu||(wu=document.createElement("style"),wu.setAttribute("type","text/css"),document.head.appendChild(wu)),wu.sheet&&(wu.sheet.insertRule(`@media ${i} {body{ }}`,0),OL.add(i))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return i.\u0275fac=function(t){return new(t||i)(j(Ar))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function F7(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let Ig=(()=>{class i{constructor(t,n){this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new qe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return FL(Tg(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=tw(FL(Tg(t)).map(o=>this._registerQuery(o).observable));return s=Ag(s.pipe(dr(1)),s.pipe(PL(1),RL(0))),s.pipe(Z(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const n=this._mediaMatcher.matchMedia(t),s={observable:new dn(o=>{const a=l=>this._zone.run(()=>o.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(xu(n),Z(({matches:o})=>({query:t,matches:o})),Dn(this._destroySubject)),mql:n};return this._queries.set(t,s),s}}return i.\u0275fac=function(t){return new(t||i)(j(L7),j(Et))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function FL(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const Dl_Medium="(min-width: 960px) and (max-width: 1279.98px)",Dl_Large="(min-width: 1280px) and (max-width: 1919.98px)";class BL extends class B7{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new qe,this._typeaheadSubscription=J.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new qe,this.change=new qe,e instanceof Ah&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(zn(t=>this._pressedLetters.push(t)),RL(e),di(()=>this._pressedLetters.length>0),Z(()=>this._pressedLetters.join(""))).subscribe(t=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Sl(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e);this._activeItem=t[n]??null,this._activeItemIndex=n}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Ah?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let nw=(()=>{class i{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function U7(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const n=function V7(i){try{return i.frameElement}catch{return null}}(function X7(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(t));if(n&&(-1===UL(n)||!this.isVisible(n)))return!1;let r=t.nodeName.toLowerCase(),s=UL(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function $7(i){let e=i.nodeName.toLowerCase(),t="input"===e&&i.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,n){return function q7(i){return!function z7(i){return function W7(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function H7(i){let e=i.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(i)||function G7(i){return function j7(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||VL(i))}(t)&&!this.isDisabled(t)&&(n?.ignoreVisibility||this.isVisible(t))}}return i.\u0275fac=function(t){return new(t||i)(j(Ar))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function VL(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let e=i.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function UL(i){if(!VL(i))return null;const e=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Y7{constructor(e,t,n,r,s=!1){this._element=e,this._checker=t,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const n=this._getFirstTabbableElement(t);return n?.focus(e),!!n}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=0;n<t.length;n++){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=t.length-1;n>=0;n--){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(dr(1)).subscribe(e)}}let HL=(()=>{class i{constructor(t,n,r){this._checker=t,this._ngZone=n,this._document=r}create(t,n=!1){return new Y7(t,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(t){return new(t||i)(j(nw),j(Et),j(gt))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function zL(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function GL(i){const e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const K7=new pe("cdk-input-modality-detector-options"),Z7={ignoreKeys:[18,17,224,91,16]},Mu=Xx({passive:!0,capture:!0});let Q7=(()=>{class i{constructor(t,n,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Ir(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=El(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(zL(o)?"keyboard":"mouse"),this._mostRecentTarget=El(o))},this._onTouchstart=o=>{GL(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=El(o))},this._options={...Z7,...s},this.modalityDetected=this._modality.pipe(PL(1)),this.modalityChanged=this.modalityDetected.pipe(function C7(i,e=jr){return i=i??E7,k((t,n)=>{let r,s=!0;t.subscribe(P(n,o=>{const a=e(o);(s||!i(r,a))&&(s=!1,r=a,n.next(o))}))})}()),t.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Mu),r.addEventListener("mousedown",this._onMousedown,Mu),r.addEventListener("touchstart",this._onTouchstart,Mu)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Mu),document.removeEventListener("mousedown",this._onMousedown,Mu),document.removeEventListener("touchstart",this._onTouchstart,Mu))}}return i.\u0275fac=function(t){return new(t||i)(j(Ar),j(Et),j(gt),j(K7,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const J7=new pe("liveAnnouncerElement",{providedIn:"root",factory:function eX(){return null}}),tX=new pe("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let jL=(()=>{class i{constructor(t,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...n){const r=this._defaultOptions;let s,o;return 1===n.length&&"number"==typeof n[0]?o=n[0]:[s,o]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",n=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return i.\u0275fac=function(t){return new(t||i)(j(J7,8),j(Et),j(gt),j(tX,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const nX=new pe("cdk-focus-monitor-default-options"),Rg=Xx({passive:!0,capture:!0});let Qh=(()=>{class i{constructor(t,n,r,s,o){this._ngZone=t,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new qe,this._rootNodeFocusAndBlurListener=a=>{for(let c=El(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,n=!1){const r=bu(t);if(!this._platform.isBrowser||1!==r.nodeType)return Ve(null);const s=function w7(i){if(function x7(){if(null==Yx){const i=typeof document<"u"?document.head:null;Yx=!(!i||!i.createShadowRoot&&!i.attachShadow)}return Yx}()){const e=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;const a={checkChildren:n,subject:new qe,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const n=bu(t),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(t,n,r){const s=bu(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,n){t.classList.toggle("cdk-focused",!!n),t.classList.toggle("cdk-touch-focused","touch"===n),t.classList.toggle("cdk-keyboard-focused","keyboard"===n),t.classList.toggle("cdk-mouse-focused","mouse"===n),t.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(t,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,n){const r=this._elementInfo.get(n),s=El(t);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(t,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&t.relatedTarget instanceof Node&&n.contains(t.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(t,n){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(n))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,Rg),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,Rg)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Dn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const n=t.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Rg),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Rg),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,n,r){this._setClasses(t,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(t){const n=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0;return!1}}return i.\u0275fac=function(t){return new(t||i)(j(Et),j(Ar),j(Q7),j(gt,8),j(nX,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const $L="cdk-high-contrast-black-on-white",qL="cdk-high-contrast-white-on-black",iw="cdk-high-contrast-active";let XL=(()=>{class i{constructor(t,n){this._platform=t,this._document=n,this._breakpointSubscription=gn(Ig).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(iw,$L,qL),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?t.add(iw,$L):2===n&&t.add(iw,qL)}}}return i.\u0275fac=function(t){return new(t||i)(j(Ar),j(gt))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),iX=(()=>{class i{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(t){return new(t||i)(j(XL))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[I7]}),i})();const rX=new pe("cdk-dir-doc",{providedIn:"root",factory:function sX(){return gn(gt)}}),oX=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Pg=(()=>{class i{constructor(t){if(this.value="ltr",this.change=new Rt,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function aX(i){const e=i?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?oX.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(t){return new(t||i)(j(rX,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Jh=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({}),i})(),ZL=(()=>{class i{}return i.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",i.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",i.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",i.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",i})(),QL=(()=>{class i{}return i.COMPLEX="375ms",i.ENTERING="225ms",i.EXITING="195ms",i})();const cX=new pe("mat-sanity-checks",{providedIn:"root",factory:function lX(){return!0}});let On=(()=>{class i{constructor(t,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!Zx()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return i.\u0275fac=function(t){return new(t||i)(j(XL),j(cX,8),j(gt))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[Jh,Jh]}),i})();function JL(i){return class extends i{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=yn(e)}}}function rw(i,e){return class extends i{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const n=t||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function Tl(i){return class extends i{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=yn(e)}}}function uX(i,e=0){return class extends i{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?function D7(i,e=0){return function T7(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):e}(t):this.defaultTabIndex}}}function dX(i){return class extends i{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let eO=(()=>{class i{isErrorState(t,n){return!!(t&&t.invalid&&(t.touched||n&&n.submitted))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),tO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),i})();function ef(i,e,t){i.nativeElement.classList.toggle(e,t)}let iO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[On,On]}),i})();class fX{constructor(e,t,n,r=!1){this._renderer=e,this.element=t,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const rO={enterDuration:225,exitDuration:150},sw=Xx({passive:!0}),sO=["mousedown","touchstart"],oO=["mouseup","mouseleave","touchend","touchcancel"];class aO{constructor(e,t,n,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=bu(n))}fadeInRipple(e,t,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...rO,...n.animation};n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=n.radius||function mX(i,e,t){const n=Math.max(Math.abs(i-t.left),Math.abs(i-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(n*n+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=n.color&&(u.style.backgroundColor=n.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),f=d.transitionDuration,m="none"===d.transitionProperty||"0s"===f||"0s, 0s"===f,p=new fX(this,u,n,m);u.style.transform="scale3d(1, 1, 1)",p.state=0,n.persistent||(this._mostRecentTransientRipple=p);let g=null;return!m&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const _=()=>this._finishRippleTransition(p),y=()=>this._destroyRipple(p);u.addEventListener("transitionend",_),u.addEventListener("transitioncancel",y),g={onTransitionEnd:_,onTransitionCancel:y}}),this._activeRipples.set(p,g),(m||!c)&&this._finishRippleTransition(p),p}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,n={...rO,...e.config.animation};t.style.transitionDuration=`${n.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=bu(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(sO))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(oO),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=1,!n&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=zL(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!GL(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,sw)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(sO.forEach(e=>{this._triggerElement.removeEventListener(e,this,sw)}),this._pointerUpEventsRegistered&&oO.forEach(e=>{this._triggerElement.removeEventListener(e,this,sw)}))}}const lO=new pe("mat-ripple-global-options");let tf=(()=>{class i{constructor(t,n,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new aO(this,n,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,n=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return i.\u0275fac=function(t){return new(t||i)(N($t),N(Et),N(Ar),N(lO,8),N(ma,8))},i.\u0275dir=Ne({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,n){2&t&&gi("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),ow=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[On,On]}),i})(),cO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[On]}),i})();class Lg{constructor(e=!1,t,n=!0,r){this._multiple=e,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new qe,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(n=>this._markSelected(n));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(n=>this._unmarkSelected(n));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,n=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!n.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let xX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i}),i})();const wX=["*"],uO=new pe("MatChipRemove"),dO=new pe("MatChipAvatar"),hO=new pe("MatChipTrailingIcon");class MX{constructor(e){this._elementRef=e}}const SX=uX(rw(Tl(MX),"primary"),-1);let Og=(()=>{class i extends SX{constructor(t,n,r,s,o,a,l,c){super(t),this._ngZone=n,this._changeDetectorRef=o,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this.role="option",this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new qe,this._onBlur=new qe,this.selectionChange=new Rt,this.destroyed=new Rt,this.removed=new Rt,this._addHostClassName(),this._chipRippleTarget=a.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new aO(this,n,this._chipRippleTarget,r),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=s||{},this._animationsDisabled="NoopAnimations"===l,this.tabIndex=null!=c&&parseInt(c)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const n=yn(t);n!==this._selected&&(this._selected=n,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=yn(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=yn(t)}get removable(){return this._removable}set removable(t){this._removable=yn(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t="mat-basic-chip",n=this._elementRef.nativeElement;n.hasAttribute(t)||n.tagName.toLowerCase()===t?n.classList.add(t):n.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled&&t.preventDefault()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case 46:case 8:this.remove(),t.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe(dr(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return i.\u0275fac=function(t){return new(t||i)(N($t),N(Et),N(Ar),N(lO,8),N(Er),N(gt),N(ma,8),ua("tabindex"))},i.\u0275dir=Ne({type:i,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,n,r){if(1&t&&(Zi(r,dO,5),Zi(r,hO,5),Zi(r,uO,5)),2&t){let s;Sn(s=Cn())&&(n.avatar=s.first),Sn(s=Cn())&&(n.trailingIcon=s.first),Sn(s=Cn())&&(n.removeIcon=s.first)}},hostAttrs:[1,"mat-chip","mat-focus-indicator"],hostVars:15,hostBindings:function(t,n){1&t&&_n("click",function(s){return n._handleClick(s)})("keydown",function(s){return n._handleKeydown(s)})("focus",function(){return n.focus()})("blur",function(){return n._blur()}),2&t&&(bn("tabindex",n.disabled?null:n.tabIndex)("role",n.role)("disabled",n.disabled||null)("aria-disabled",n.disabled.toString())("aria-selected",n.ariaSelected),gi("mat-chip-selected",n.selected)("mat-chip-with-avatar",n.avatar)("mat-chip-with-trailing-icon",n.trailingIcon||n.removeIcon)("mat-chip-disabled",n.disabled)("_mat-animation-noopable",n._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",role:"role",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[ut]}),i})();const fO=new pe("mat-chips-default-options"),TX=dX(class{constructor(i,e,t,n){this._defaultErrorStateMatcher=i,this._parentForm=e,this._parentFormGroup=t,this.ngControl=n,this.stateChanges=new qe}});let AX=0;class IX{constructor(e,t){this.source=e,this.value=t}}let pO=(()=>{class i extends TX{constructor(t,n,r,s,o,a,l){super(a,s,o,l),this._elementRef=t,this._changeDetectorRef=n,this._dir=r,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new qe,this._uid="mat-chip-list-"+AX++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(c,u)=>c===u,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new Rt,this.valueChange=new Rt,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get role(){return this._explicitRole?this._explicitRole:this.empty?null:"listbox"}set role(t){this._explicitRole=t}get multiple(){return this._multiple}set multiple(t){this._multiple=yn(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(d9.required)??!1}set required(t){this._required=yn(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=yn(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=yn(t),this._syncChipsState()}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return tl(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return tl(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return tl(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return tl(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new BL(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Dn(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(Dn(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(xu(null),Dn(this._destroyed)).subscribe(()=>{(this.disabled||!this.selectable)&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new Lg(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const n=t.target;n&&n.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_setSelectionByValue(t,n=!0){if(this._clearSelection(),this.chips.forEach(r=>r.deselect()),Array.isArray(t))t.forEach(r=>this._selectValue(r,n)),this._sortValues();else{const r=this._selectValue(t,n);r&&n&&this._keyManager.setActiveItem(r)}}_selectValue(t,n=!0){const r=this.chips.find(s=>null!=s.value&&this._compareWith(s.value,t));return r&&(n?r.selectViaInteraction():r.select(),this._selectionModel.select(r)),r}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(n=>{n!==t&&n.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let n=null;n=Array.isArray(this.selected)?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=n,this.change.emit(new IX(this,n)),this.valueChange.emit(n),this._onChange(n),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(n=>{!this._selectionModel.isSelected(n)&&n.selected&&n.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let n=this.chips.toArray().indexOf(t.chip);this._isValidIndex(n)&&this._keyManager.updateActiveItem(n),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const n=t.chip,r=this.chips.toArray().indexOf(t.chip);this._isValidIndex(r)&&n._hasFocus&&(this._lastDestroyedChipIndex=r)})}_originatesFromChip(t){let n=t.target;for(;n&&n!==this._elementRef.nativeElement;){if(n.classList.contains("mat-chip"))return!0;n=n.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple,t.chipListSelectable=this._selectable})}}return i.\u0275fac=function(t){return new(t||i)(N($t),N(Er),N(Pg,8),N(Sg,8),N(Cg,8),N(eO),N(Ro,10))},i.\u0275cmp=Yn({type:i,selectors:[["mat-chip-list"]],contentQueries:function(t,n,r){if(1&t&&Zi(r,Og,5),2&t){let s;Sn(s=Cn())&&(n.chips=s)}},hostAttrs:[1,"mat-chip-list"],hostVars:14,hostBindings:function(t,n){1&t&&_n("focus",function(){return n.focus()})("blur",function(){return n._blur()})("keydown",function(s){return n._keydown(s)}),2&t&&(ym("id",n._uid),bn("tabindex",n.disabled?null:n._tabIndex)("aria-required",n.role?n.required:null)("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-multiselectable",n.multiple)("role",n.role)("aria-orientation",n.ariaOrientation),gi("mat-chip-list-disabled",n.disabled)("mat-chip-list-invalid",n.errorState)("mat-chip-list-required",n.required))},inputs:{role:"role",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[qt([{provide:xX,useExisting:i}]),ut],ngContentSelectors:wX,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,n){1&t&&(js(),vt(0,"div",0),cr(1),Mt())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-chip::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}.mat-standard-chip._mat-animation-noopable{transition:none !important;animation:none !important}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}'],encapsulation:2,changeDetection:0}),i})(),LX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({providers:[eO,{provide:fO,useValue:{separatorKeyCodes:[13]}}],imports:[On]}),i})();const OX=["button"],FX=["*"],mO=new pe("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),gO=new pe("MatButtonToggleGroup"),kX={provide:ns,useExisting:Qt(()=>vO),multi:!0};let _O=0;class yO{constructor(e,t){this.source=e,this.value=t}}let vO=(()=>{class i{constructor(t,n){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+_O++,this.valueChange=new Rt,this.change=new Rt,this.appearance=n&&n.appearance?n.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=yn(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(n=>n.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=yn(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=yn(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new Lg(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const n=new yO(t,this.value);this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}_syncButtonToggle(t,n,r=!1,s=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?n?this._selectionModel.select(t):this._selectionModel.deselect(t):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(t,r)):this._updateModelValue(t,r)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(n=>null!=t.value&&n===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(n=>this._selectValue(n))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const n=this._buttonToggles.find(r=>null!=r.value&&r.value===t);n&&(n.checked=!0,this._selectionModel.select(n))}_updateModelValue(t,n){n&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return i.\u0275fac=function(t){return new(t||i)(N(Er),N(mO,8))},i.\u0275dir=Ne({type:i,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,n,r){if(1&t&&Zi(r,bO,5),2&t){let s;Sn(s=Cn())&&(n._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,n){2&t&&(bn("aria-disabled",n.disabled),gi("mat-button-toggle-vertical",n.vertical)("mat-button-toggle-group-appearance-standard","standard"===n.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[qt([kX,{provide:gO,useExisting:i}])]}),i})();const NX=Tl(class{});let bO=(()=>{class i extends NX{constructor(t,n,r,s,o,a){super(),this._changeDetectorRef=n,this._elementRef=r,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new Rt;const l=Number(o);this.tabIndex=l||0===l?l:null,this.buttonToggleGroup=t,this.appearance=a&&a.appearance?a.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const n=yn(t);n!==this._checked&&(this._checked=n,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=yn(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+_O++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new yO(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return i.\u0275fac=function(t){return new(t||i)(N(gO,8),N(Er),N($t),N(Qh),ua("tabindex"),N(mO,8))},i.\u0275cmp=Yn({type:i,selectors:[["mat-button-toggle"]],viewQuery:function(t,n){if(1&t&&Mo(OX,5),2&t){let r;Sn(r=Cn())&&(n._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,n){1&t&&_n("focus",function(){return n.focus()}),2&t&&(bn("aria-label",null)("aria-labelledby",null)("id",n.id)("name",null),gi("mat-button-toggle-standalone",!n.buttonToggleGroup)("mat-button-toggle-checked",n.checked)("mat-button-toggle-disabled",n.disabled)("mat-button-toggle-appearance-standard","standard"===n.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[ut],ngContentSelectors:FX,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,n){if(1&t&&(js(),vt(0,"button",0,1),_n("click",function(){return n._onButtonClick()}),vt(2,"span",2),cr(3),Mt()(),Yi(4,"span",3)(5,"span",4)),2&t){const r=function jT(i){return Lc(function WV(){return st.lFrame.contextLView}(),22+i)}(1);Li("id",n.buttonId)("disabled",n.disabled||null),bn("tabindex",n.disabled?-1:n.tabIndex)("aria-pressed",n.checked)("name",n._getButtonName())("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby),li(5),Li("matRippleTrigger",r)("matRippleDisabled",n.disableRipple||n.disabled)}},dependencies:[tf],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),i})(),BX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[On,ow,On]}),i})();const VX=["*",[["mat-card-footer"]]],UX=["*","mat-card-footer"];let HX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),i})(),zX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),i})(),xO=(()=>{class i{constructor(t){this._animationMode=t}}return i.\u0275fac=function(t){return new(t||i)(N(ma,8))},i.\u0275cmp=Yn({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,n){2&t&&gi("_mat-animation-noopable","NoopAnimations"===n._animationMode)},exportAs:["matCard"],ngContentSelectors:UX,decls:2,vars:0,template:function(t,n){1&t&&(js(VX),cr(0),cr(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),i})(),GX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[On,On]}),i})();const WX=["mat-button",""],jX=["*"],qX=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],XX=rw(JL(Tl(class{constructor(i){this._elementRef=i}})));let wO=(()=>{class i extends XX{constructor(t,n,r){super(t),this._focusMonitor=n,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of qX)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,n){t?this._focusMonitor.focusVia(this._getHostElement(),t,n):this._getHostElement().focus(n)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(n=>this._getHostElement().hasAttribute(n))}}return i.\u0275fac=function(t){return new(t||i)(N($t),N(Qh),N(ma,8))},i.\u0275cmp=Yn({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,n){if(1&t&&Mo(tf,5),2&t){let r;Sn(r=Cn())&&(n.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,n){2&t&&(bn("disabled",n.disabled||null),gi("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ut],attrs:WX,ngContentSelectors:jX,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,n){1&t&&(js(),vt(0,"span",0),cr(1),Mt(),Yi(2,"span",1)(3,"span",2)),2&t&&(li(2),gi("mat-button-ripple-round",n.isRoundButton||n.isIconButton),Li("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},dependencies:[tf],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),MO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[ow,On,On]}),i})();function Su(i,e){const t=we(i)?i:()=>i,n=r=>r.error(t());return new dn(e?r=>e.schedule(n,0,r):n)}function Po(i){return k((e,t)=>{let s,n=null,r=!1;n=e.subscribe(P(t,void 0,void 0,o=>{s=zi(i(o,Po(i)(e))),n?(n.unsubscribe(),n=null,s.subscribe(t)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(t))})}function Fg(i){return k((e,t)=>{try{e.subscribe(t)}finally{t.add(i)}})}function wa(i,e){return we(e)?pi(i,e,1):pi(i,1)}class YX{}class Ma{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const n=t.indexOf(":");if(n>0){const r=t.slice(0,n),s=r.toLowerCase(),o=t.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ma?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ma;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ma?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class KX{encodeKey(e){return SO(e)}encodeValue(e){return SO(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const QX=/%(\d[a-f0-9])/gi,JX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function SO(i){return encodeURIComponent(i).replace(QX,(e,t)=>JX[t]??e)}function kg(i){return`${i}`}class Sa{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new KX,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ZX(i,e){const t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t],r=Array.isArray(n)?n.map(kg):[kg(n)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(s=>{t.push({param:n,value:s,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Sa({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(kg(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let n=this.map.get(e.param)||[];const r=n.indexOf(kg(e.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class eY{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function CO(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function EO(i){return typeof Blob<"u"&&i instanceof Blob}function DO(i){return typeof FormData<"u"&&i instanceof FormData}class nf{constructor(e,t,n,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function tY(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ma),this.context||(this.context=new eY),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Sa,this.urlWithParams=t}serializeBody(){return null===this.body?null:CO(this.body)||EO(this.body)||DO(this.body)||function nY(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Sa?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||DO(this.body)?null:EO(this.body)?this.body.type||null:CO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Sa?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new nf(t,n,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var Si=(()=>((Si=Si||{})[Si.Sent=0]="Sent",Si[Si.UploadProgress=1]="UploadProgress",Si[Si.ResponseHeader=2]="ResponseHeader",Si[Si.DownloadProgress=3]="DownloadProgress",Si[Si.Response=4]="Response",Si[Si.User=5]="User",Si))();class aw extends class iY{constructor(e,t=200,n="OK"){this.headers=e.headers||new Ma,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Si.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new aw({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function lw(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let AO=(()=>{class i{constructor(t){this.handler=t}request(t,n,r={}){let s;if(t instanceof nf)s=t;else{let l,c;l=r.headers instanceof Ma?r.headers:new Ma(r.headers),r.params&&(c=r.params instanceof Sa?r.params:new Sa({fromObject:r.params})),s=new nf(t,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Ve(s).pipe(wa(l=>this.handler.handle(l)));if(t instanceof nf||"events"===r.observe)return o;const a=o.pipe(di(l=>l instanceof aw));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Z(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Z(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Z(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Z(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,n={}){return this.request("DELETE",t,n)}get(t,n={}){return this.request("GET",t,n)}head(t,n={}){return this.request("HEAD",t,n)}jsonp(t,n){return this.request("JSONP",t,{params:(new Sa).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,n={}){return this.request("OPTIONS",t,n)}patch(t,n,r={}){return this.request("PATCH",t,lw(r,n))}post(t,n,r={}){return this.request("POST",t,lw(r,n))}put(t,n,r={}){return this.request("PUT",t,lw(r,n))}}return i.\u0275fac=function(t){return new(t||i)(j(YX))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();const sY=["*"];let Ng;function rf(i){return function oY(){if(void 0===Ng&&(Ng=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(Ng=i.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Ng}()?.createHTML(i)||i}function IO(i){return Error(`Unable to find icon with the name "${i}"`)}function RO(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function PO(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class Al{constructor(e,t,n){this.url=e,this.svgText=t,this.options=n}}let Bg=(()=>{class i{constructor(t,n,r,s){this._httpClient=t,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,n,r){return this.addSvgIconInNamespace("",t,n,r)}addSvgIconLiteral(t,n,r){return this.addSvgIconLiteralInNamespace("",t,n,r)}addSvgIconInNamespace(t,n,r,s){return this._addSvgIconConfig(t,n,new Al(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,n,r,s){const o=this._sanitizer.sanitize(jt.HTML,r);if(!o)throw PO(r);const a=rf(o);return this._addSvgIconConfig(t,n,new Al("",a,s))}addSvgIconSet(t,n){return this.addSvgIconSetInNamespace("",t,n)}addSvgIconSetLiteral(t,n){return this.addSvgIconSetLiteralInNamespace("",t,n)}addSvgIconSetInNamespace(t,n,r){return this._addSvgIconSetConfig(t,new Al(n,null,r))}addSvgIconSetLiteralInNamespace(t,n,r){const s=this._sanitizer.sanitize(jt.HTML,n);if(!s)throw PO(n);const o=rf(s);return this._addSvgIconSetConfig(t,new Al("",o,r))}registerFontClassAlias(t,n=t){return this._fontCssClassesByAlias.set(t,n),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const n=this._sanitizer.sanitize(jt.RESOURCE_URL,t);if(!n)throw RO(t);const r=this._cachedIconsByUrl.get(n);return r?Ve(Vg(r)):this._loadSvgIconFromConfig(new Al(t,null)).pipe(zn(s=>this._cachedIconsByUrl.set(n,s)),Z(s=>Vg(s)))}getNamedSvgIcon(t,n=""){const r=LO(n,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(t,o):Su(IO(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Ve(Vg(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Z(n=>Vg(n)))}_getSvgFromIconSetConfigs(t,n){const r=this._extractIconWithNameFromAnySet(t,n);return r?Ve(r):gP(n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Po(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(jt.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Ve(null)})))).pipe(Z(()=>{const o=this._extractIconWithNameFromAnySet(t,n);if(!o)throw IO(t);return o}))}_extractIconWithNameFromAnySet(t,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(zn(n=>t.svgText=n),Z(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Ve(null):this._fetchIcon(t).pipe(zn(n=>t.svgText=n))}_extractSvgIconFromSet(t,n,r){const s=t.querySelector(`[id="${n}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(rf("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const n=this._document.createElement("DIV");n.innerHTML=t;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const n=this._svgElementFromString(rf("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&n.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(t.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(t,n){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),n&&n.viewBox&&t.setAttribute("viewBox",n.viewBox),t}_fetchIcon(t){const{url:n,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function aY(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(jt.RESOURCE_URL,n);if(!o)throw RO(n);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Z(c=>rf(c)),Fg(()=>this._inProgressUrlFetches.delete(o)),HC());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,n,r){return this._svgIconConfigs.set(LO(t,n),r),this}_addSvgIconSetConfig(t,n){const r=this._iconSetConfigs.get(t);return r?r.push(n):this._iconSetConfigs.set(t,[n]),this}_svgElementFromConfig(t){if(!t.svgElement){const n=this._svgElementFromString(t.svgText);this._setSvgAttributes(n,t.options),t.svgElement=n}return t.svgElement}_getIconConfigFromResolvers(t,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,t);if(s)return cY(s)?new Al(s.url,null,s.options):new Al(s,null)}}}return i.\u0275fac=function(t){return new(t||i)(j(AO,8),j(K0),j(gt,8),j(vo))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Vg(i){return i.cloneNode(!0)}function LO(i,e){return i+":"+e}function cY(i){return!(!i.url||!i.options)}const uY=rw(class{constructor(i){this._elementRef=i}}),dY=new pe("MAT_ICON_DEFAULT_OPTIONS"),hY=new pe("mat-icon-location",{providedIn:"root",factory:function fY(){const i=gn(gt),e=i?i.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),OO=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],pY=OO.map(i=>`[${i}]`).join(", "),mY=/^url\(['"]?#(.*?)['"]?\)$/;let FO=(()=>{class i extends uY{constructor(t,n,r,s,o,a){super(t),this._iconRegistry=n,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=J.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=yn(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const n=this._cleanupFontValue(t);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const n=this._cleanupFontValue(t);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const n=t.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let n=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=t.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),n.forEach(r=>t.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const n=t.querySelectorAll(pY),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)OO.forEach(o=>{const a=n[s],l=a.getAttribute(o),c=l?l.match(mY):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[n,r]=this._splitIconName(t);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(dr(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}}return i.\u0275fac=function(t){return new(t||i)(N($t),N(Bg),ua("aria-hidden"),N(hY),N(vo),N(dY,8))},i.\u0275cmp=Yn({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,n){2&t&&(bn("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet),gi("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ut],ngContentSelectors:sY,decls:1,vars:0,template:function(t,n){1&t&&(js(),cr(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),i})(),gY=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[On,On]}),i})();const _Y=["addListener","removeListener"],yY=["addEventListener","removeEventListener"],vY=["on","off"];function cw(i,e,t,n){if(we(t)&&(n=t,t=void 0),n)return cw(i,e,t).pipe(Sx(n));const[r,s]=function wY(i){return we(i.addEventListener)&&we(i.removeEventListener)}(i)?yY.map(o=>a=>i[o](e,a,t)):function bY(i){return we(i.addListener)&&we(i.removeListener)}(i)?_Y.map(kO(i,e)):function xY(i){return we(i.on)&&we(i.off)}(i)?vY.map(kO(i,e)):[];if(!r&&Hy(i))return pi(o=>cw(o,e,t))(zi(i));if(!r)throw new TypeError("Invalid event target");return new dn(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function kO(i,e){return t=>n=>i[t](e,n)}const sf={schedule(i){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:n}=sf;n&&(e=n.requestAnimationFrame,t=n.cancelAnimationFrame);const r=e(s=>{t=void 0,i(s)});return new J(()=>t?.(r))},requestAnimationFrame(...i){const{delegate:e}=sf;return(e?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:e}=sf;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0};new class SY extends Jx{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}}}(class MY extends Qx{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=sf.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,n=0){if(null!=n&&n>0||null==n&&this.delay>0)return super.recycleAsyncId(e,t,n);e.actions.some(r=>r.id===t)||(sf.cancelAnimationFrame(t),e._scheduled=void 0)}});let uw,EY=1;const Ug={};function NO(i){return i in Ug&&(delete Ug[i],!0)}const DY={setImmediate(i){const e=EY++;return Ug[e]=!0,uw||(uw=Promise.resolve()),uw.then(()=>NO(e)&&i()),e},clearImmediate(i){NO(i)}},{setImmediate:TY,clearImmediate:AY}=DY,Hg={setImmediate(...i){const{delegate:e}=Hg;return(e?.setImmediate||TY)(...i)},clearImmediate(i){const{delegate:e}=Hg;return(e?.clearImmediate||AY)(i)},delegate:void 0};new class RY extends Jx{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}}}(class IY extends Qx{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=Hg.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,n=0){if(null!=n&&n>0||null==n&&this.delay>0)return super.recycleAsyncId(e,t,n);e.actions.some(r=>r.id===t)||(Hg.clearImmediate(t),e._scheduled=void 0)}});function BO(i,e=ew){return function LY(i){return k((e,t)=>{let n=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,n){n=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(P(t,c=>{n=!0,r=c,s||zi(i(c)).subscribe(s=P(t,a,l))},()=>{o=!0,(!n||!s||s.closed)&&t.complete()}))})}(()=>function FY(i=0,e,t=S7){let n=-1;return null!=e&&(NC(e)?t=e:n=e),new dn(r=>{let s=function OY(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}(i,e))}let NY=(()=>{class i{constructor(t,n,r){this._ngZone=t,this._platform=n,this._scrolled=new qe,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const n=this.scrollContainers.get(t);n&&(n.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new dn(n=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(BO(t)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ve()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(t,n){const r=this.getAncestorScrollContainers(t);return this.scrolled(n).pipe(di(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,n){let r=bu(n),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>cw(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(t){return new(t||i)(j(Et),j(Ar),j(gt,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),VO=(()=>{class i{constructor(t,n,r){this._platform=t,this._change=new qe,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,n=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(BO(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(t){return new(t||i)(j(Ar),j(Et),j(gt,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),UO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({}),i})(),HO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[Jh,UO,Jh,UO]}),i})();class dw{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class af extends dw{constructor(e,t,n,r){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r}}class hw extends dw{constructor(e,t,n,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class VY extends dw{constructor(e){super(),this.element=e instanceof $t?e.nativeElement:e}}class zg{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof af?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof hw?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof VY?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class UY extends zg{constructor(e,t,n,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(n,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=n.create(e.injector||this._defaultInjector||Mn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(n);-1!==r&&t.remove(r)}),this._attachedPortal=e,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let lf=(()=>{class i extends zg{constructor(t,n,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new Rt,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const n=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=n.createComponent(s,n.length,t.injector||n.injector);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return i.\u0275fac=function(t){return new(t||i)(N(cl),N(Zr),N(gt))},i.\u0275dir=Ne({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ut]}),i})(),cf=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({}),i})();const zO=b7();class HY{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Jn(-this._previousScrollPosition.left),e.style.top=Jn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,n=e.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),zO&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),zO&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,n=this._viewportRuler.getViewportSize();return t.scrollHeight>n.height||t.scrollWidth>n.width}}class zY{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class GO{enable(){}disable(){}attach(){}}function fw(i,e){return e.some(t=>i.bottom<t.top||i.top>t.bottom||i.right<t.left||i.left>t.right)}function WO(i,e){return e.some(t=>i.top<t.top||i.bottom>t.bottom||i.left<t.left||i.right>t.right)}class GY{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();fw(t,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let WY=(()=>{class i{constructor(t,n,r,s){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new GO,this.close=o=>new zY(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new HY(this._viewportRuler,this._document),this.reposition=o=>new GY(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return i.\u0275fac=function(t){return new(t||i)(j(NY),j(VO),j(Et),j(gt))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class pw{constructor(e){if(this.scrollStrategy=new GO,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class jY{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let jO=(()=>{class i{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const n=this._attachedOverlays.indexOf(t);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(t){return new(t||i)(j(gt))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$Y=(()=>{class i extends jO{constructor(t,n){super(t),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(t){return new(t||i)(j(gt),j(Et,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),qY=(()=>{class i extends jO{constructor(t,n,r){super(t),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=El(s)},this._clickListener=s=>{const o=El(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(t){return new(t||i)(j(gt),j(Ar),j(Et,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),mw=(()=>{class i{constructor(t,n){this._platform=n,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||Zx()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(t),Zx()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(t){return new(t||i)(j(gt),j(Ar))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Gg{constructor(e,t,n,r,s,o,a,l,c,u=!1){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new qe,this._attachments=new qe,this._detachments=new qe,this._locationChanges=J.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new qe,this._outsidePointerEvents=new qe,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(dr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Jn(this._config.width),e.height=Jn(this._config.height),e.minWidth=Jn(this._config.minWidth),e.minHeight=Jn(this._config.minHeight),e.maxWidth=Jn(this._config.maxWidth),e.maxHeight=Jn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,n){const r=Tg(t||[]).filter(s=>!!s);r.length&&(n?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Dn(tl(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const $O="cdk-overlay-connected-position-bounding-box",XY=/([A-Za-z%]+)$/;class YY{constructor(e,t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new qe,this._resizeSubscription=J.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add($O),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,n,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,n)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Il(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove($O),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,n){let r,s;if("center"==n.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==n.originX?o:a}return t.left<0&&(r-=t.left),s="center"==n.originY?e.top+e.height/2:"top"==n.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,n){let r,s;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,n,r){const s=XO(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-n.height,m=this._subtractOverflows(s.width,0-o,o+s.width-n.width),p=this._subtractOverflows(s.height,h,f),g=m*p;return{visibleArea:g,isCompletelyWithinViewport:s.width*s.height===g,fitsInViewportVertically:p===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const r=n.bottom-t.y,s=n.right-t.x,o=qO(this._overlayRef.getConfig().minHeight),a=qO(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=XO(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-n.top-e.y,0),c=Math.max(s.left-n.left-e.x,0);let u=0,d=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-n.left-e.x:0,d=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-n.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new jY(e,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=n.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=n.height-e.y+2*this._viewportMargin,s=n.height-a+this._viewportMargin;else{const f=Math.min(n.bottom-e.y+n.top,e.y),m=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-m/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=n.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=n.right-e.x;else{const f=Math.min(n.right-e.x+n.left,e.x),m=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-m/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Jn(n.height),r.top=Jn(n.top),r.bottom=Jn(n.bottom),r.width=Jn(n.width),r.left=Jn(n.left),r.right=Jn(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Jn(s)),o&&(r.maxWidth=Jn(o))}this._lastBoundingBoxSize=n,Il(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Il(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Il(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();Il(n,this._getExactOverlayY(t,e,u)),Il(n,this._getExactOverlayX(t,e,u))}else n.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=Jn(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Jn(o.maxWidth):s&&(n.maxWidth="")),Il(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Jn(s.y),r}_getExactOverlayX(e,t,n){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Jn(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:WO(e,n),isOriginOutsideView:fw(e,n),isOverlayClipped:WO(t,n),isOverlayOutsideView:fw(t,n)}}_subtractOverflows(e,...t){return t.reduce((n,r)=>n-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Tg(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof $t)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function Il(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function qO(i){if("number"!=typeof i&&null!=i){const[e,t]=i.split(XY);return t&&"px"!==t?null:parseFloat(e)}return i||null}function XO(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const YO="cdk-global-overlay-wrapper";class KY{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(YO),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",m="",p="";l?p="flex-start":"center"===u?(p="center",h?m=d:f=d):h?"left"===u||"end"===u?(p="flex-end",f=d):("right"===u||"start"===u)&&(p="flex-start",m=d):"left"===u||"start"===u?(p="flex-start",f=d):("right"===u||"end"===u)&&(p="flex-end",m=d),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":m,t.justifyContent=p,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(YO),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let ZY=(()=>{class i{constructor(t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new KY}flexibleConnectedTo(t){return new YY(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(t){return new(t||i)(j(VO),j(gt),j(Ar),j(mw))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),QY=0,Rl=(()=>{class i{constructor(t,n,r,s,o,a,l,c,u,d,h,f){this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(t){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new pw(t);return o.direction=o.direction||this._directionality.value,new Gg(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const n=this._document.createElement("div");return n.id="cdk-overlay-"+QY++,n.classList.add("cdk-overlay-pane"),t.appendChild(n),n}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(gu)),new UY(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(t){return new(t||i)(j(WY),j(mw),j(cl),j(ZY),j($Y),j(Mn),j(Et),j(gt),j(Pg),j(km),j(qY),j(ma,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();const tK={provide:new pe("cdk-connected-overlay-scroll-strategy"),deps:[Rl],useFactory:function eK(i){return()=>i.scrollStrategies.reposition()}};let KO=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({providers:[Rl,tK],imports:[Jh,cf,HO,HO]}),i})();function gw(i){return new dn(e=>{zi(i()).subscribe(e)})}function nK(i,e){}class Wg{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let ZO=(()=>{class i extends zg{constructor(t,n,r,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=n,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const d=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),d},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),n}attachTemplatePortal(t){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,n){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(n)}_focusByCssSelector(t,n){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,n)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let n=null;if("string"==typeof t?n=this._document.querySelector(t):"boolean"==typeof t?n=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(n=t),this._config.restoreFocus&&n&&"function"==typeof n.focus){const r=Kx(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,n=Kx();return t===n||t.contains(n)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Kx())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return i.\u0275fac=function(t){return new(t||i)(N($t),N(HL),N(gt,8),N(Wg),N(nw),N(Et),N(Gg),N(Qh))},i.\u0275cmp=Yn({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(t,n){if(1&t&&Mo(lf,7),2&t){let r;Sn(r=Cn())&&(n._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,n){2&t&&bn("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[ut],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&pl(0,nK,0,0,"ng-template",0)},dependencies:[lf],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),i})();class _w{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new qe,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(n=>{27===n.keyCode&&!this.disableClose&&!Sl(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const n=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),n.next(e),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const QO=new pe("DialogScrollStrategy"),iK=new pe("DialogData"),rK=new pe("DefaultDialogConfig"),oK={provide:QO,deps:[Rl],useFactory:function sK(i){return()=>i.scrollStrategies.block()}};let aK=0,JO=(()=>{class i{constructor(t,n,r,s,o,a){this._overlay=t,this._injector=n,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new qe,this._afterOpenedAtThisLevel=new qe,this._ariaHiddenElements=new Map,this.afterAllClosed=gw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(xu(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,n){(n={...this._defaultOptions||new Wg,...n}).id=n.id||"cdk-dialog-"+aK++,n.id&&this.getDialogById(n.id);const s=this._getOverlayConfig(n),o=this._overlay.create(s),a=new _w(o,n),l=this._attachContainer(o,a,n);return a.containerInstance=l,this._attachDialogContent(t,a,l,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){yw(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(n=>n.id===t)}ngOnDestroy(){yw(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),yw(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const n=new pw({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(n.backdropClass=t.backdropClass),n}_attachContainer(t,n,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:Wg,useValue:r},{provide:_w,useValue:n},{provide:Gg,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=ZO;const l=new af(a,r.viewContainerRef,Mn.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,n,r,s){if(t instanceof Ds){const o=this._createInjector(s,n,r,void 0);let a={$implicit:s.data,dialogRef:n};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new hw(t,null,a,o))}else{const o=this._createInjector(s,n,r,this._injector),a=r.attachComponentPortal(new af(t,s.viewContainerRef,o,s.componentFactoryResolver));n.componentInstance=a.instance}}_createInjector(t,n,r,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:iK,useValue:t.data},{provide:_w,useValue:n}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(n,t,r)):a.push(...t.providers)),t.direction&&(!o||!o.get(Pg,null,Ke.Optional))&&a.push({provide:Pg,useValue:{value:t.direction,change:Ve()}}),Mn.create({parent:o||s,providers:a})}_removeOpenDialog(t,n){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const n=t.parentElement.children;for(let r=n.length-1;r>-1;r--){const s=n[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return i.\u0275fac=function(t){return new(t||i)(j(Rl),j(Mn),j(rK,8),j(i,12),j(mw),j(QO))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();function yw(i,e){let t=i.length;for(;t--;)e(i[t])}let lK=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({providers:[JO,oK],imports:[KO,cf,iX,cf]}),i})();function cK(i,e){}const uK={bottomSheetState:Z0("state",[Vh("void, hidden",Ao({transform:"translateY(100%)"})),Vh("visible",Ao({transform:"translateY(0%)"})),Uh("visible => void, visible => hidden",CR([Bh(`${QL.COMPLEX} ${ZL.ACCELERATION_CURVE}`),TR("@*",DR(),{optional:!0})])),Uh("void => visible",CR([Bh(`${QL.EXITING} ${ZL.DECELERATION_CURVE}`),TR("@*",DR(),{optional:!0})]))])};let dK=(()=>{class i extends ZO{constructor(t,n,r,s,o,a,l,c,u,d){super(t,n,r,s,o,a,l,d),this._changeDetectorRef=u,this._animationState="void",this._animationStateChanged=new Rt,this._breakpointSubscription=c.observe([Dl_Medium,Dl_Large,"(min-width: 1920px)"]).subscribe(()=>{this._toggleClass("mat-bottom-sheet-container-medium",c.isMatched(Dl_Medium)),this._toggleClass("mat-bottom-sheet-container-large",c.isMatched(Dl_Large)),this._toggleClass("mat-bottom-sheet-container-xlarge",c.isMatched("(min-width: 1920px)"))})}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}exit(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}ngOnDestroy(){super.ngOnDestroy(),this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_onAnimationDone(t){"visible"===t.toState&&this._trapFocus(),this._animationStateChanged.emit(t)}_onAnimationStart(t){this._animationStateChanged.emit(t)}_captureInitialFocus(){}_toggleClass(t,n){this._elementRef.nativeElement.classList.toggle(t,n)}}return i.\u0275fac=function(t){return new(t||i)(N($t),N(HL),N(gt,8),N(Wg),N(nw),N(Et),N(Gg),N(Ig),N(Er),N(Qh))},i.\u0275cmp=Yn({type:i,selectors:[["mat-bottom-sheet-container"]],hostAttrs:["tabindex","-1",1,"mat-bottom-sheet-container"],hostVars:4,hostBindings:function(t,n){1&t&&gm("@state.start",function(s){return n._onAnimationStart(s)})("@state.done",function(s){return n._onAnimationDone(s)}),2&t&&(bn("role",n._config.role)("aria-modal",n._config.isModal)("aria-label",n._config.ariaLabel),vm("@state",n._animationState))},features:[ut],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&pl(0,cK,0,0,"ng-template",0)},dependencies:[lf],styles:[".mat-bottom-sheet-container{padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto}.cdk-high-contrast-active .mat-bottom-sheet-container{outline:1px solid}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:4px;border-top-right-radius:4px}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}"],encapsulation:2,data:{animation:[uK.bottomSheetState]}}),i})(),eF=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[lK,On,cf,On]}),i})();const hK=new pe("MatBottomSheetData");class fK{constructor(){this.data=null,this.hasBackdrop=!0,this.disableClose=!1,this.ariaLabel=null,this.closeOnNavigation=!0,this.autoFocus="dialog",this.restoreFocus=!0}}class tF{constructor(e,t,n){this._ref=e,this._afterOpened=new qe,this.containerInstance=n,this.disableClose=t.disableClose,n._animationStateChanged.pipe(di(r=>"done"===r.phaseName&&"visible"===r.toState),dr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(di(r=>"done"===r.phaseName&&"hidden"===r.toState),dr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._ref.close(this._result)}),e.overlayRef.detachments().subscribe(()=>{this._ref.close(this._result)}),tl(this.backdropClick(),this.keydownEvents().pipe(di(r=>27===r.keyCode))).subscribe(r=>{!this.disableClose&&("keydown"!==r.type||!Sl(r))&&(r.preventDefault(),this.dismiss())})}get instance(){return this._ref.componentInstance}dismiss(e){!this.containerInstance||(this.containerInstance._animationStateChanged.pipe(di(t=>"start"===t.phaseName),dr(1)).subscribe(t=>{this._closeFallbackTimeout=setTimeout(()=>{this._ref.close(this._result)},t.totalTime+100),this._ref.overlayRef.detachBackdrop()}),this._result=e,this.containerInstance.exit(),this.containerInstance=null)}afterDismissed(){return this._ref.closed}afterOpened(){return this._afterOpened}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}}const pK=new pe("mat-bottom-sheet-default-options");let mK=(()=>{class i{constructor(t,n,r,s){this._overlay=t,this._parentBottomSheet=r,this._defaultOptions=s,this._bottomSheetRefAtThisLevel=null,this._dialog=n.get(JO)}get _openedBottomSheetRef(){const t=this._parentBottomSheet;return t?t._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(t){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=t:this._bottomSheetRefAtThisLevel=t}open(t,n){const r={...this._defaultOptions||new fK,...n};let s;return this._dialog.open(t,{...r,disableClose:!0,maxWidth:"100%",container:dK,scrollStrategy:r.scrollStrategy||this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().global().centerHorizontally().bottom("0"),templateContext:()=>({bottomSheetRef:s}),providers:(o,a,l)=>(s=new tF(o,r,l),[{provide:tF,useValue:s},{provide:hK,useValue:r.data}])}),s.afterDismissed().subscribe(()=>{this._openedBottomSheetRef===s&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>s.containerInstance?.enter()),this._openedBottomSheetRef.dismiss()):s.containerInstance.enter(),this._openedBottomSheetRef=s,s}dismiss(t){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(t)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(j(Rl),j(Mn),j(i,12),j(pK,8))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:eF}),i})(),gK=(()=>{class i{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=yn(t)}get inset(){return this._inset}set inset(t){this._inset=yn(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Yn({type:i,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,n){2&t&&(bn("aria-orientation",n.vertical?"vertical":"horizontal"),gi("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,n){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),i})(),nF=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[On,On]}),i})();const iF=["*"],_K=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],yK=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],MK=JL(Tl(class{})),SK=Tl(class{}),sF=new pe("MatList"),CK=new pe("MatNavList");let EK=(()=>{class i extends MK{constructor(t){super(),this._elementRef=t,this._stateChanges=new qe,"action-list"===this._getListType()&&(t.nativeElement.classList.add("mat-action-list"),t.nativeElement.setAttribute("role","group"))}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return i.\u0275fac=function(t){return new(t||i)(N($t))},i.\u0275cmp=Yn({type:i,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[qt([{provide:sF,useExisting:i}]),ut,ji],ngContentSelectors:iF,decls:1,vars:0,template:function(t,n){1&t&&(js(),cr(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),i})(),oF=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),i})(),aF=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),i})(),DK=(()=>{class i extends SK{constructor(t,n,r,s){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new qe,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Dn(this._destroyed)).subscribe(()=>{n.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=yn(t)}ngAfterContentInit(){!function nO(i,e,t="mat"){i.changes.pipe(xu(i)).subscribe(({length:n})=>{ef(e,`${t}-2-line`,!1),ef(e,`${t}-3-line`,!1),ef(e,`${t}-multi-line`,!1),2===n||3===n?ef(e,`${t}-${n}-line`,!0):n>3&&ef(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return i.\u0275fac=function(t){return new(t||i)(N($t),N(Er),N(CK,8),N(sF,8))},i.\u0275cmp=Yn({type:i,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,n,r){if(1&t&&(Zi(r,oF,5),Zi(r,aF,5),Zi(r,tO,5)),2&t){let s;Sn(s=Cn())&&(n._avatar=s.first),Sn(s=Cn())&&(n._icon=s.first),Sn(s=Cn())&&(n._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(t,n){2&t&&gi("mat-list-item-disabled",n.disabled)("mat-list-item-with-avatar",n._avatar||n._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[ut],ngContentSelectors:yK,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,n){1&t&&(js(_K),vt(0,"span",0),Yi(1,"span",1),cr(2),vt(3,"span",2),cr(4,1),Mt(),cr(5,2),Mt()),2&t&&(li(1),Li("matRippleTrigger",n._getHostElement())("matRippleDisabled",n._isRippleDisabled()))},dependencies:[tf],encapsulation:2,changeDetection:0}),i})(),LK=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[iO,ow,On,cO,U0,iO,On,cO,nF]}),i})();function OK(i,e){if(1&i){const t=function qT(){return ue()}();vt(0,"div",2)(1,"button",3),_n("click",function(){return function rE(i){return st.lFrame.contextLView=i,i[8]}(t),function sE(i){return st.lFrame.contextLView=null,i}(yh().action())}),an(2),Mt()()}if(2&i){const t=yh();li(2),bh(t.data.action)}}function FK(i,e){}const cF=new pe("MatSnackBarData");class jg{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const kK=Math.pow(2,31)-1;class vw{constructor(e,t){this._overlayRef=t,this._afterDismissed=new qe,this._afterOpened=new qe,this._onAction=new qe,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,kK))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let NK=(()=>{class i{constructor(t,n){this.snackBarRef=t,this.data=n}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return i.\u0275fac=function(t){return new(t||i)(N(vw),N(cF))},i.\u0275cmp=Yn({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,n){1&t&&(vt(0,"span",0),an(1),Mt(),pl(2,OK,3,1,"div",1)),2&t&&(li(1),bh(n.data.message),li(1),Li("ngIf",n.hasAction))},dependencies:[$m,wO],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),i})();const BK={snackBarState:Z0("state",[Vh("void, hidden",Ao({transform:"scale(0.8)",opacity:0})),Vh("visible",Ao({transform:"scale(1)",opacity:1})),Uh("* => visible",Bh("150ms cubic-bezier(0, 0, 0.2, 1)")),Uh("* => void, * => hidden",Bh("75ms cubic-bezier(0.4, 0.0, 1, 1)",Ao({opacity:0})))])};let VK=(()=>{class i extends zg{constructor(t,n,r,s,o){super(),this._ngZone=t,this._elementRef=n,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=o,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new qe,this._onExit=new qe,this._onEnter=new qe,this._animationState="void",this.attachDomPortal=a=>{this._assertNotAttached();const l=this._portalOutlet.attachDomPortal(a);return this._afterPortalAttached(),l},this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const n=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),n}attachTemplatePortal(t){this._assertNotAttached();const n=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),n}onAnimationEnd(t){const{fromState:n,toState:r}=t;if(("void"===r&&"void"!==n||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(dr(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(r=>t.classList.add(r)):t.classList.add(n))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&n){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),n.appendChild(t),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return i.\u0275fac=function(t){return new(t||i)(N(Et),N($t),N(Er),N(Ar),N(jg))},i.\u0275dir=Ne({type:i,viewQuery:function(t,n){if(1&t&&Mo(lf,7),2&t){let r;Sn(r=Cn())&&(n._portalOutlet=r.first)}},features:[ut]}),i})(),UK=(()=>{class i extends VK{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Mi(i)))(n||i)}}(),i.\u0275cmp=Yn({type:i,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,n){1&t&&gm("@state.done",function(s){return n.onAnimationEnd(s)}),2&t&&vm("@state",n._animationState)},features:[ut],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,n){1&t&&(vt(0,"div",0),pl(1,FK,0,0,"ng-template",1),Mt(),Yi(2,"div")),2&t&&(li(2),bn("aria-live",n._live)("role",n._role))},dependencies:[lf],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[BK.snackBarState]}}),i})(),uF=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[KO,cf,U0,MO,On,On]}),i})();const dF=new pe("mat-snack-bar-default-options",{providedIn:"root",factory:function HK(){return new jg}});let zK=(()=>{class i{constructor(t,n,r,s,o,a){this._overlay=t,this._live=n,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,n){return this._attach(t,n)}openFromTemplate(t,n){return this._attach(t,n)}open(t,n="",r){const s={...this._defaultConfig,...r};return s.data={message:t,action:n},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,n){const s=Mn.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:jg,useValue:n}]}),o=new af(this.snackBarContainerComponent,n.viewContainerRef,s),a=t.attach(o);return a.instance.snackBarConfig=n,a.instance}_attach(t,n){const r={...new jg,...this._defaultConfig,...n},s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new vw(o,s);if(t instanceof Ds){const l=new hw(t,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),c=new af(t,void 0,l),u=o.attachComponentPortal(c);a.instance=u.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Dn(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(t,n){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),n.duration&&n.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(n.duration))}_createOverlay(t){const n=new pw;n.direction=t.direction;let r=this._overlay.position().global();const s="rtl"===t.direction,o="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,a=!o&&"center"!==t.horizontalPosition;return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===t.verticalPosition?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(t,n){return Mn.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:vw,useValue:n},{provide:cF,useValue:t.data}]})}}return i.\u0275fac=function(t){return new(t||i)(j(Rl),j(jL),j(Mn),j(Ig),j(i,12),j(dF))},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})(),GK=(()=>{class i extends zK{constructor(t,n,r,s,o,a){super(t,n,r,s,o,a),this.simpleSnackBarComponent=NK,this.snackBarContainerComponent=UK,this.handsetCssClass="mat-snack-bar-handset"}}return i.\u0275fac=function(t){return new(t||i)(j(Rl),j(jL),j(Mn),j(Ig),j(i,12),j(dF))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:uF}),i})();const $g=se(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function bw(){return k((i,e)=>{let t=null;i._refCount++;const n=P(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(t=null);const r=i._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});i.subscribe(n),n.closed||(t=i.connect())})}class hF extends dn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ud(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new J;const t=this.getSubject();e.add(this.source.subscribe(P(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=J.EMPTY)}return e}refCount(){return bw()(this)}}function Zs(i,e){return k((t,n)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&n.complete();t.subscribe(P(n,l=>{r?.unsubscribe();let c=0;const u=s++;zi(i(l,u)).subscribe(r=P(n,d=>n.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function qg(i){return k((e,t)=>{let n=!1;e.subscribe(P(t,r=>{n=!0,t.next(r)},()=>{n||t.next(i),t.complete()}))})}function fF(i=WK){return k((e,t)=>{let n=!1;e.subscribe(P(t,r=>{n=!0,t.next(r)},()=>n?t.complete():t.error(i())))})}function WK(){return new $g}function Ca(i,e){const t=arguments.length>=2;return n=>n.pipe(i?di((r,s)=>i(r,s,n)):jr,dr(1),t?qg(e):fF(()=>new $g))}function jK(i,e,t,n,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(P(o,u=>{const d=c++;l=a?i(l,u,d):(a=!0,u),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function pF(i,e){return k(jK(i,e,arguments.length>=2,!0))}function xw(i){return i<=0?()=>ho:k((e,t)=>{let n=[];e.subscribe(P(t,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)t.next(r);t.complete()},void 0,()=>{n=null}))})}function mF(i,e){const t=arguments.length>=2;return n=>n.pipe(i?di((r,s)=>i(r,s,n)):jr,xw(1),t?qg(e):fF(()=>new $g))}const xt="primary",uf=Symbol("RouteTitle");class XK{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Cu(i){return new XK(i)}function YK(i,e,t){const n=t.path.split("/");if(n.length>i.length||"full"===t.pathMatch&&(e.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],a=i[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function Qs(i,e){const t=i?Object.keys(i):void 0,n=e?Object.keys(e):void 0;if(!t||!n||t.length!=n.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!gF(i[r],e[r]))return!1;return!0}function gF(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;const t=[...i].sort(),n=[...e].sort();return t.every((r,s)=>n[s]===r)}return i===e}function _F(i){return Array.prototype.concat.apply([],i)}function yF(i){return i.length>0?i[i.length-1]:null}function Ci(i,e){for(const t in i)i.hasOwnProperty(t)&&e(i[t],t)}function Ea(i){return Ub(i)?i:_h(i)?Xn(Promise.resolve(i)):Ve(i)}const QK={exact:function xF(i,e,t){if(!Ll(i.segments,e.segments)||!Xg(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children)if(!i.children[n]||!xF(i.children[n],e.children[n],t))return!1;return!0},subset:wF},vF={exact:function JK(i,e){return Qs(i,e)},subset:function eZ(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>gF(i[t],e[t]))},ignored:()=>!0};function bF(i,e,t){return QK[t.paths](i.root,e.root,t.matrixParams)&&vF[t.queryParams](i.queryParams,e.queryParams)&&!("exact"===t.fragment&&i.fragment!==e.fragment)}function wF(i,e,t){return MF(i,e,e.segments,t)}function MF(i,e,t,n){if(i.segments.length>t.length){const r=i.segments.slice(0,t.length);return!(!Ll(r,t)||e.hasChildren()||!Xg(r,t,n))}if(i.segments.length===t.length){if(!Ll(i.segments,t)||!Xg(i.segments,t,n))return!1;for(const r in e.children)if(!i.children[r]||!wF(i.children[r],e.children[r],n))return!1;return!0}{const r=t.slice(0,i.segments.length),s=t.slice(i.segments.length);return!!(Ll(i.segments,r)&&Xg(i.segments,r,n)&&i.children[xt])&&MF(i.children[xt],e,s,n)}}function Xg(i,e,t){return e.every((n,r)=>vF[t](i[r].parameters,n.parameters))}class Pl{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cu(this.queryParams)),this._queryParamMap}toString(){return iZ.serialize(this)}}class St{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ci(t,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yg(this)}}class df{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Cu(this.parameters)),this._parameterMap}toString(){return DF(this)}}function Ll(i,e){return i.length===e.length&&i.every((t,n)=>t.path===e[n].path)}let SF=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:function(){return new Mw},providedIn:"root"}),i})();class Mw{parse(e){const t=new hZ(e);return new Pl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${hf(e.root,!0)}`,n=function oZ(i){const e=Object.keys(i).map(t=>{const n=i[t];return Array.isArray(n)?n.map(r=>`${Kg(t)}=${Kg(r)}`).join("&"):`${Kg(t)}=${Kg(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${n}${"string"==typeof e.fragment?`#${function rZ(i){return encodeURI(i)}(e.fragment)}`:""}`}}const iZ=new Mw;function Yg(i){return i.segments.map(e=>DF(e)).join("/")}function hf(i,e){if(!i.hasChildren())return Yg(i);if(e){const t=i.children[xt]?hf(i.children[xt],!1):"",n=[];return Ci(i.children,(r,s)=>{s!==xt&&n.push(`${s}:${hf(r,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function nZ(i,e){let t=[];return Ci(i.children,(n,r)=>{r===xt&&(t=t.concat(e(n,r)))}),Ci(i.children,(n,r)=>{r!==xt&&(t=t.concat(e(n,r)))}),t}(i,(n,r)=>r===xt?[hf(i.children[xt],!1)]:[`${r}:${hf(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[xt]?`${Yg(i)}/${t[0]}`:`${Yg(i)}/(${t.join("//")})`}}function CF(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kg(i){return CF(i).replace(/%3B/gi,";")}function Sw(i){return CF(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zg(i){return decodeURIComponent(i)}function EF(i){return Zg(i.replace(/\+/g,"%20"))}function DF(i){return`${Sw(i.path)}${function sZ(i){return Object.keys(i).map(e=>`;${Sw(e)}=${Sw(i[e])}`).join("")}(i.parameters)}`}const aZ=/^[^\/()?;=#]+/;function Qg(i){const e=i.match(aZ);return e?e[0]:""}const lZ=/^[^=?&#]+/,uZ=/^[^&#]+/;class hZ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new St([],{}):new St([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[xt]=new St(e,t)),n}parseSegment(){const e=Qg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new le(4009,!1);return this.capture(e),new df(Zg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Qg(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const r=Qg(this.remaining);r&&(n=r,this.capture(n))}e[Zg(t)]=Zg(n)}parseQueryParam(e){const t=function cZ(i){const e=i.match(lZ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const o=function dZ(i){const e=i.match(uZ);return e?e[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=EF(t),s=EF(n);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Qg(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new le(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=xt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[xt]:new St([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new le(4011,!1)}}function Cw(i){return i.segments.length>0?new St([],{[xt]:i}):i}function Jg(i){const e={};for(const n of Object.keys(i.children)){const s=Jg(i.children[n]);(s.segments.length>0||s.hasChildren())&&(e[n]=s)}return function fZ(i){if(1===i.numberOfChildren&&i.children[xt]){const e=i.children[xt];return new St(i.segments.concat(e.segments),e.children)}return i}(new St(i.segments,e))}function Ol(i){return i instanceof Pl}function gZ(i,e,t,n,r){if(0===t.length)return Eu(e.root,e.root,e.root,n,r);const s=function IF(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new AF(!0,0,i);let e=0,t=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Ci(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new AF(t,e,n)}(t);return s.toRoot()?Eu(e.root,e.root,new St([],{}),n,r):function o(l){const c=function yZ(i,e,t,n){if(i.isAbsolute)return new Du(e.root,!0,0);if(-1===n)return new Du(t,t===e.root,0);return function RF(i,e,t){let n=i,r=e,s=t;for(;s>r;){if(s-=r,n=n.parent,!n)throw new le(4005,!1);r=n.segments.length}return new Du(n,!1,r-s)}(t,n+(ff(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,e,i.snapshot?._urlSegment,l),u=c.processChildren?mf(c.segmentGroup,c.index,s.commands):Dw(c.segmentGroup,c.index,s.commands);return Eu(e.root,c.segmentGroup,u,n,r)}(i.snapshot?._lastPathIndex)}function ff(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function pf(i){return"object"==typeof i&&null!=i&&i.outlets}function Eu(i,e,t,n,r){let o,s={};n&&Ci(n,(l,c)=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=i===e?t:TF(i,e,t);const a=Cw(Jg(o));return new Pl(a,s,r)}function TF(i,e,t){const n={};return Ci(i.children,(r,s)=>{n[s]=r===e?t:TF(r,e,t)}),new St(i.segments,n)}class AF{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&ff(n[0]))throw new le(4003,!1);const r=n.find(pf);if(r&&r!==yF(n))throw new le(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Du{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Dw(i,e,t){if(i||(i=new St([],{})),0===i.segments.length&&i.hasChildren())return mf(i,e,t);const n=function bZ(i,e,t){let n=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=t.length)return s;const o=i.segments[r],a=t[n];if(pf(a))break;const l=`${a}`,c=n<t.length-1?t[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!LF(l,c,o))return s;n+=2}else{if(!LF(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,e,t),r=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new St(i.segments.slice(0,n.pathIndex),{});return s.children[xt]=new St(i.segments.slice(n.pathIndex),i.children),mf(s,0,r)}return n.match&&0===r.length?new St(i.segments,{}):n.match&&!i.hasChildren()?Tw(i,e,t):n.match?mf(i,0,r):Tw(i,e,t)}function mf(i,e,t){if(0===t.length)return new St(i.segments,{});{const n=function vZ(i){return pf(i[0])?i[0].outlets:{[xt]:i}}(t),r={};return Ci(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=Dw(i.children[o],e,s))}),Ci(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new St(i.segments,r)}}function Tw(i,e,t){const n=i.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(pf(s)){const l=xZ(s.outlets);return new St(n,l)}if(0===r&&ff(t[0])){n.push(new df(i.segments[e].path,PF(t[0]))),r++;continue}const o=pf(s)?s.outlets[xt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&ff(a)?(n.push(new df(o,PF(a))),r+=2):(n.push(new df(o,{})),r++)}return new St(n,{})}function xZ(i){const e={};return Ci(i,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Tw(new St([],{}),0,t))}),e}function PF(i){const e={};return Ci(i,(t,n)=>e[n]=`${t}`),e}function LF(i,e,t){return i==t.path&&Qs(e,t.parameters)}class Lo{constructor(e,t){this.id=e,this.url=t}}class Aw extends Lo{constructor(e,t,n="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fl extends Lo{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class e_ extends Lo{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class OF extends Lo{constructor(e,t,n,r){super(e,t),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wZ extends Lo{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MZ extends Lo{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SZ extends Lo{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class CZ extends Lo{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EZ extends Lo{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DZ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class TZ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class AZ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IZ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RZ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PZ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FF{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class kF{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Iw(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){const t=Iw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Rw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Rw(e,this._root).map(t=>t.value)}}function Iw(i,e){if(i===e.value)return e;for(const t of e.children){const n=Iw(i,t);if(n)return n}return null}function Rw(i,e){if(i===e.value)return[e];for(const t of e.children){const n=Rw(i,t);if(n.length)return n.unshift(e),n}return[]}class Oo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Tu(i){const e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}class NF extends kF{constructor(e,t){super(e),this.snapshot=t,Pw(this,e)}toString(){return this.snapshot.toString()}}function BF(i,e){const t=function OZ(i,e){const o=new t_([],{},{},"",{},xt,e,null,i.root,-1,{});return new UF("",new Oo(o,[]))}(i,e),n=new Ir([new df("",{})]),r=new Ir({}),s=new Ir({}),o=new Ir({}),a=new Ir(""),l=new kl(n,r,o,a,s,xt,e,t.root);return l.snapshot=t.root,new NF(new Oo(l,[]),t)}class kl{constructor(e,t,n,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(Z(c=>c[uf]))??Ve(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Z(e=>Cu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Z(e=>Cu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function VF(i,e="emptyOnly"){const t=i.pathFromRoot;let n=0;if("always"!==e)for(n=t.length-1;n>=1;){const r=t[n],s=t[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function FZ(i){return i.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(n))}class t_{constructor(e,t,n,r,s,o,a,l,c,u,d,h){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.[uf],this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._correctedLastPathIndex=h??u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class UF extends kF{constructor(e,t){super(t),this.url=e,Pw(this,t)}toString(){return HF(this._root)}}function Pw(i,e){e.value._routerState=i,e.children.forEach(t=>Pw(i,t))}function HF(i){const e=i.children.length>0?` { ${i.children.map(HF).join(", ")} } `:"";return`${i.value}${e}`}function Lw(i){if(i.snapshot){const e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,Qs(e.queryParams,t.queryParams)||i.queryParams.next(t.queryParams),e.fragment!==t.fragment&&i.fragment.next(t.fragment),Qs(e.params,t.params)||i.params.next(t.params),function KK(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!Qs(i[t],e[t]))return!1;return!0}(e.url,t.url)||i.url.next(t.url),Qs(e.data,t.data)||i.data.next(t.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function Ow(i,e){const t=Qs(i.params,e.params)&&function tZ(i,e){return Ll(i,e)&&i.every((t,n)=>Qs(t.parameters,e[n].parameters))}(i.url,e.url);return t&&!(!i.parent!=!e.parent)&&(!i.parent||Ow(i.parent,e.parent))}function gf(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){const n=t.value;n._futureSnapshot=e.value;const r=function NZ(i,e,t){return e.children.map(n=>{for(const r of t.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return gf(i,n,r);return gf(i,n)})}(i,e,t);return new Oo(n,r)}{if(i.shouldAttach(e.value)){const s=i.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>gf(i,a)),o}}const n=function BZ(i){return new kl(new Ir(i.url),new Ir(i.params),new Ir(i.queryParams),new Ir(i.fragment),new Ir(i.data),i.outlet,i.component,i)}(e.value),r=e.children.map(s=>gf(i,s));return new Oo(n,r)}}const Fw="ngNavigationCancelingError";function zF(i,e){const{redirectTo:t,navigationBehaviorOptions:n}=Ol(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=GF(!1,0,e);return r.url=t,r.navigationBehaviorOptions=n,r}function GF(i,e,t){const n=new Error("NavigationCancelingError: "+(i||""));return n[Fw]=!0,n.cancellationCode=e,t&&(n.url=t),n}function WF(i){return jF(i)&&Ol(i.url)}function jF(i){return i&&i[Fw]}class VZ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new _f,this.attachRef=null}}let _f=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new VZ,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const n_=!1;let $F=(()=>{class i{constructor(t,n,r,s,o){this.parentContexts=t,this.location=n,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Rt,this.deactivateEvents=new Rt,this.attachEvents=new Rt,this.detachEvents=new Rt,this.name=r||xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new le(4012,n_);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new le(4012,n_);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new le(4012,n_);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new le(4013,n_);this._activatedRoute=t;const r=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new UZ(t,a,r.injector);if(n&&function HZ(i){return!!i.resolveComponentFactory}(n)){const c=n.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(t){return new(t||i)(N(_f),N(Zr),ua("name"),N(Er),N(ha))},i.\u0275dir=Ne({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),i})();class UZ{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===kl?this.route:e===_f?this.childContexts:this.parent.get(e,t)}}let kw=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Yn({type:i,selectors:[["ng-component"]],standalone:!0,features:[m1],decls:1,vars:0,template:function(t,n){1&t&&Yi(0,"router-outlet")},dependencies:[$F],encapsulation:2}),i})();function qF(i,e){return i.providers&&!i._injector&&(i._injector=Sm(i.providers,e,`Route: ${i.path}`)),i._injector??e}function Bw(i){const e=i.children&&i.children.map(Bw),t=e?{...i,children:e}:{...i};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=kw),t}function is(i){return i.outlet||xt}function XF(i,e){const t=i.filter(n=>is(n)===e);return t.push(...i.filter(n=>is(n)!==e)),t}function yf(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class $Z{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Lw(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Tu(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Ci(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=Tu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=Tu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=Tu(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new PZ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new IZ(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(Lw(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Lw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=yf(r.snapshot),l=a?.get(cl)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}class YF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class i_{constructor(e,t){this.component=e,this.route=t}}function qZ(i,e,t){const n=i._root;return vf(n,e?e._root:null,t,[n.value])}function Au(i,e){const t=Symbol(),n=e.get(i,t);return n===t?"function"!=typeof i||function pV(i){return null!==Cp(i)}(i)?e.get(i):i:n}function vf(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Tu(e);return i.children.forEach(o=>{(function YZ(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=e?e.value:null,a=t?t.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function KZ(i,e,t){if("function"==typeof t)return t(i,e);switch(t){case"pathParamsChange":return!Ll(i.url,e.url);case"pathParamsOrQueryParamsChange":return!Ll(i.url,e.url)||!Qs(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ow(i,e)||!Qs(i.queryParams,e.queryParams);default:return!Ow(i,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new YF(n)):(s.data=o.data,s._resolvedData=o._resolvedData),vf(i,e,s.component?a?a.children:null:t,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new i_(a.outlet.component,o))}else o&&bf(e,a,r),r.canActivateChecks.push(new YF(n)),vf(i,null,s.component?a?a.children:null:t,n,r)})(o,s[o.value.outlet],t,n.concat([o.value]),r),delete s[o.value.outlet]}),Ci(s,(o,a)=>bf(o,t.getContext(a),r)),r}function bf(i,e,t){const n=Tu(i),r=i.value;Ci(n,(s,o)=>{bf(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new i_(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function xf(i){return"function"==typeof i}function Vw(i){return i instanceof $g||"EmptyError"===i?.name}const r_=Symbol("INITIAL_VALUE");function Iu(){return Zs(i=>tw(i.map(e=>e.pipe(dr(1),xu(r_)))).pipe(Z(e=>{for(const t of e)if(!0!==t){if(t===r_)return r_;if(!1===t||t instanceof Pl)return t}return!0}),di(e=>e!==r_),dr(1)))}function KF(i){return function Od(...i){return Fd(i)}(zn(e=>{if(Ol(e))throw zF(0,e)}),Z(e=>!0===e))}const Uw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZF(i,e,t,n,r){const s=Hw(i,e,t);return s.matched?function fQ(i,e,t,n){const r=e.canMatch;return r&&0!==r.length?Ve(r.map(o=>{const a=Au(o,i);return Ea(function nQ(i){return i&&xf(i.canMatch)}(a)?a.canMatch(e,t):i.runInContext(()=>a(e,t)))})).pipe(Iu(),KF()):Ve(!0)}(n=qF(e,n),e,t).pipe(Z(o=>!0===o?s:{...Uw})):Ve(s)}function Hw(i,e,t){if(""===e.path)return"full"===e.pathMatch&&(i.hasChildren()||t.length>0)?{...Uw}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||YK)(t,i,e);if(!r)return{...Uw};const s={};Ci(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function s_(i,e,t,n,r="corrected"){if(t.length>0&&function gQ(i,e,t){return t.some(n=>o_(i,e,n)&&is(n)!==xt)}(i,t,n)){const o=new St(e,function mQ(i,e,t,n){const r={};r[xt]=n,n._sourceSegment=i,n._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&is(s)!==xt){const o=new St([],{});o._sourceSegment=i,o._segmentIndexShift=e.length,r[is(s)]=o}return r}(i,e,n,new St(t,i.children)));return o._sourceSegment=i,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function _Q(i,e,t){return t.some(n=>o_(i,e,n))}(i,t,n)){const o=new St(i.segments,function pQ(i,e,t,n,r,s){const o={};for(const a of n)if(o_(i,t,a)&&!r[is(a)]){const l=new St([],{});l._sourceSegment=i,l._segmentIndexShift="legacy"===s?i.segments.length:e.length,o[is(a)]=l}return{...r,...o}}(i,e,t,n,i.children,r));return o._sourceSegment=i,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new St(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function o_(i,e,t){return(!(i.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function QF(i,e,t,n){return!!(is(i)===n||n!==xt&&o_(e,t,i))&&("**"===i.path||Hw(e,i,t).matched)}function JF(i,e,t){return 0===e.length&&!i.children[t]}const a_=!1;class l_{constructor(e){this.segmentGroup=e||null}}class ek{constructor(e){this.urlTree=e}}function wf(i){return Su(new l_(i))}function tk(i){return Su(new ek(i))}class xQ{constructor(e,t,n,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=s_(this.urlTree.root,[],[],this.config).segmentGroup,t=new St(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,xt).pipe(Z(s=>this.createUrlTree(Jg(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Po(s=>{if(s instanceof ek)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof l_?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,xt).pipe(Z(r=>this.createUrlTree(Jg(r),e.queryParams,e.fragment))).pipe(Po(r=>{throw r instanceof l_?this.noMatchError(r):r}))}noMatchError(e){return new le(4002,a_)}createUrlTree(e,t,n){const r=Cw(e);return new Pl(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(Z(s=>new St([],s))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return Xn(r).pipe(wa(s=>{const o=n.children[s],a=XF(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Z(l=>({segment:l,outlet:s})))}),pF((s,o)=>(s[o.outlet]=o.segment,s),{}),mF())}expandSegment(e,t,n,r,s,o){return Xn(n).pipe(wa(a=>this.expandSegmentAgainstRoute(e,t,n,a,r,s,o).pipe(Po(c=>{if(c instanceof l_)return Ve(null);throw c}))),Ca(a=>!!a),Po((a,l)=>{if(Vw(a))return JF(t,r,s)?Ve(new St([],{})):wf(t);throw a}))}expandSegmentAgainstRoute(e,t,n,r,s,o,a){return QF(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o):wf(t):wf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?tk(s):this.lineralizeSegments(n,s).pipe(pi(o=>{const a=new St(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Hw(t,r,s);if(!a)return wf(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?tk(d):this.lineralizeSegments(r,d).pipe(pi(h=>this.expandSegment(e,t,n,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,n,r,s){return"**"===n.path?(e=qF(n,e),n.loadChildren?(n._loadedRoutes?Ve({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(e,n)).pipe(Z(a=>(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,new St(r,{})))):Ve(new St(r,{}))):ZF(t,n,r,e).pipe(Zs(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=n._injector??e,n,r).pipe(pi(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:m}=s_(t,a,l,h),p=new St(f.segments,f.children);if(0===m.length&&p.hasChildren())return this.expandChildren(d,h,p).pipe(Z(v=>new St(a,v)));if(0===h.length&&0===m.length)return Ve(new St(a,{}));const g=is(n)===s;return this.expandSegment(d,p,h,m,g?xt:s,!0).pipe(Z(y=>new St(a.concat(y.segments),y.children)))})):wf(t)))}getChildConfig(e,t,n){return t.children?Ve({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ve({routes:t._loadedRoutes,injector:t._loadedInjector}):function hQ(i,e,t,n){const r=e.canLoad;return void 0===r||0===r.length?Ve(!0):Ve(r.map(o=>{const a=Au(o,i);return Ea(function QZ(i){return i&&xf(i.canLoad)}(a)?a.canLoad(e,t):i.runInContext(()=>a(e,t)))})).pipe(Iu(),KF())}(e,t,n).pipe(pi(r=>r?this.configLoader.loadChildren(e,t).pipe(zn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function vQ(i){return Su(GF(a_,3))}())):Ve({routes:[],injector:e})}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Ve(n);if(r.numberOfChildren>1||!r.children[xt])return Su(new le(4e3,a_));r=r.children[xt]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreateUrlTree(e,t,n,r){const s=this.createSegmentGroup(e,t.root,n,r);return new Pl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Ci(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);n[s]=t[a]}else n[s]=r}),n}createSegmentGroup(e,t,n,r){const s=this.createSegments(e,t.segments,n,r);let o={};return Ci(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,n,r)}),new St(s,o)}createSegments(e,t,n,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new le(4001,a_);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}class MQ{}class EQ{constructor(e,t,n,r,s,o,a,l){this.injector=e,this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const e=s_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,xt).pipe(Z(t=>{if(null===t)return null;const n=new t_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Oo(n,t),s=new UF(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,n=VF(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,t,n):this.processSegment(e,t,n,n.segments,r)}processChildren(e,t,n){return Xn(Object.keys(n.children)).pipe(wa(r=>{const s=n.children[r],o=XF(t,r);return this.processSegmentGroup(e,o,s,r)}),pF((r,s)=>r&&s?(r.push(...s),r):null),function $K(i,e=!1){return k((t,n)=>{let r=0;t.subscribe(P(n,s=>{const o=i(s,r++);(o||e)&&n.next(s),!o&&n.complete()}))})}(r=>null!==r),qg(null),mF(),Z(r=>{if(null===r)return null;const s=nk(r);return function DQ(i){i.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,n,r,s){return Xn(t).pipe(wa(o=>this.processSegmentAgainstRoute(o._injector??e,o,n,r,s)),Ca(o=>!!o),Po(o=>{if(Vw(o))return JF(n,r,s)?Ve([]):Ve(null);throw o}))}processSegmentAgainstRoute(e,t,n,r,s){if(t.redirectTo||!QF(t,n,r,s))return Ve(null);let o;if("**"===t.path){const a=r.length>0?yF(r).parameters:{},l=rk(n)+r.length;o=Ve({snapshot:new t_(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ok(t),is(t),t.component??t._loadedComponent??null,t,ik(n),l,ak(t),l),consumedSegments:[],remainingSegments:[]})}else o=ZF(n,t,r,e).pipe(Z(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=rk(n)+l.length;return{snapshot:new t_(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ok(t),is(t),t.component??t._loadedComponent??null,t,ik(n),d,ak(t),d),consumedSegments:l,remainingSegments:c}}));return o.pipe(Zs(a=>{if(null===a)return Ve(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function TQ(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:m}=s_(n,c,u,h.filter(g=>void 0===g.redirectTo),this.relativeLinkResolution);if(0===m.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(Z(g=>null===g?null:[new Oo(l,g)]));if(0===h.length&&0===m.length)return Ve([new Oo(l,[])]);const p=is(t)===s;return this.processSegment(d,h,f,m,p?xt:s).pipe(Z(g=>null===g?null:[new Oo(l,g)]))}))}}function AQ(i){const e=i.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function nk(i){const e=[],t=new Set;for(const n of i){if(!AQ(n)){e.push(n);continue}const r=e.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),t.add(r)):e.push(n)}for(const n of t){const r=nk(n.children);e.push(new Oo(n.value,r))}return e.filter(n=>!t.has(n))}function ik(i){let e=i;for(;e._sourceSegment;)e=e._sourceSegment;return e}function rk(i){let e=i,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function ok(i){return i.data||{}}function ak(i){return i.resolve||{}}function lk(i){return"string"==typeof i.title||null===i.title}function zw(i){return Zs(e=>{const t=i(e);return t?Xn(t).pipe(Z(()=>e)):Ve(e)})}let ck=(()=>{class i{buildTitle(t){let n,r=t.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===xt);return n}getResolvedTitleForRoute(t){return t.data[uf]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:function(){return gn(uk)},providedIn:"root"}),i})(),uk=(()=>{class i extends ck{constructor(t){super(),this.title=t}updateTitle(t){const n=this.buildTitle(t);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(t){return new(t||i)(j(X0))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class NQ{}class VQ extends class BQ{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const u_=new pe("",{providedIn:"root",factory:()=>({})}),Gw=new pe("ROUTES");let Ww=(()=>{class i{constructor(t,n){this.injector=t,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ve(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const n=Ea(t.loadComponent()).pipe(zn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Fg(()=>{this.componentLoaders.delete(t)})),r=new hF(n,()=>new qe).pipe(bw());return this.componentLoaders.set(t,r),r}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Ve({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(Z(a=>{this.onLoadEndListener&&this.onLoadEndListener(n);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=_F(l.get(Gw,[],Ke.Self|Ke.Optional)));return{routes:c.map(Bw),injector:l}}),Fg(()=>{this.childrenLoaders.delete(n)})),o=new hF(s,()=>new qe).pipe(bw());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(t){return Ea(t()).pipe(pi(n=>n instanceof f1||Array.isArray(n)?Ve(n):Xn(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(t){return new(t||i)(j(Mn),j(h0))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class HQ{}class zQ{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function GQ(i){throw i}function WQ(i,e,t){return e.parse("/")}const jQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$Q={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function hk(){const i=gn(SF),e=gn(_f),t=gn(km),n=gn(Mn),r=gn(h0),s=gn(Gw,{optional:!0})??[],o=gn(u_,{optional:!0})??{},a=gn(uk),l=gn(ck,{optional:!0}),c=gn(HQ,{optional:!0}),u=gn(NQ,{optional:!0}),d=new Ei(null,i,e,t,n,r,_F(s));return c&&(d.urlHandlingStrategy=c),u&&(d.routeReuseStrategy=u),d.titleStrategy=l??a,function qQ(i,e){i.errorHandler&&(e.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(e.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(e.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(e.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(e.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(e.canceledNavigationResolution=i.canceledNavigationResolution)}(o,d),d}let Ei=(()=>{class i{constructor(t,n,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new qe,this.errorHandler=GQ,this.malformedUriErrorHandler=WQ,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ve(void 0),this.urlHandlingStrategy=new zQ,this.routeReuseStrategy=new VQ,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(Ww),this.configLoader.onLoadEndListener=h=>this.triggerEvent(new TZ(h)),this.configLoader.onLoadStartListener=h=>this.triggerEvent(new DZ(h)),this.ngModule=o.get(gl),this.console=o.get(XW);const d=o.get(Et);this.isNgZoneEnabled=d instanceof Et&&Et.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function ZK(){return new Pl(new St([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=BF(this.currentUrlTree,this.rootComponentType),this.transitions=new Ir({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const n=this.events;return t.pipe(di(r=>0!==r.id),Z(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Zs(r=>{let s=!1,o=!1;return Ve(r).pipe(zn(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Zs(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return fk(a.source)&&(this.browserUrlTree=a.extractedUrl),Ve(a).pipe(Zs(d=>{const h=this.transitions.getValue();return n.next(new Aw(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?ho:Promise.resolve(d)}),function wQ(i,e,t,n){return Zs(r=>function bQ(i,e,t,n,r){return new xQ(i,e,t,n,r).apply()}(i,e,t,r.extractedUrl,n).pipe(Z(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),zn(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},r.urlAfterRedirects=d.urlAfterRedirects}),function RQ(i,e,t,n,r,s){return pi(o=>function CQ(i,e,t,n,r,s,o="emptyOnly",a="legacy"){return new EQ(i,e,t,n,r,o,a,s).recognize().pipe(Zs(l=>null===l?function SQ(i){return new dn(e=>e.error(i))}(new MQ):Ve(l)))}(i,e,t,o.urlAfterRedirects,n.serialize(o.urlAfterRedirects),n,r,s).pipe(Z(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),zn(d=>{if(r.targetSnapshot=d.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new wZ(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);n.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:m,restoredState:p,extras:g}=a,_=new Aw(h,this.serializeUrl(f),m,p);n.next(_);const y=BF(f,this.rootComponentType).snapshot;return Ve(r={...a,targetSnapshot:y,urlAfterRedirects:f,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),ho}),zn(a=>{const l=new MZ(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Z(a=>r={...a,guards:qZ(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function rQ(i,e){return pi(t=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ve({...t,guardsResult:!0}):function sQ(i,e,t,n){return Xn(i).pipe(pi(r=>function dQ(i,e,t,n,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ve(s.map(a=>{const l=yf(e)??r,c=Au(a,l);return Ea(function tQ(i){return i&&xf(i.canDeactivate)}(c)?c.canDeactivate(i,e,t,n):l.runInContext(()=>c(i,e,t,n))).pipe(Ca())})).pipe(Iu()):Ve(!0)}(r.component,r.route,t,e,n)),Ca(r=>!0!==r,!0))}(o,n,r,i).pipe(pi(a=>a&&function ZZ(i){return"boolean"==typeof i}(a)?function oQ(i,e,t,n){return Xn(e).pipe(wa(r=>Ag(function lQ(i,e){return null!==i&&e&&e(new AZ(i)),Ve(!0)}(r.route.parent,n),function aQ(i,e){return null!==i&&e&&e(new RZ(i)),Ve(!0)}(r.route,n),function uQ(i,e,t){const n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function XZ(i){const e=i.routeConfig?i.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:i,guards:e}:null}(o)).filter(o=>null!==o).map(o=>gw(()=>Ve(o.guards.map(l=>{const c=yf(o.node)??t,u=Au(l,c);return Ea(function eQ(i){return i&&xf(i.canActivateChild)}(u)?u.canActivateChild(n,i):c.runInContext(()=>u(n,i))).pipe(Ca())})).pipe(Iu())));return Ve(s).pipe(Iu())}(i,r.path,t),function cQ(i,e,t){const n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||0===n.length)return Ve(!0);const r=n.map(s=>gw(()=>{const o=yf(e)??t,a=Au(s,o);return Ea(function JZ(i){return i&&xf(i.canActivate)}(a)?a.canActivate(e,i):o.runInContext(()=>a(e,i))).pipe(Ca())}));return Ve(r).pipe(Iu())}(i,r.route,t))),Ca(r=>!0!==r,!0))}(n,s,i,e):Ve(a)),Z(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),zn(a=>{if(r.guardsResult=a.guardsResult,Ol(a.guardsResult))throw zF(0,a.guardsResult);const l=new SZ(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),di(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),zw(a=>{if(a.guards.canActivateChecks.length)return Ve(a).pipe(zn(l=>{const c=new CZ(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Zs(l=>{let c=!1;return Ve(l).pipe(function PQ(i,e){return pi(t=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return Ve(t);let s=0;return Xn(r).pipe(wa(o=>function LQ(i,e,t,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!lk(r)&&(s[uf]=r.title),function OQ(i,e,t,n){const r=function FQ(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return Ve({});const s={};return Xn(r).pipe(pi(o=>function kQ(i,e,t,n){const r=yf(e)??n,s=Au(i,r);return Ea(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(i[o],e,t,n).pipe(Ca(),zn(a=>{s[o]=a}))),xw(1),function qK(i){return Z(()=>i)}(s),Po(o=>Vw(o)?ho:Su(o)))}(s,i,e,n).pipe(Z(o=>(i._resolvedData=o,i.data=VF(i,t).resolve,r&&lk(r)&&(i.data[uf]=r.title),null)))}(o.route,n,i,e)),zn(()=>s++),xw(1),pi(o=>s===r.length?Ve(t):ho))})}(this.paramsInheritanceStrategy,this.ngModule.injector),zn({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),zn(l=>{const c=new EZ(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),zw(a=>{const l=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(zn(d=>{c.component=d}),Z(()=>{})));for(const d of c.children)u.push(...l(d));return u};return tw(l(a.targetSnapshot.root)).pipe(qg(),dr(1))}),zw(()=>this.afterPreactivation()),Z(a=>{const l=function kZ(i,e,t){const n=gf(i,e._root,t?t._root:void 0);return new NF(n,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:l}}),zn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((i,e,t)=>Z(n=>(new $Z(e,n.targetRouterState,n.currentRouterState,t).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),zn({next(){s=!0},complete(){s=!0}}),Fg(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Po(a=>{if(o=!0,jF(a)){WF(a)||(this.navigated=!0,this.restoreHistory(r,!0));const l=new e_(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(n.next(l),WF(a)){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fk(r.source)};this.scheduleNavigation(c,"imperative",null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new OF(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);n.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return ho}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const n="popstate"===t.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,n,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Bw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),gZ(c,this.currentUrlTree,t,d,u??null)}navigateByUrl(t,n={skipLocationChange:!1}){const r=Ol(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(t,n={skipLocationChange:!1}){return function XQ(i){for(let e=0;e<i.length;e++){if(null==i[e])throw new le(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return n}isActive(t,n){let r;if(r=!0===n?{...jQ}:!1===n?{...$Q}:n,Ol(t))return bF(this.currentUrlTree,t,r);const s=this.parseUrl(t);return bF(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((n,r)=>{const s=t[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Fl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,f)=>{a=h,l=f});const u=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),d=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:u,targetPageId:d,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}setBrowserUrl(t,n){const r=this.urlSerializer.serialize(t),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,n,r){const s=new e_(t.id,this.serializeUrl(t.extractedUrl),n,r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,n){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}}return i.\u0275fac=function(t){hb()},i.\u0275prov=xe({token:i,factory:function(){return hk()},providedIn:"root"}),i})();function fk(i){return"imperative"!==i}class pk{}let ZQ=(()=>{class i{constructor(t,n,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(di(t=>t instanceof Fl),wa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=Sm(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Xn(r).pipe(Dc())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(t,n):Ve(null);const s=r.pipe(pi(o=>null===o?Ve(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return n.loadComponent&&!n._loadedComponent?Xn([s,this.loader.loadComponent(n)]).pipe(Dc()):s})}}return i.\u0275fac=function(t){return new(t||i)(j(Ei),j(h0),j(ha),j(pk),j(Ww))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const qw=new pe("");let mk=(()=>{class i{constructor(t,n,r={}){this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Aw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof FF&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.router.triggerEvent(new FF(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(t){hb()},i.\u0275prov=xe({token:i,factory:i.\u0275fac}),i})();function Ru(i,e){return{\u0275kind:i,\u0275providers:e}}function Xw(i){return[{provide:Gw,multi:!0,useValue:i}]}function _k(){const i=gn(Mn);return e=>{const t=i.get(gu);if(e!==t.components[0])return;const n=i.get(Ei),r=i.get(yk);1===i.get(Yw)&&n.initialNavigation(),i.get(vk,null,Ke.Optional)?.setUpPreloading(),i.get(qw,null,Ke.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),r.next(),r.complete()}}const yk=new pe("",{factory:()=>new qe}),Yw=new pe("",{providedIn:"root",factory:()=>1});const vk=new pe("");function tJ(i){return Ru(0,[{provide:vk,useExisting:ZQ},{provide:pk,useExisting:i}])}const bk=new pe("ROUTER_FORROOT_GUARD"),nJ=[km,{provide:SF,useClass:Mw},{provide:Ei,useFactory:hk},_f,{provide:kl,useFactory:function gk(i){return i.routerState.root},deps:[Ei]},Ww];function iJ(){return new cI("Router",Ei)}let xk=(()=>{class i{constructor(t){}static forRoot(t,n){return{ngModule:i,providers:[nJ,[],Xw(t),{provide:bk,useFactory:aJ,deps:[[Ei,new da,new Wc]]},{provide:u_,useValue:n||{}},n?.useHash?{provide:yl,useClass:k8}:{provide:yl,useClass:OI},{provide:qw,useFactory:()=>{const i=gn(Ei),e=gn(e6),t=gn(u_);return t.scrollOffset&&e.setOffset(t.scrollOffset),new mk(i,e,t)}},n?.preloadingStrategy?tJ(n.preloadingStrategy).\u0275providers:[],{provide:cI,multi:!0,useFactory:iJ},n?.initialNavigation?lJ(n):[],[{provide:wk,useFactory:_k},{provide:nI,multi:!0,useExisting:wk}]]}}static forChild(t){return{ngModule:i,providers:[Xw(t)]}}}return i.\u0275fac=function(t){return new(t||i)(j(bk,8))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[kw]}),i})();function aJ(i){return"guarded"}function lJ(i){return["disabled"===i.initialNavigation?Ru(3,[{provide:Tm,multi:!0,useFactory:()=>{const e=gn(Ei);return()=>{e.setUpLocationChangeListener()}}},{provide:Yw,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?Ru(2,[{provide:Yw,useValue:0},{provide:Tm,multi:!0,deps:[Mn],useFactory:e=>{const t=e.get(O8,Promise.resolve());let n=!1;return()=>t.then(()=>new Promise(s=>{const o=e.get(Ei),a=e.get(yk);(function r(s){e.get(Ei).events.pipe(di(a=>a instanceof Fl||a instanceof e_||a instanceof OF),Z(a=>a instanceof Fl||a instanceof e_&&(0===a.code||1===a.code)&&null),di(a=>null!==a),dr(1)).subscribe(()=>{s()})})(()=>{s(!0),n=!0}),o.afterPreactivation=()=>(s(!0),n||a.closed?Ve(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const wk=new pe(""),uJ=[];let dJ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Nt({imports:[xk.forRoot(uJ),xk]}),i})();var Rr=(()=>{return(i=Rr||(Rr={}))[i.DEFAULT=1]="DEFAULT",i[i.DIM=2]="DIM",Rr;var i})();let hJ=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Yn({type:i,selectors:[["app-info-sheet"]],decls:43,vars:0,consts:[[1,"info-row"],[1,"info-block"],["role","list"],["role","listitem"]],template:function(t,n){1&t&&(vt(0,"h2"),an(1," Default Mode\n"),Mt(),vt(2,"div",0)(3,"mat-card",1)(4,"mat-icon"),an(5,"360"),Mt(),vt(6,"h3"),an(7,"Orbit Around"),Mt(),vt(8,"p"),an(9,"Left click + drag or One finger drag (touch)"),Mt()(),vt(10,"mat-card",1)(11,"mat-icon"),an(12,"zoom_in"),Mt(),vt(13,"h3"),an(14,"Zoom"),Mt(),vt(15,"p"),an(16,"Scroll anywhere or Pinch (touch)"),Mt()(),vt(17,"mat-card",1)(18,"mat-icon"),an(19,"open_with"),Mt(),vt(20,"h3"),an(21,"Pan"),Mt(),vt(22,"p"),an(23,"Right click + drag or Two fingers drag (touch)"),Mt()()(),Yi(24,"mat-divider"),vt(25,"h2"),an(26," Measurement Mode\n"),Mt(),vt(27,"mat-card")(28,"mat-list",2)(29,"mat-list-item",3),an(30," Left cick on 'Measurement' button to switch to measurement mode "),Mt(),Yi(31,"mat-divider"),vt(32,"mat-list-item",3),an(33," Left click the 3D model, and the measurement between the two markers will display "),Mt(),Yi(34,"mat-divider"),vt(35,"mat-list-item",3),an(36," Keep clicking to add more measurement markers "),Mt(),Yi(37,"mat-divider"),vt(38,"mat-list-item",3),an(39," When the first marker and the last marker are close enough, the area will display "),Mt(),Yi(40,"mat-divider"),vt(41,"mat-list-item",3),an(42," Press 'Escape' key to clear the measurement "),Mt()()())},dependencies:[xO,FO,EK,DK,gK],styles:[".info-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-around}.info-row[_ngcontent-%COMP%]   .info-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:10px}.mat-icon[_ngcontent-%COMP%]{font-size:26px;display:block}"]}),i})();function Fo(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Sk(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}var Kw,rs,ei,Tn,os,tM,nM,Rk,Ok,Nu,Rf,l,c,u,d,h,f,i,e,t,n,r,s,o,a,m,Pr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Pu={duration:.5,overwrite:!1,delay:0},ss=1e8,ln=1e-8,Zw=2*Math.PI,fJ=Zw/4,pJ=0,Ck=Math.sqrt,mJ=Math.cos,gJ=Math.sin,_i=function(e){return"string"==typeof e},Fn=function(e){return"function"==typeof e},ko=function(e){return"number"==typeof e},Qw=function(e){return typeof e>"u"},Js=function(e){return"object"==typeof e},hr=function(e){return!1!==e},Ek=function(){return typeof window<"u"},p_=function(e){return Fn(e)||_i(e)},Dk="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},ki=Array.isArray,Jw=/(?:-?\.?\d|\.)+/gi,Tk=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Lu=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,eM=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ak=/[+-]=-?[.\d]+/,Ik=/[^,'"\[\]\s]+/gi,_J=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Lr={},m_={},Pk=function(e){return(m_=Bl(e,Lr))&&kr},iM=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},g_=function(e,t){return!t&&console.warn(e)},Lk=function(e,t){return e&&(Lr[e]=t)&&m_&&(m_[e]=t)||Lr},Mf=function(){return 0},yJ={suppressEvents:!0,isStart:!0},Sf={suppressEvents:!0},rM={},Da=[],sM={},Or={},oM={},Fk=30,__=[],aM="",lM=function(e){var n,r,t=e[0];if(Js(t)||Fn(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=__.length;r--&&!__[r].targetTest(t););n=__[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new lN(e[r],n)))||e.splice(r,1);return e},Nl=function(e){return e._gsap||lM(cs(e))[0]._gsap},kk=function(e,t,n){return(n=e[t])&&Fn(n)?e[t]():Qw(n)&&e.getAttribute&&e.getAttribute(t)||n},fr=function(e,t){return(e=e.split(",")).forEach(t)||e},Gn=function(e){return Math.round(1e5*e)/1e5||0},Di=function(e){return Math.round(1e7*e)/1e7||0},Ou=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},vJ=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},y_=function(){var n,r,e=Da.length,t=Da.slice(0);for(sM={},Da.length=0,n=0;n<e;n++)(r=t[n])&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Nk=function(e,t,n,r){Da.length&&y_(),e.render(t,n,r||rs),Da.length&&y_()},Bk=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(Ik).length<2?t:_i(e)?e.trim():e},Vk=function(e){return e},as=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Bl=function(e,t){for(var n in t)e[n]=t[n];return e},Uk=function i(e,t){for(var n in t)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(e[n]=Js(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},v_=function(e,t){var r,n={};for(r in e)r in t||(n[r]=e[r]);return n},Cf=function(e){var t=e.parent||Tn,n=e.keyframes?function(e){return function(t,n){for(var r in n)r in t||"duration"===r&&e||"ease"===r||(t[r]=n[r])}}(ki(e.keyframes)):as;if(hr(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},Hk=function(e,t,n,r,s){void 0===n&&(n="_first"),void 0===r&&(r="_last");var a,o=e[r];if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},b_=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[n]===t&&(e[n]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},No=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},Vl=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},wJ=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},cM=function(e,t,n,r){return e._startAt&&(rs?e._startAt.revert(Sf):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},MJ=function i(e){return!e||e._ts&&i(e.parent)},zk=function(e){return e._repeat?Fu(e._tTime,e=e.duration()+e._rDelay)*e:0},Fu=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},x_=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},w_=function(e){return e._end=Di(e._start+(e._tDur/Math.abs(e._ts||e._rts||ln)||0))},M_=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Di(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),w_(e),n._dirty||Vl(n,e)),e},Gk=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=x_(e.rawTime(),t),(!t._dur||Df(0,t.totalDuration(),n)-t._tTime>ln)&&t.render(n,!0)),Vl(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-ln}},eo=function(e,t,n,r){return t.parent&&No(t),t._start=Di((ko(n)?n:n||e!==Tn?ls(e,n,t):e._time)+t._delay),t._end=Di(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Hk(e,t,"_first","_last",e._sort?"_start":0),uM(t)||(e._recent=t),r||Gk(e,t),e._ts<0&&M_(e,e._tTime),e},Wk=function(e,t){return(Lr.ScrollTrigger||iM("scrollTrigger",t))&&Lr.ScrollTrigger.create(t,e)},jk=function(e,t,n,r){return vM(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&Ok!==Fr.frame?(Da.push(e),e._lazy=[t,r],1):void 0:1},SJ=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},uM=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},ku=function(e,t,n,r){var s=e._repeat,o=Di(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Di(o*(s+1)+e._rDelay*s):o,a>0&&!r?M_(e,e._tTime=e._tDur*a):e.parent&&w_(e),n||Vl(e.parent,e),e},$k=function(e){return e instanceof pr?Vl(e):ku(e,e._dur)},DJ={_start:0,endTime:Mf,totalDuration:Mf},ls=function i(e,t,n){var a,l,c,r=e.labels,s=e._recent||DJ,o=e.duration()>=ss?s.endTime(!1):e._dur;return _i(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c="%"===t.substr(-1),a=t.indexOf("="),"<"===l||">"===l?(a>=0&&(t=t.replace(/=/,"")),("<"===l?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:n).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&n&&(l=l/100*(ki(n)?n[0]:n).totalDuration()),a>1?i(e,t.substr(0,a-1),n)+l:o+l)):null==t?o:+t},Ef=function(e,t,n){var a,l,r=ko(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s];if(r&&(o.duration=t[1]),o.parent=n,e){for(a=o,l=n;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=hr(l.vars.inherit)&&l.parent;o.immediateRender=hr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new hi(t[0],o,t[s+1])},Ta=function(e,t){return e||0===e?t(e):t},Df=function(e,t,n){return n<e?e:n>t?t:n},Ni=function(e,t){return _i(e)&&(t=_J.exec(e))?t[1]:""},dM=[].slice,qk=function(e,t){return e&&Js(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Js(e[0]))&&!e.nodeType&&e!==os},cs=function(e,t,n){return ei&&!t&&ei.selector?ei.selector(e):!_i(e)||n||!tM&&Bu()?ki(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach(function(r){var s;return _i(r)&&!t||qk(r,1)?(s=n).push.apply(s,cs(r)):n.push(r)})||n}(e,n):qk(e)?dM.call(e,0):e?[e]:[]:dM.call((t||nM).querySelectorAll(e),0)},hM=function(e){return e=cs(e)[0]||g_("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return cs(t,n.querySelectorAll?n:n===e?g_("Invalid scope")||nM.createElement("div"):e)}},Xk=function(e){return e.sort(function(){return.5-Math.random()})},Yk=function(e){if(Fn(e))return e;var t=Js(e)?e:{each:e},n=Ul(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,u=r,d=r;return _i(r)?u=d={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],d=r[1]),function(h,f,m){var _,y,v,b,x,M,C,w,S,p=(m||t).length,g=o[p];if(!g){if(!(S="auto"===t.grid?0:(t.grid||[1,ss])[1])){for(C=-ss;C<(C=m[S++].getBoundingClientRect().left)&&S<p;);S--}for(g=o[p]=[],_=l?Math.min(S,p)*u-.5:r%S,y=S===ss?0:l?p*d/S-.5:r/S|0,C=0,w=ss,M=0;M<p;M++)v=M%S-_,b=y-(M/S|0),g[M]=x=c?Math.abs("y"===c?b:v):Ck(v*v+b*b),x>C&&(C=x),x<w&&(w=x);"random"===r&&Xk(g),g.max=C-w,g.min=w,g.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(S>p?p-1:c?"y"===c?p/S:S:Math.max(S,p/S))||0)*("edges"===r?-1:1),g.b=p<0?s-p:s,g.u=Ni(t.amount||t.each)||0,n=n&&p<0?sN(n):n}return p=(g[h]-g.min)/g.max||0,Di(g.b+(n?n(p):p)*g.v)+g.u}},fM=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=Di(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(ko(n)?0:Ni(n))}},Kk=function(e,t){var r,s,n=ki(e);return!n&&Js(e)&&(r=n=e.radius||ss,e.values?(e=cs(e.values),(s=!ko(e[0]))&&(r*=r)):e=fM(e.increment)),Ta(t,n?Fn(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var h,f,a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=ss,u=0,d=e.length;d--;)(h=s?(h=e[d].x-a)*h+(f=e[d].y-l)*f:Math.abs(e[d]-a))<c&&(c=h,u=d);return u=!r||c<=r?e[u]:o,s||u===o||ko(o)?u:u+Ni(o)}:fM(e))},Zk=function(e,t,n,r){return Ta(ki(e)?!t:!0===n?!!(n=0):!r,function(){return ki(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r})},Qk=function(e,t,n){return Ta(n,function(r){return e[~~t(r)]})},Tf=function(e){for(var r,s,o,a,t=0,n="";~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a="["===e.charAt(r+7),s=e.substr(r+7,o-r-7).match(a?Ik:Jw),n+=e.substr(t,r-t)+Zk(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},Jk=function(e,t,n,r,s){var o=t-e,a=r-n;return Ta(s,function(l){return n+((l-e)/o*a||0)})},eN=function(e,t,n){var o,a,l,r=e.labels,s=ss;for(o in r)(a=r[o]-t)<0==!!n&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},us=function(e,t,n){var l,c,u,r=e.vars,s=r[t],o=ei,a=e._ctx;if(s)return l=r[t+"Params"],c=r.callbackScope||e,n&&Da.length&&y_(),a&&(ei=a),u=l?s.apply(c,l):s.call(c),ei=o,u},Af=function(e){return No(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&us(e,"onInterrupt"),e},kJ=function(e){var t=(e=!e.name&&e.default||e).name,n=Fn(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:Mf,render:wM,add:_M,kill:QJ,modifier:ZJ,rawVars:0},o={targetTest:0,get:0,getSetter:xM,aliases:{},register:0};if(Bu(),e!==r){if(Or[t])return;as(r,as(v_(e,s),o)),Bl(r.prototype,Bl(s,v_(e,o))),Or[r.prop=t]=r,e.targetTest&&(__.push(r),rM[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Lk(t,r),e.register&&e.register(kr,r,mr)},cn=255,If={aqua:[0,cn,cn],lime:[0,cn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,cn],navy:[0,0,128],white:[cn,cn,cn],olive:[128,128,0],yellow:[cn,cn,0],orange:[cn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[cn,0,0],pink:[cn,192,203],cyan:[0,cn,cn],transparent:[cn,cn,cn,0]},pM=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*cn+.5|0},tN=function(e,t,n){var s,o,a,l,c,u,d,h,f,m,r=e?ko(e)?[e>>16,e>>8&cn,e&cn]:0:If.black;if(!r){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),If[e])r=If[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(r=parseInt(e.substr(1,6),16))>>16,r>>8&cn,r&cn,parseInt(e.substr(7),16)/255];r=[(e=parseInt(e.substr(1),16))>>16,e>>8&cn,e&cn]}else if("hsl"===e.substr(0,3))if(r=m=e.match(Jw),t){if(~e.indexOf("="))return r=e.match(Tk),n&&r.length<4&&(r[3]=1),r}else l=+r[0]%360/360,c=+r[1]/100,s=2*(u=+r[2]/100)-(o=u<=.5?u*(c+1):u+c-u*c),r.length>3&&(r[3]*=1),r[0]=pM(l+1/3,s,o),r[1]=pM(l,s,o),r[2]=pM(l-1/3,s,o);else r=e.match(Jw)||If.transparent;r=r.map(Number)}return t&&!m&&(s=r[0]/cn,o=r[1]/cn,a=r[2]/cn,u=((d=Math.max(s,o,a))+(h=Math.min(s,o,a)))/2,d===h?l=c=0:(f=d-h,c=u>.5?f/(2-d-h):f/(d+h),l=d===s?(o-a)/f+(o<a?6:0):d===o?(a-s)/f+2:(s-o)/f+4,l*=60),r[0]=~~(l+.5),r[1]=~~(100*c+.5),r[2]=~~(100*u+.5)),n&&r.length<4&&(r[3]=1),r},nN=function(e){var t=[],n=[],r=-1;return e.split(Aa).forEach(function(s){var o=s.match(Lu)||[];t.push.apply(t,o),n.push(r+=o.length+1)}),t.c=n,t},iN=function(e,t,n){var l,c,u,d,r="",s=(e+r).match(Aa),o=t?"hsla(":"rgba(",a=0;if(!s)return e;if(s=s.map(function(h){return(h=tN(h,t,1))&&o+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),n&&(u=nN(e),(l=n.c).join(r)!==u.c.join(r)))for(d=(c=e.replace(Aa,"1").split(Lu)).length-1;a<d;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:n).shift());if(!c)for(d=(c=e.split(Aa)).length-1;a<d;a++)r+=c[a]+s[a];return r+c[d]},Aa=function(){var e,i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in If)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),NJ=/hsl[a]?\(/,rN=function(e){var n,t=e.join(" ");if(Aa.lastIndex=0,Aa.test(t))return n=NJ.test(t),e[1]=iN(e[1],n),e[0]=iN(e[0],n,nN(e[1])),!0},Fr=(i=Date.now,e=500,t=33,n=i(),r=n,o=s=1e3/240,m=function p(g){var v,b,x,M,_=i()-r,y=!0===g;if(_>e&&(n+=_-t),((v=(x=(r+=_)-n)-o)>0||y)&&(M=++d.frame,h=x-1e3*d.time,d.time=x/=1e3,o+=v+(v>=s?4:s-v),b=1),y||(l=c(p)),b)for(f=0;f<a.length;f++)a[f](x,h,M,g)},d={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(g){return h/(1e3/(g||60))},wake:function(){Rk&&(!tM&&Ek()&&(os=tM=window,nM=os.document||{},Lr.gsap=kr,(os.gsapVersions||(os.gsapVersions=[])).push(kr.version),Pk(m_||os.GreenSockGlobals||!os.gsap&&os||{}),u=os.requestAnimationFrame),l&&d.sleep(),c=u||function(g){return setTimeout(g,o-1e3*d.time+1|0)},Rf=1,m(2))},sleep:function(){(u?os.cancelAnimationFrame:clearTimeout)(l),Rf=0,c=Mf},lagSmoothing:function(g,_){e=g||1/ln,t=Math.min(_,e,0)},fps:function(g){o=1e3*d.time+(s=1e3/(g||240))},add:function(g,_,y){var v=_?function(b,x,M,C){g(b,x,M,C),d.remove(v)}:g;return d.remove(g),a[y?"unshift":"push"](v),Bu(),v},remove:function(g,_){~(_=a.indexOf(g))&&a.splice(_,1)&&f>=_&&f--},_listeners:a=[]}),Bu=function(){return!Rf&&Fr.wake()},Pt={},BJ=/^[\d.\-M][\d.\-,\s]/,VJ=/["']/g,UJ=function(e){for(var a,l,c,t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,o=n.length;s<o;s++)l=n[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(VJ,"").trim():+c,r=l.substr(a+1).trim();return t},sN=function(e){return function(t){return 1-e(1-t)}},oN=function i(e,t){for(var r,n=e._first;n;)n instanceof pr?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},Ul=function(e,t){return e&&(Fn(e)?e:Pt[e]||function(e){var t=(e+"").split("("),n=Pt[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[UJ(t[1])]:function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)}(e).split(",").map(Bk)):Pt._CE&&BJ.test(e)?Pt._CE("",e):n}(e))||t},Hl=function(e,t,n,r){void 0===n&&(n=function(l){return 1-t(1-l)}),void 0===r&&(r=function(l){return l<.5?t(2*l)/2:1-t(2*(1-l))/2});var o,s={easeIn:t,easeOut:n,easeInOut:r};return fr(e,function(a){for(var l in Pt[a]=Lr[a]=s,Pt[o=a.toLowerCase()]=n,s)Pt[o+("easeIn"===l?".in":"easeOut"===l?".out":".inOut")]=Pt[a+"."+l]=s[l]}),s},aN=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},mM=function i(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),o=s/Zw*(Math.asin(1/r)||0),a=function(u){return 1===u?1:r*Math.pow(2,-10*u)*gJ((u-o)*s)+1},l="out"===e?a:"in"===e?function(c){return 1-a(1-c)}:aN(a);return s=Zw/s,l.config=function(c,u){return i(e,c,u)},l},gM=function i(e,t){void 0===t&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},r="out"===e?n:"in"===e?function(s){return 1-n(1-s)}:aN(n);return r.config=function(s){return i(e,s)},r};fr("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;Hl(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(2*n,t)/2:1-Math.pow(2*(1-n),t)/2})}),Pt.Linear.easeNone=Pt.none=Pt.Linear.easeIn,Hl("Elastic",mM("in"),mM("out"),mM()),function(i,e){var s=function(a){return a<.36363636363636365?i*a*a:a<.7272727272727273?i*Math.pow(a-1.5/e,2)+.75:a<.9090909090909092?i*(a-=2.25/e)*a+.9375:i*Math.pow(a-2.625/e,2)+.984375};Hl("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),Hl("Expo",function(i){return i?Math.pow(2,10*(i-1)):0}),Hl("Circ",function(i){return-(Ck(1-i*i)-1)}),Hl("Sine",function(i){return 1===i?1:1-mJ(i*fJ)}),Hl("Back",gM("in"),gM("out"),gM()),Pt.SteppedEase=Pt.steps=Lr.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0;return function(a){return((r*Df(0,.99999999,a)|0)+s)*n}}},Pu.ease=Pt["quad.out"],fr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return aM+=i+","+i+"Params,"});var lN=function(e,t){this.id=pJ++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:kk,this.set=t?t.getSetter:xM},Vu=function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ku(this,+t.duration,1,1),this.data=t.data,ei&&(this._ctx=ei,ei.data.push(this)),Rf||Fr.wake()}var e=i.prototype;return e.delay=function(n){return n||0===n?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,ku(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(Bu(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(M_(this,n),!s._dp||s.parent||Gk(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&eo(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===ln||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),Nk(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+zk(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?n:1-n)+zk(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?Fu(this._tTime,s)+1:1},e.timeScale=function(n){if(!arguments.length)return this._rts===-ln?0:this._rts;if(this._rts===n)return this;var r=this.parent&&this._ts?x_(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-ln?0:this._rts,this.totalTime(Df(-this._delay,this._tDur,r),!0),w_(this),wJ(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Bu(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==ln&&(this._tTime-=ln)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&eo(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(hr(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?x_(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){void 0===n&&(n=Sf);var r=rs;return rs=n,this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents),"nested"!==this.data&&No(this),rs=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this.vars.immediateRender?-1:s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,$k(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,$k(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(ls(this,n),hr(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,hr(r))},e.play=function(n,r){return null!=n&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return null!=n&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return null!=n&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-ln:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-ln,this},e.isActive=function(){var s,n=this.parent||this._dp,r=this._start;return!(n&&!(this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-ln))},e.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),"onUpdate"===n&&(this._onUpdate=r)):delete o[n],this):o[n]},e.then=function(n){var r=this;return new Promise(function(s){var o=Fn(n)?n:Vk,a=function(){var c=r.then;r.then=null,Fn(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&1===r.totalProgress()&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Af(this)},i}();as(Vu.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ln,_prom:0,_ps:!1,_rts:1});var pr=function(i){function e(n,r){var s;return void 0===n&&(n={}),(s=i.call(this,n)||this).labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=hr(n.sortChildren),Tn&&eo(n.parent||Tn,Fo(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&Wk(Fo(s),n.scrollTrigger),s}Sk(e,i);var t=e.prototype;return t.to=function(r,s,o){return Ef(0,arguments,this),this},t.from=function(r,s,o){return Ef(1,arguments,this),this},t.fromTo=function(r,s,o,a){return Ef(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,Cf(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new hi(r,s,ls(this,o),1),this},t.call=function(r,s,o){return eo(this,hi.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new hi(r,o,ls(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,u){return o.runBackwards=1,Cf(o).immediateRender=hr(o.immediateRender),this.staggerTo(r,s,o,a,l,c,u)},t.staggerFromTo=function(r,s,o,a,l,c,u,d){return a.startAt=o,Cf(a).immediateRender=hr(a.immediateRender),this.staggerTo(r,s,a,l,c,u,d)},t.render=function(r,s,o){var h,f,m,p,g,_,y,v,b,x,M,C,a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:Di(r),d=this._zTime<0!=r<0&&(this._initted||!c);if(this!==Tn&&u>l&&r>=0&&(u=l),u!==this._tTime||o||d){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),h=u,b=this._start,_=!(v=this._ts),d&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(M=this._yoyo,g=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(100*g+r,s,o);if(h=Di(u%g),u===l?(p=this._repeat,h=c):((p=~~(u/g))&&p===u/g&&(h=c,p--),h>c&&(h=c)),x=Fu(this._tTime,g),!a&&this._tTime&&x!==p&&(x=p),M&&1&p&&(h=c-h,C=1),p!==x&&!this._lock){var w=M&&1&x,S=w===(M&&1&p);if(p<x&&(w=!w),a=w?0:c,this._lock=1,this.render(a||(C?0:Di(p*g)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&us(this,"onRepeat"),this.vars.repeatRefresh&&!C&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,S&&(this._lock=2,this.render(a=w?c:-1e-4,!0),this.vars.repeatRefresh&&!C&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;oN(this,C)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,Di(a),Di(h)),y&&(u-=h-(h=y._start))),this._tTime=u,this._time=h,this._act=!v,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&h&&!s&&(us(this,"onStart"),this._tTime!==u))return this;if(h>=a&&r>=0)for(f=this._first;f;){if(m=f._next,(f._act||h>=f._start)&&f._ts&&y!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(h-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(h-f._start)*f._ts,s,o),h!==this._time||!this._ts&&!_){y=0,m&&(u+=this._zTime=-ln);break}}f=m}else{o=o||rs,f=this._last;for(var I=r<0?r:h;f;){if(m=f._prev,(f._act||I<=f._end)&&f._ts&&y!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(I-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(I-f._start)*f._ts,s,o),h!==this._time||!this._ts&&!_){y=0,m&&(u+=this._zTime=I?-ln:ln);break}}f=m}}if(y&&!s&&(this.pause(),y.render(h>=a?0:-ln)._zTime=h>=a?1:-1,this._ts))return this._start=b,w_(this),this.render(r,s,o);this._onUpdate&&!s&&us(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(b===this._start||Math.abs(v)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&No(this,1),!s&&(!(r<0)||a)&&(u||a||!l)&&(us(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(ko(s)||(s=ls(this,s,r)),!(r instanceof Vu)){if(ki(r))return r.forEach(function(a){return o.add(a,s)}),this;if(_i(r))return this.addLabel(r,s);if(!Fn(r))return this;r=hi.delayedCall(0,r)}return this!==r?eo(this,r,s):this},t.getChildren=function(r,s,o,a){void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-ss);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof hi?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return _i(r)?this.removeLabel(r):Fn(r)?this.killTweensOf(r):(b_(this,r),r===this._recent&&(this._recent=this._last),Vl(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Di(Fr.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=ls(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=hi.delayedCall(0,s||Mf,o);return a.data="isPause",this._hasPause=1,eo(this,a,ls(this,r))},t.removePause=function(r){var s=this._first;for(r=ls(this,r);s;)s._start===r&&"isPause"===s.data&&No(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)Ia!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var u,o=[],a=cs(r),l=this._first,c=ko(s);l;)l instanceof hi?vJ(l._targets,a)&&(c?(!Ia||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var f,o=this,a=ls(o,r),c=s.startAt,u=s.onStart,d=s.onStartParams,h=s.immediateRender,m=hi.to(o,as({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||ln,onStart:function(){if(o.pause(),!f){var g=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());m._dur!==g&&ku(m,g,0,1).render(m._time,!0,!0),f=1}u&&u.apply(m,d||[])}},s));return h?m.render(0):m},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,as({startAt:{time:ls(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return void 0===r&&(r=this._time),eN(this,ls(this,r))},t.previousLabel=function(r){return void 0===r&&(r=this._time),eN(this,ls(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+ln)},t.shiftChildren=function(r,s,o){void 0===o&&(o=0);for(var c,a=this._first,l=this.labels;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return Vl(this)},t.invalidate=function(){var r=this._first;for(this._lock=0;r;)r.invalidate(),r=r._next;return i.prototype.invalidate.call(this)},t.clear=function(r){void 0===r&&(r=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Vl(this)},t.totalDuration=function(r){var c,u,d,s=0,o=this,a=o._last,l=ss;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,eo(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;ku(o,o===Tn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(Tn._ts&&(Nk(Tn,x_(r,Tn)),Ok=Fr.frame),Fr.frame>=Fk){Fk+=Pr.autoSleep||120;var s=Tn._first;if((!s||!s._ts)&&Pr.autoSleep&&Fr._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Fr.sleep()}}},e}(Vu);as(pr.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ia,yM,GJ=function(e,t,n,r,s,o,a){var d,h,f,m,p,g,_,y,l=new mr(this._pt,e,t,0,1,pN,null,s),c=0,u=0;for(l.b=n,l.e=r,n+="",(_=~(r+="").indexOf("random("))&&(r=Tf(r)),o&&(o(y=[n,r],e,t),n=y[0],r=y[1]),h=n.match(eM)||[];d=eM.exec(r);)m=d[0],p=r.substring(c,d.index),f?f=(f+1)%5:"rgba("===p.substr(-5)&&(f=1),m!==h[u++]&&(g=parseFloat(h[u-1])||0,l._pt={_next:l._pt,p:p||1===u?p:",",s:g,c:"="===m.charAt(1)?Ou(g,m)-g:parseFloat(m)-g,m:f&&f<4?Math.round:0},c=eM.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(Ak.test(r)||_)&&(l.e=0),this._pt=l,l},_M=function(e,t,n,r,s,o,a,l,c,u){Fn(r)&&(r=r(s||0,e,o));var m,d=e[t],h="get"!==n?n:Fn(d)?c?e[t.indexOf("set")||!Fn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():d,f=Fn(d)?c?XJ:hN:bM;if(_i(r)&&(~r.indexOf("random(")&&(r=Tf(r)),"="===r.charAt(1)&&((m=Ou(h,r)+(Ni(h)||0))||0===m)&&(r=m)),!u||h!==r||yM)return isNaN(h*r)||""===r?(!d&&!(t in e)&&iM(t,r),GJ.call(this,e,t,h,r,f,l||Pr.stringFilter,c)):(m=new mr(this._pt,e,t,+h||0,r-(h||0),"boolean"==typeof d?KJ:fN,0,f),c&&(m.fp=c),a&&m.modifier(a,this,e),this._pt=m)},cN=function(e,t,n,r,s,o){var a,l,c,u;if(Or[e]&&!1!==(a=new Or[e]).init(s,a.rawVars?t[e]:function(e,t,n,r,s){if(Fn(e)&&(e=Pf(e,s,t,n,r)),!Js(e)||e.style&&e.nodeType||ki(e)||Dk(e))return _i(e)?Pf(e,s,t,n,r):e;var a,o={};for(a in e)o[a]=Pf(e[a],s,t,n,r);return o}(t[e],r,s,o,n),n,r,o)&&(n._pt=l=new mr(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==Nu))for(c=n._ptLookup[n._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},vM=function i(e,t){var M,C,w,S,I,W,K,B,L,X,O,G,H,n=e.vars,r=n.ease,s=n.startAt,o=n.immediateRender,a=n.lazy,l=n.onUpdate,c=n.onUpdateParams,u=n.callbackScope,d=n.runBackwards,h=n.yoyoEase,f=n.keyframes,m=n.autoRevert,p=e._dur,g=e._startAt,_=e._targets,y=e.parent,v=y&&"nested"===y.data?y.vars.targets:_,b="auto"===e._overwrite&&!Kw,x=e.timeline;if(x&&(!f||!r)&&(r="none"),e._ease=Ul(r,Pu.ease),e._yEase=h?sN(Ul(!0===h?r:h,Pu.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!x&&!!n.runBackwards,!x||f&&!n.stagger){if(G=(B=_[0]?Nl(_[0]).harness:0)&&n[B.prop],M=v_(n,rM),g&&(t<0&&d&&o&&!m?g.render(-1,!0):g.revert(d&&p?Sf:yJ),g._lazy=0),s){if(No(e._startAt=hi.set(_,as({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:hr(a),startAt:null,delay:0,onUpdate:l,onUpdateParams:c,callbackScope:u,stagger:0},s))),t<0&&(rs||!o&&!m)&&e._startAt.revert(Sf),o&&p&&t<=0)return void(t&&(e._zTime=t))}else if(d&&p&&!g)if(t&&(o=!1),w=as({overwrite:!1,data:"isFromStart",lazy:o&&hr(a),immediateRender:o,stagger:0,parent:y},M),G&&(w[B.prop]=G),No(e._startAt=hi.set(_,w)),t<0&&(rs?e._startAt.revert(Sf):e._startAt.render(-1,!0)),e._zTime=t,o){if(!t)return}else i(e._startAt,ln);for(e._pt=e._ptCache=0,a=p&&hr(a)||a&&!p,C=0;C<_.length;C++){if(K=(I=_[C])._gsap||lM(_)[C]._gsap,e._ptLookup[C]=X={},sM[K.id]&&Da.length&&y_(),O=v===_?C:v.indexOf(I),B&&!1!==(L=new B).init(I,G||M,e,O,v)&&(e._pt=S=new mr(e._pt,I,L.name,0,1,L.render,L,0,L.priority),L._props.forEach(function(F){X[F]=S}),L.priority&&(W=1)),!B||G)for(w in M)Or[w]&&(L=cN(w,M,e,O,I,v))?L.priority&&(W=1):X[w]=S=_M.call(e,I,w,"get",M[w],O,v,0,n.stringFilter);e._op&&e._op[C]&&e.kill(I,e._op[C]),b&&e._pt&&(Ia=e,Tn.killTweensOf(I,X,e.globalTime(t)),H=!e.parent,Ia=0),e._pt&&a&&(sM[K.id]=1)}W&&mN(e),e._onInit&&e._onInit(e)}e._onUpdate=l,e._initted=(!e._op||e._pt)&&!H,f&&t<=0&&x.render(ss,!0,!0)},qJ=function(e,t,n,r){var o,a,s=t.ease||r||"power1.inOut";if(ki(t))a=n[e]||(n[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=n[o]||(n[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:t[o],e:s})},Pf=function(e,t,n,r,s){return Fn(e)?e.call(t,n,r,s):_i(e)&&~e.indexOf("random(")?Tf(e):e},uN=aM+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",dN={};fr(uN+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return dN[i]=1});var hi=function(i){function e(n,r,s,o){var a;"number"==typeof r&&(s.duration=r,r=s,s=null);var b,x,M,C,w,S,I,W,l=(a=i.call(this,o?r:Cf(r))||this).vars,c=l.duration,u=l.delay,d=l.immediateRender,h=l.stagger,f=l.overwrite,m=l.keyframes,p=l.defaults,g=l.scrollTrigger,_=l.yoyoEase,y=r.parent||Tn,v=(ki(n)||Dk(n)?ko(n[0]):"length"in r)?[n]:cs(n);if(a._targets=v.length?lM(v):g_("GSAP target "+n+" not found. https://greensock.com",!Pr.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,m||h||p_(c)||p_(u)){if(r=a.vars,(b=a.timeline=new pr({data:"nested",defaults:p||{},targets:y&&"nested"===y.data?y.vars.targets:v})).kill(),b.parent=b._dp=Fo(a),b._start=0,h||p_(c)||p_(u)){if(C=v.length,I=h&&Yk(h),Js(h))for(w in h)~uN.indexOf(w)&&(W||(W={}),W[w]=h[w]);for(x=0;x<C;x++)(M=v_(r,dN)).stagger=0,_&&(M.yoyoEase=_),W&&Bl(M,W),S=v[x],M.duration=+Pf(c,Fo(a),x,S,v),M.delay=(+Pf(u,Fo(a),x,S,v)||0)-a._delay,!h&&1===C&&M.delay&&(a._delay=u=M.delay,a._start+=u,M.delay=0),b.to(S,M,I?I(x,S,v):0),b._ease=Pt.none;b.duration()?c=u=0:a.timeline=0}else if(m){Cf(as(b.vars.defaults,{ease:"none"})),b._ease=Ul(m.ease||r.ease||"none");var B,L,X,K=0;if(ki(m))m.forEach(function(O){return b.to(v,O,">")}),b.duration();else{for(w in M={},m)"ease"===w||"easeEach"===w||qJ(w,m[w],M,m.easeEach);for(w in M)for(B=M[w].sort(function(O,G){return O.t-G.t}),K=0,x=0;x<B.length;x++)(X={ease:(L=B[x]).e,duration:(L.t-(x?B[x-1].t:0))/100*c})[w]=L.v,b.to(v,X,K),K+=X.duration;b.duration()<c&&b.to({},{duration:c-b.duration()})}}c||a.duration(c=b.duration())}else a.timeline=0;return!0===f&&!Kw&&(Ia=Fo(a),Tn.killTweensOf(v),Ia=0),eo(y,Fo(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(d||!c&&!m&&a._start===Di(y._time)&&hr(d)&&MJ(Fo(a))&&"nested"!==y.data)&&(a._tTime=-ln,a.render(Math.max(0,-u))),g&&Wk(Fo(a),g),a}Sk(e,i);var t=e.prototype;return t.render=function(r,s,o){var h,f,m,p,g,_,y,v,b,a=this._time,l=this._tDur,c=this._dur,u=r<0,d=r>l-ln&&!u?l:r<ln?0:r;if(c){if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(h=d,v=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*p+r,s,o);if(h=Di(d%p),d===l?(m=this._repeat,h=c):((m=~~(d/p))&&m===d/p&&(h=c,m--),h>c&&(h=c)),(_=this._yoyo&&1&m)&&(b=this._yEase,h=c-h),g=Fu(this._tTime,p),h===a&&!o&&this._initted)return this._tTime=d,this;m!==g&&(v&&this._yEase&&oN(v,_),this.vars.repeatRefresh&&!_&&!this._lock&&(this._lock=o=1,this.render(Di(p*m),!0).invalidate()._lock=0))}if(!this._initted){if(jk(this,u?r:h,o,s))return this._tTime=0,this;if(a!==this._time)return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(b||this._ease)(h/c),this._from&&(this.ratio=y=1-y),h&&!a&&!s&&(us(this,"onStart"),this._tTime!==d))return this;for(f=this._pt;f;)f.r(y,f.d),f=f._next;v&&v.render(r<0?r:!h&&_?-ln:v._dur*v._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&cM(this,r,0,o),us(this,"onUpdate")),this._repeat&&m!==g&&this.vars.onRepeat&&!s&&this.parent&&us(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&cM(this,r,0,!0),(r||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&No(this,1),!s&&(!u||a)&&(d||a)&&(us(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var c,u,d,s=e.ratio,o=t<0||!t&&(!e._start&&SJ(e)&&(e._initted||!uM(e))||(e._ts<0||e._dp._ts<0)&&!uM(e))?0:1,a=e._rDelay,l=0;if(a&&e._repeat&&(l=Df(0,e._tDur,t),u=Fu(l,a),e._yoyo&&1&u&&(o=1-o),u!==Fu(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||rs||r||e._zTime===ln||!t&&e._zTime){if(!e._initted&&jk(e,t,r,n))return;for(d=e._zTime,e._zTime=t||(n?ln:0),n||(n=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&cM(e,t,0,!0),e._onUpdate&&!n&&us(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&us(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&No(e,1),!n&&!rs&&(us(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,r,s,o);return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),i.prototype.invalidate.call(this)},t.resetTo=function(r,s,o,a){Rf||Fr.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||vM(this,l),function(e,t,n,r,s,o,a){var c,u,d,h,l=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!l)for(l=e._ptCache[t]=[],d=e._ptLookup,h=e._targets.length;h--;){if((c=d[h][t])&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return yM=1,e.vars[t]="+=0",vM(e,a),yM=0,1;l.push(c)}for(h=l.length;h--;)(c=(u=l[h])._pt||u).s=!r&&0!==r||s?c.s+(r||0)+o*c.c:r,c.c=n-c.s,u.e&&(u.e=Gn(n)+Ni(u.e)),u.b&&(u.b=c.s+Ni(u.b))}(this,r,s,o,a,this._ease(l/this._dur),l)?this.resetTo(r,s,o,a):(M_(this,0),this.parent||Hk(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(void 0===s&&(s="all"),!(r||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?Af(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Ia&&!0!==Ia.vars.overwrite)._first||Af(this),this.parent&&o!==this.timeline.totalDuration()&&ku(this,this._dur*this.timeline._tDur/o,0,1),this}var d,h,f,m,p,g,_,a=this._targets,l=r?cs(r):a,c=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(a,l))return"all"===s&&(this._pt=0),Af(this);for(d=this._op=this._op||[],"all"!==s&&(_i(s)&&(p={},fr(s,function(y){return p[y]=1}),s=p),s=function(e,t){var s,o,a,l,n=e[0]?Nl(e[0]).harness:0,r=n&&n.aliases;if(!r)return t;for(o in s=Bl({},t),r)if(o in s)for(a=(l=r[o].split(",")).length;a--;)s[l[a]]=s[o];return s}(a,s)),_=a.length;_--;)if(~l.indexOf(a[_]))for(p in h=c[_],"all"===s?(d[_]=s,m=h,f={}):(f=d[_]=d[_]||{},m=s),m)(g=h&&h[p])&&((!("kill"in g.d)||!0===g.d.kill(p))&&b_(this,g,"_pt"),delete h[p]),"all"!==f&&(f[p]=1);return this._initted&&!this._pt&&u&&Af(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Ef(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return Ef(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return Tn.killTweensOf(r,s,o)},e}(Vu);as(hi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),fr("staggerTo,staggerFrom,staggerFromTo",function(i){hi[i]=function(){var e=new pr,t=dM.call(arguments,0);return t.splice("staggerFromTo"===i?5:4,0,0),e[i].apply(e,t)}});var bM=function(e,t,n){return e[t]=n},hN=function(e,t,n){return e[t](n)},XJ=function(e,t,n,r){return e[t](r.fp,n)},YJ=function(e,t,n){return e.setAttribute(t,n)},xM=function(e,t){return Fn(e[t])?hN:Qw(e[t])&&e.setAttribute?YJ:bM},fN=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},KJ=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},pN=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},wM=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},ZJ=function(e,t,n,r){for(var o,s=this._pt;s;)o=s._next,s.p===r&&s.modifier(e,t,n),s=o},QJ=function(e){for(var n,r,t=this._pt;t;)r=t._next,t.p===e&&!t.op||t.op===e?b_(this,t,"_pt"):t.dep||(n=1),t=r;return!n},JJ=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},mN=function(e){for(var n,r,s,o,t=e._pt;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=n}e._pt=s},mr=function(){function i(t,n,r,s,o,a,l,c,u){this.t=n,this.s=s,this.c=o,this.p=r,this.r=a||fN,this.d=l||this,this.set=c||bM,this.pr=u||0,this._next=t,t&&(t._prev=this)}return i.prototype.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=JJ,this.m=n,this.mt=s,this.tween=r},i}();fr(aM+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return rM[i]=1}),Lr.TweenMax=Lr.TweenLite=hi,Lr.TimelineLite=Lr.TimelineMax=pr,Tn=new pr({sortChildren:!1,defaults:Pu,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Pr.stringFilter=rN;var Uu=[],S_={},eee=[],gN=0,MM=function(e){return(S_[e]||eee).map(function(t){return t()})},SM=function(){var e=Date.now(),t=[];e-gN>2&&(MM("matchMediaInit"),Uu.forEach(function(n){var o,a,l,c,r=n.queries,s=n.conditions;for(a in r)(o=os.matchMedia(r[a]).matches)&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(n.revert(),l&&t.push(n))}),MM("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n)}),gN=e,MM("matchMedia"))},_N=function(){function i(t,n){this.selector=n&&hM(n),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=i.prototype;return e.add=function(n,r,s){Fn(n)&&(s=r,r=n,n=Fn);var o=this,a=function(){var d,c=ei,u=o.selector;return c&&c!==o&&c.data.push(o),s&&(o.selector=hM(s)),ei=o,d=r.apply(o,arguments),Fn(d)&&o._r.push(d),ei=c,o.selector=u,o.isReverted=!1,d};return o.last=a,n===Fn?a(o):n?o[n]=a:a},e.ignore=function(n){var r=ei;ei=null,n(this),ei=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof hi&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n?(this.getTweens().map(function(a){return{g:a.globalTime(0),t:a}}).sort(function(a,l){return l.g-a.g||-1}).forEach(function(a){return a.t.revert(n)}),this.data.forEach(function(a){return!(a instanceof Vu)&&a.revert&&a.revert(n)}),this._r.forEach(function(a){return a(n,s)}),this.isReverted=!0):this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r){var o=Uu.indexOf(this);~o&&Uu.splice(o,1)}},e.revert=function(n){this.kill(n||{})},i}(),tee=function(){function i(t){this.contexts=[],this.scope=t}var e=i.prototype;return e.add=function(n,r,s){Js(n)||(n={matches:n});var l,c,u,o=new _N(0,s||this.scope),a=o.conditions={};for(c in this.contexts.push(o),r=o.add("onMatch",r),o.queries=n,n)"all"===c?u=1:(l=os.matchMedia(n[c]))&&(Uu.indexOf(o)<0&&Uu.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(SM):l.addEventListener("change",SM));return u&&r(o),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),C_={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return kJ(r)})},timeline:function(e){return new pr(e)},getTweensOf:function(e,t){return Tn.getTweensOf(e,t)},getProperty:function(e,t,n,r){_i(e)&&(e=cs(e)[0]);var s=Nl(e||{}).get,o=n?Vk:Bk;return"native"===n&&(n=""),e&&(t?o((Or[t]&&Or[t].get||s)(e,t,n,r)):function(a,l,c){return o((Or[a]&&Or[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,n){if((e=cs(e)).length>1){var r=e.map(function(u){return kr.quickSetter(u,t,n)}),s=r.length;return function(u){for(var d=s;d--;)r[d](u)}}var o=Or[t],a=Nl(e=e[0]||{}),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var d=new o;Nu._pt=0,d.init(e,n?u+n:u,Nu,0,[e]),d.render(1,d),Nu._pt&&wM(1,Nu)}:a.set(e,l);return o?c:function(u){return c(e,l,n?u+n:u,a,1)}},quickTo:function(e,t,n){var r,s=kr.to(e,Bl(((r={})[t]="+=0.1",r.paused=!0,r),n||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return Tn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ul(e.ease,Pu.ease)),Uk(Pu,e||{})},config:function(e){return Uk(Pr,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,s=e.defaults,o=e.extendTimeline;(e.plugins||"").split(",").forEach(function(a){return a&&!Or[a]&&!Lr[a]&&g_(t+" effect requires "+a+" plugin.")}),oM[t]=function(a,l,c){return n(cs(a),as(l||{},s),c)},o&&(pr.prototype[t]=function(a,l,c){return this.add(oM[t](a,Js(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Pt[e]=Ul(t)},parseEase:function(e,t){return arguments.length?Ul(e,t):Pt},getById:function(e){return Tn.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,s,n=new pr(e);for(n.smoothChildTiming=hr(e.smoothChildTiming),Tn.remove(n),n._dp=0,n._time=n._tTime=Tn._time,r=Tn._first;r;)s=r._next,(t||!(!r._dur&&r instanceof hi&&r.vars.onComplete===r._targets[0]))&&eo(n,r,r._start-r._delay),r=s;return eo(Tn,n,0),n},context:function(e,t){return e?new _N(e,t):ei},matchMedia:function(e){return new tee(e)},matchMediaRefresh:function(){return Uu.forEach(function(e){var n,r,t=e.conditions;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||SM()},addEventListener:function(e,t){var n=S_[e]||(S_[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=S_[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:function i(e,t,n){var r=t-e;return ki(e)?Qk(e,i(0,e.length),t):Ta(n,function(s){return(r+(s-e)%r)%r+e})},wrapYoyo:function i(e,t,n){var r=t-e,s=2*r;return ki(e)?Qk(e,i(0,e.length-1),t):Ta(n,function(o){return e+((o=(s+(o-e)%s)%s||0)>r?s-o:o)})},distribute:Yk,random:Zk,snap:Kk,normalize:function(e,t,n){return Jk(e,t,0,1,n)},getUnit:Ni,clamp:function(e,t,n){return Ta(n,function(r){return Df(e,t,r)})},splitColor:tN,toArray:cs,selector:hM,mapRange:Jk,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,o){return o(s)},r)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||Ni(n))}},interpolate:function i(e,t,n,r){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var l,c,u,d,h,o=_i(e),a={};if(!0===n&&(r=1)&&(n=null),o)e={p:e},t={p:t};else if(ki(e)&&!ki(t)){for(u=[],h=(d=e.length)-2,c=1;c<d;c++)u.push(i(e[c-1],e[c]));d--,s=function(m){m*=d;var p=Math.min(h,~~m);return u[p](m-p)},n=t}else r||(e=Bl(ki(e)?[]:{},e));if(!u){for(l in t)_M.call(a,e,l,"get",t[l]);s=function(m){return wM(m,a)||(o?e.p:e)}}}return Ta(n,s)},shuffle:Xk},install:Pk,effects:oM,ticker:Fr,updateRoot:pr.updateRoot,plugins:Or,globalTimeline:Tn,core:{PropTween:mr,globals:Lk,Tween:hi,Timeline:pr,Animation:Vu,getCache:Nl,_removeLinkedListItem:b_,reverting:function(){return rs},context:function(e){return e&&ei&&(ei.data.push(e),e._ctx=ei),ei},suppressOverwrites:function(e){return Kw=e}}};fr("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return C_[i]=hi[i]}),Fr.add(pr.updateRoot),Nu=C_.to({},{duration:0});var nee=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},CM=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(_i(s)&&(l={},fr(s,function(u){return l[u]=1}),s=l),t){for(c in l={},s)l[c]=t(s[c]);s=l}!function(e,t){var r,s,o,n=e._targets;for(r in t)for(s=n.length;s--;)(o=e._ptLookup[s][r])&&(o=o.d)&&(o._pt&&(o=nee(o,r)),o&&o.modifier&&o.modifier(t[r],e,n[s],r))}(a,s)}}}},kr=C_.registerPlugin({name:"attr",init:function(e,t,n,r,s){var o,a,l;for(o in this.tween=n,t)l=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o)).op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)rs?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},CM("roundProps",fM),CM("modifiers"),CM("snap",Kk))||C_;hi.version=pr.version=kr.version="3.11.1",Rk=1,Ek()&&Bu();var yN,Ra,Hu,EM,zl,vN,DM,CN,Bo={},Gl=180/Math.PI,zu=Math.PI/180,Gu=Math.atan2,bN=1e8,TM=/([A-Z])/g,oee=/(left|right|width|margin|padding|x)/i,aee=/[\s,\(]\S/,Vo={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},AM=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},lee=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},cee=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},uee=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},xN=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},wN=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},dee=function(e,t,n){return e.style[t]=n},hee=function(e,t,n){return e.style.setProperty(t,n)},fee=function(e,t,n){return e._gsap[t]=n},pee=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},mee=function(e,t,n,r,s){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},gee=function(e,t,n,r,s){var o=e._gsap;o[t]=n,o.renderTransform(s,o)},kn="transform",Rs=kn+"Origin",_ee=function(e){var t=this,n=this.target,r=n.style;if(e in Bo){if(this.tfm=this.tfm||{},"transform"!==e&&(~(e=Vo[e]||e).indexOf(",")?e.split(",").forEach(function(s){return t.tfm[s]=Uo(n,s)}):this.tfm[e]=n._gsap.x?n._gsap[e]:Uo(n,e)),this.props.indexOf(kn)>=0)return;n._gsap.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Rs,"")),e=kn}r&&this.props.push(e,r[e])},MN=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},yee=function(){var s,o,e=this.props,t=this.target,n=t.style,r=t._gsap;for(s=0;s<e.length;s+=2)e[s+1]?n[e[s]]=e[s+1]:n.removeProperty(e[s].replace(TM,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(s=DM())&&!s.isStart&&!n[kn]&&(MN(n),r.uncache=1)}},SN=function(e,t){var n={target:e,props:[],revert:yee,save:_ee};return t&&t.split(",").forEach(function(r){return n.save(r)}),n},IM=function(e,t){var n=Ra.createElementNS?Ra.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ra.createElement(e);return n.style?n:Ra.createElement(e)},to=function i(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(TM,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&i(e,Wu(t)||t,1)||""},EN="O,Moz,ms,Ms,Webkit".split(","),Wu=function(e,t,n){var s=(t||zl).style,o=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(EN[o]+e in s););return o<0?null:(3===o?"ms":o>=0?EN[o]:"")+e},RM=function(){typeof window<"u"&&window.document&&(yN=window,Hu=(Ra=yN.document).documentElement,zl=IM("div")||{style:{}},IM("div"),kn=Wu(kn),Rs=kn+"Origin",zl.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",CN=!!Wu("perspective"),DM=kr.core.reverting,EM=1)},PM=function i(e){var o,t=IM("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(Hu.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),Hu.removeChild(t),this.style.cssText=s,o},DN=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},TN=function(e){var t;try{t=e.getBBox()}catch{t=PM.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===PM||(t=PM.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+DN(e,["x","cx","x1"])||0,y:+DN(e,["y","cy","y1"])||0,width:0,height:0}},AN=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!TN(e))},Lf=function(e,t){if(t){var n=e.style;t in Bo&&t!==Rs&&(t=kn),n.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),n.removeProperty(t.replace(TM,"-$1").toLowerCase())):n.removeAttribute(t)}},Pa=function(e,t,n,r,s,o){var a=new mr(e._pt,t,n,0,1,o?wN:xN);return e._pt=a,a.b=r,a.e=s,e._props.push(n),a},IN={deg:1,rad:1,turn:1},vee={grid:1,flex:1},La=function i(e,t,n,r){var m,p,g,_,s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",a=zl.style,l=oee.test(t),c="svg"===e.tagName.toLowerCase(),u=(c?"client":"offset")+(l?"Width":"Height"),d=100,h="px"===r,f="%"===r;return r===o||!s||IN[r]||IN[o]?s:("px"!==o&&!h&&(s=i(e,t,n,"px")),_=e.getCTM&&AN(e),!f&&"%"!==o||!Bo[t]&&!~t.indexOf("adius")?(a[l?"width":"height"]=d+(h?o:r),p=~t.indexOf("adius")||"em"===r&&e.appendChild&&!c?e:e.parentNode,_&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===Ra||!p.appendChild)&&(p=Ra.body),(g=p._gsap)&&f&&g.width&&l&&g.time===Fr.time&&!g.uncache?Gn(s/g.width*d):((f||"%"===o)&&!vee[to(p,"display")]&&(a.position=to(e,"position")),p===e&&(a.position="static"),p.appendChild(zl),m=zl[u],p.removeChild(zl),a.position="absolute",l&&f&&((g=Nl(p)).time=Fr.time,g.width=p[u]),Gn(h?m*s/d:m&&s?d/m*s:0))):(m=_?e.getBBox()[l?"width":"height"]:e[u],Gn(f?s/m*d:s/100*m)))},Uo=function(e,t,n,r){var s;return EM||RM(),t in Vo&&"transform"!==t&&~(t=Vo[t]).indexOf(",")&&(t=t.split(",")[0]),Bo[t]&&"transform"!==t?(s=Ff(e,r),s="transformOrigin"!==t?s[t]:s.svg?s.origin:D_(to(e,Rs))+" "+s.zOrigin+"px"):(!(s=e.style[t])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=E_[t]&&E_[t](e,t,n)||to(e,t)||kk(e,t)||("opacity"===t?1:0)),n&&!~(s+"").trim().indexOf(" ")?La(e,t,s,n)+n:s},bee=function(e,t,n,r){if(!n||"none"===n){var s=Wu(t,e,1),o=s&&to(e,s,1);o&&o!==n?(t=s,n=o):"borderColor"===t&&(n=to(e,"borderTopColor"))}var u,d,h,f,m,p,g,_,y,v,b,a=new mr(this._pt,e.style,t,0,1,pN),l=0,c=0;if(a.b=n,a.e=r,n+="","auto"==(r+="")&&(e.style[t]=r,r=to(e,t)||r,e.style[t]=n),rN(u=[n,r]),r=u[1],h=(n=u[0]).match(Lu)||[],(r.match(Lu)||[]).length){for(;d=Lu.exec(r);)g=d[0],y=r.substring(l,d.index),m?m=(m+1)%5:("rgba("===y.substr(-5)||"hsla("===y.substr(-5))&&(m=1),g!==(p=h[c++]||"")&&(f=parseFloat(p)||0,b=p.substr((f+"").length),"="===g.charAt(1)&&(g=Ou(f,g)+b),_=parseFloat(g),v=g.substr((_+"").length),l=Lu.lastIndex-v.length,v||(v=v||Pr.units[t]||b,l===r.length&&(r+=v,a.e+=v)),b!==v&&(f=La(e,t,p,v)||0),a._pt={_next:a._pt,p:y||1===c?y:",",s:f,c:_-f,m:m&&m<4||"zIndex"===t?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r="display"===t&&"none"===r?wN:xN;return Ak.test(r)&&(a.e=0),this._pt=a,a},RN={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},xee=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return("top"===n||"bottom"===n||"left"===r||"right"===r)&&(e=n,n=r,r=e),t[0]=RN[n]||n,t[1]=RN[r]||r,t.join(" ")},wee=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var a,l,c,n=t.t,r=n.style,s=t.u,o=n._gsap;if("all"===s||!0===s)r.cssText="",l=1;else for(c=(s=s.split(",")).length;--c>-1;)Bo[a=s[c]]&&(l=1,a="transformOrigin"===a?Rs:kn),Lf(n,a);l&&(Lf(n,kn),o&&(o.svg&&n.removeAttribute("transform"),Ff(n,1),o.uncache=1,MN(r)))}},E_={clearProps:function(e,t,n,r,s){if("isFromStart"!==s.data){var o=e._pt=new mr(e._pt,t,n,0,0,wee);return o.u=r,o.pr=-10,o.tween=s,e._props.push(n),1}}},Of=[1,0,0,1,0,0],PN={},LN=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},ON=function(e){var t=to(e,kn);return LN(t)?Of:t.substr(7).match(Tk).map(Gn)},LM=function(e,t){var o,a,l,c,n=e._gsap||Nl(e),r=e.style,s=ON(e);return n.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(l=e.transform.baseVal.consolidate().matrix).a,l.b,l.c,l.d,l.e,l.f]).join(",")?Of:s:(s===Of&&!e.offsetParent&&e!==Hu&&!n.svg&&(l=r.display,r.display="block",(!(o=e.parentNode)||!e.offsetParent)&&(c=1,a=e.nextElementSibling,Hu.appendChild(e)),s=ON(e),l?r.display=l:Lf(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):Hu.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},OM=function(e,t,n,r,s,o){var M,C,S,a=e._gsap,l=s||LM(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,h=a.yOffset||0,f=l[0],m=l[1],p=l[2],g=l[3],_=l[4],y=l[5],v=t.split(" "),b=parseFloat(v[0])||0,x=parseFloat(v[1])||0;n?l!==Of&&(C=f*g-m*p)&&(S=b*(-m/C)+x*(f/C)-(f*y-m*_)/C,b=b*(g/C)+x*(-p/C)+(p*y-g*_)/C,x=S):(b=(M=TN(e)).x+(~v[0].indexOf("%")?b/100*M.width:b),x=M.y+(~(v[1]||v[0]).indexOf("%")?x/100*M.height:x)),r||!1!==r&&a.smooth?(a.xOffset=d+((_=b-c)*f+(y=x-u)*p)-_,a.yOffset=h+(_*m+y*g)-y):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=x,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!n,e.style[Rs]="0px 0px",o&&(Pa(o,a,"xOrigin",c,b),Pa(o,a,"yOrigin",u,x),Pa(o,a,"xOffset",d,a.xOffset),Pa(o,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",b+" "+x)},Ff=function(e,t){var n=e._gsap||new lN(e);if("x"in n&&!t&&!n.uncache)return n;var u,d,h,f,m,p,g,_,y,v,b,x,M,C,w,S,I,W,K,B,L,X,O,G,H,F,z,de,ee,me,fe,He,r=e.style,s=n.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=to(e,Rs)||"0";return u=d=h=p=g=_=y=v=b=0,f=m=1,n.svg=!(!e.getCTM||!AN(e)),l.translate&&(("none"!==l.translate||"none"!==l.scale||"none"!==l.rotate)&&(r[kn]=("none"!==l.translate?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==l.rotate?"rotate("+l.rotate+") ":"")+("none"!==l.scale?"scale("+l.scale.split(" ").join(",")+") ":"")+l[kn]),r.scale=r.rotate=r.translate="none"),C=LM(e,n.svg),n.svg&&(n.uncache?(H=e.getBBox(),c=n.xOrigin-H.x+"px "+(n.yOrigin-H.y)+"px",G=""):G=!t&&e.getAttribute("data-svg-origin"),OM(e,G||c,!!G||n.originIsAbsolute,!1!==n.smooth,C)),x=n.xOrigin||0,M=n.yOrigin||0,C!==Of&&(W=C[0],K=C[1],B=C[2],L=C[3],u=X=C[4],d=O=C[5],6===C.length?(f=Math.sqrt(W*W+K*K),m=Math.sqrt(L*L+B*B),p=W||K?Gu(K,W)*Gl:0,(y=B||L?Gu(B,L)*Gl+p:0)&&(m*=Math.abs(Math.cos(y*zu))),n.svg&&(u-=x-(x*W+M*B),d-=M-(x*K+M*L))):(me=C[7],z=C[8],de=C[9],fe=C[11],u=C[12],d=C[13],h=C[14],g=(w=Gu(He=C[6],ee=C[10]))*Gl,w&&(G=X*(S=Math.cos(-w))+z*(I=Math.sin(-w)),H=O*S+de*I,F=He*S+ee*I,z=X*-I+z*S,de=O*-I+de*S,ee=He*-I+ee*S,fe=me*-I+fe*S,X=G,O=H,He=F),_=(w=Gu(-B,ee))*Gl,w&&(S=Math.cos(-w),fe=L*(I=Math.sin(-w))+fe*S,W=G=W*S-z*I,K=H=K*S-de*I,B=F=B*S-ee*I),p=(w=Gu(K,W))*Gl,w&&(G=W*(S=Math.cos(w))+K*(I=Math.sin(w)),H=X*S+O*I,K=K*S-W*I,O=O*S-X*I,W=G,X=H),g&&Math.abs(g)+Math.abs(p)>359.9&&(g=p=0,_=180-_),f=Gn(Math.sqrt(W*W+K*K+B*B)),m=Gn(Math.sqrt(O*O+He*He)),w=Gu(X,O),y=Math.abs(w)>2e-4?w*Gl:0,b=fe?1/(fe<0?-fe:fe):0),n.svg&&(G=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!LN(to(e,kn)),G&&e.setAttribute("transform",G))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(f*=-1,y+=p<=0?180:-180,p+=p<=0?180:-180):(m*=-1,y+=y<=0?180:-180)),t=t||n.uncache,n.x=u-((n.xPercent=u&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=d-((n.yPercent=d&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=h+o,n.scaleX=Gn(f),n.scaleY=Gn(m),n.rotation=Gn(p)+a,n.rotationX=Gn(g)+a,n.rotationY=Gn(_)+a,n.skewX=y+a,n.skewY=v+a,n.transformPerspective=b+o,(n.zOrigin=parseFloat(c.split(" ")[2])||0)&&(r[Rs]=D_(c)),n.xOffset=n.yOffset=0,n.force3D=Pr.force3D,n.renderTransform=n.svg?See:CN?FN:Mee,n.uncache=0,n},D_=function(e){return(e=e.split(" "))[0]+" "+e[1]},FM=function(e,t,n){var r=Ni(t);return Gn(parseFloat(t)+parseFloat(La(e,"x",n+"px",r)))+r},Mee=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,FN(e,t)},Wl="0deg",kf="0px",jl=") ",FN=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.z,c=n.rotation,u=n.rotationY,d=n.rotationX,h=n.skewX,f=n.skewY,m=n.scaleX,p=n.scaleY,g=n.transformPerspective,_=n.force3D,y=n.target,v=n.zOrigin,b="",x="auto"===_&&e&&1!==e||!0===_;if(v&&(d!==Wl||u!==Wl)){var S,M=parseFloat(u)*zu,C=Math.sin(M),w=Math.cos(M);M=parseFloat(d)*zu,S=Math.cos(M),o=FM(y,o,C*S*-v),a=FM(y,a,-Math.sin(M)*-v),l=FM(y,l,w*S*-v+v)}g!==kf&&(b+="perspective("+g+jl),(r||s)&&(b+="translate("+r+"%, "+s+"%) "),(x||o!==kf||a!==kf||l!==kf)&&(b+=l!==kf||x?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+jl),c!==Wl&&(b+="rotate("+c+jl),u!==Wl&&(b+="rotateY("+u+jl),d!==Wl&&(b+="rotateX("+d+jl),(h!==Wl||f!==Wl)&&(b+="skew("+h+", "+f+jl),(1!==m||1!==p)&&(b+="scale("+m+", "+p+jl),y.style[kn]=b||"translate(0, 0)"},See=function(e,t){var x,M,C,w,S,n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.rotation,c=n.skewX,u=n.skewY,d=n.scaleX,h=n.scaleY,f=n.target,m=n.xOrigin,p=n.yOrigin,g=n.xOffset,_=n.yOffset,y=n.forceCSS,v=parseFloat(o),b=parseFloat(a);l=parseFloat(l),c=parseFloat(c),(u=parseFloat(u))&&(c+=u=parseFloat(u),l+=u),l||c?(l*=zu,c*=zu,x=Math.cos(l)*d,M=Math.sin(l)*d,C=Math.sin(l-c)*-h,w=Math.cos(l-c)*h,c&&(u*=zu,S=Math.tan(c-u),C*=S=Math.sqrt(1+S*S),w*=S,u&&(S=Math.tan(u),x*=S=Math.sqrt(1+S*S),M*=S)),x=Gn(x),M=Gn(M),C=Gn(C),w=Gn(w)):(x=d,w=h,M=C=0),(v&&!~(o+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(v=La(f,"x",o,"px"),b=La(f,"y",a,"px")),(m||p||g||_)&&(v=Gn(v+m-(m*x+p*C)+g),b=Gn(b+p-(m*M+p*w)+_)),(r||s)&&(S=f.getBBox(),v=Gn(v+r/100*S.width),b=Gn(b+s/100*S.height)),f.setAttribute("transform",S="matrix("+x+","+M+","+C+","+w+","+v+","+b+")"),y&&(f.style[kn]=S)},Cee=function(e,t,n,r,s){var d,h,o=360,a=_i(s),c=parseFloat(s)*(a&&~s.indexOf("rad")?Gl:1)-r,u=r+c+"deg";return a&&("short"===(d=s.split("_")[1])&&(c%=o)!=c%180&&(c+=c<0?o:-o),"cw"===d&&c<0?c=(c+o*bN)%o-~~(c/o)*o:"ccw"===d&&c>0&&(c=(c-o*bN)%o-~~(c/o)*o)),e._pt=h=new mr(e._pt,t,n,r,c,lee),h.e=u,h.u="deg",e._props.push(n),h},kN=function(e,t){for(var n in t)e[n]=t[n];return e},Eee=function(e,t,n){var a,l,c,u,d,h,m,r=kN({},n._gsap),o=n.style;for(l in r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[kn]=t,a=Ff(n,1),Lf(n,kn),n.setAttribute("transform",c)):(c=getComputedStyle(n)[kn],o[kn]=t,a=Ff(n,1),o[kn]=c),Bo)(c=r[l])!==(u=a[l])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(l)<0&&(d=Ni(c)!==(m=Ni(u))?La(n,l,c,m):parseFloat(c),h=parseFloat(u),e._pt=new mr(e._pt,a,l,d,h-d,AM),e._pt.u=m||0,e._props.push(l));kN(a,r)};fr("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",r="Bottom",s="Left",o=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(a){return e<2?i+a:"border"+a+i});E_[e>1?"border"+i:i]=function(a,l,c,u,d){var h,f;if(arguments.length<4)return h=o.map(function(m){return Uo(a,m,c)}),5===(f=h.join(" ")).split(h[0]).length?h[0]:f;h=(u+"").split(" "),f={},o.forEach(function(m,p){return f[m]=h[p]=h[p]||h[(p-1)/2|0]}),a.init(l,f,d)}});var NN={name:"css",register:RM,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var c,u,d,h,f,m,p,g,_,y,v,b,x,M,C,w,o=this._props,a=e.style,l=n.vars.startAt;for(p in EM||RM(),this.styles=this.styles||SN(e),w=this.styles.props,this.tween=n,t)if("autoRound"!==p&&(u=t[p],!Or[p]||!cN(p,t,n,r,e,s)))if(m=E_[p],"function"==(f=typeof u)&&(f=typeof(u=u.call(n,r,e,s))),"string"===f&&~u.indexOf("random(")&&(u=Tf(u)),m)m(this,e,p,u,n)&&(C=1);else if("--"===p.substr(0,2))c=(getComputedStyle(e).getPropertyValue(p)+"").trim(),u+="",Aa.lastIndex=0,Aa.test(c)||(g=Ni(c),_=Ni(u)),_?g!==_&&(c=La(e,p,c,_)+_):g&&(u+=g),this.add(a,"setProperty",c,u,r,s,0,0,p),o.push(p),w.push(p,a[p]);else if("undefined"!==f){if(l&&p in l?(c="function"==typeof l[p]?l[p].call(n,r,e,s):l[p],_i(c)&&~c.indexOf("random(")&&(c=Tf(c)),Ni(c+"")||(c+=Pr.units[p]||Ni(Uo(e,p))||""),"="===(c+"").charAt(1)&&(c=Uo(e,p))):c=Uo(e,p),h=parseFloat(c),(y="string"===f&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),d=parseFloat(u),p in Vo&&("autoAlpha"===p&&(1===h&&"hidden"===Uo(e,"visibility")&&d&&(h=0),w.push("visibility",a.visibility),Pa(this,a,"visibility",h?"inherit":"hidden",d?"inherit":"hidden",!d)),"scale"!==p&&"transform"!==p&&~(p=Vo[p]).indexOf(",")&&(p=p.split(",")[0])),v=p in Bo)if(this.styles.save(p),b||((x=e._gsap).renderTransform&&!t.parseTransform||Ff(e,t.parseTransform),M=!1!==t.smoothOrigin&&x.smooth,(b=this._pt=new mr(this._pt,a,kn,0,1,x.renderTransform,x,0,-1)).dep=1),"scale"===p)this._pt=new mr(this._pt,x,"scaleY",x.scaleY,(y?Ou(x.scaleY,y+d):d)-x.scaleY||0,AM),this._pt.u=0,o.push("scaleY",p),p+="X";else{if("transformOrigin"===p){w.push(Rs,a[Rs]),u=xee(u),x.svg?OM(e,u,0,M,0,this):((_=parseFloat(u.split(" ")[2])||0)!==x.zOrigin&&Pa(this,x,"zOrigin",x.zOrigin,_),Pa(this,a,p,D_(c),D_(u)));continue}if("svgOrigin"===p){OM(e,u,1,M,0,this);continue}if(p in PN){Cee(this,x,p,h,y?Ou(h,y+u):u);continue}if("smoothOrigin"===p){Pa(this,x,"smooth",x.smooth,u);continue}if("force3D"===p){x[p]=u;continue}if("transform"===p){Eee(this,u,e);continue}}else p in a||(p=Wu(p)||p);if(v||(d||0===d)&&(h||0===h)&&!aee.test(u)&&p in a)d||(d=0),(g=(c+"").substr((h+"").length))!==(_=Ni(u)||(p in Pr.units?Pr.units[p]:g))&&(h=La(e,p,c,_)),this._pt=new mr(this._pt,v?x:a,p,h,(y?Ou(h,y+d):d)-h,v||"px"!==_&&"zIndex"!==p||!1===t.autoRound?AM:uee),this._pt.u=_||0,g!==_&&"%"!==_&&(this._pt.b=c,this._pt.r=cee);else if(p in a)bee.call(this,e,p,c,y?y+u:u);else{if(!(p in e)){iM(p,u);continue}this.add(e,p,c||e[p],y?y+u:u,r,s)}v||w.push(p,a[p]),o.push(p)}C&&mN(this)},render:function(e,t){if(t.tween._time||!DM())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Uo,aliases:Vo,getSetter:function(e,t,n){var r=Vo[t];return r&&r.indexOf(",")<0&&(t=r),t in Bo&&t!==Rs&&(e._gsap.x||Uo(e,"x"))?n&&vN===n?"scale"===t?pee:fee:(vN=n||{})&&("scale"===t?mee:gee):e.style&&!Qw(e.style[t])?dee:~t.indexOf("-")?hee:xM(e,t)},core:{_removeProperty:Lf,_getMatrix:LM}};kr.utils.checkPrefix=Wu,kr.core.getStyleSaver=SN,function(i,e,t,n){var r=fr(i+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){Bo[s]=1});fr(e,function(s){Pr.units[s]="deg",PN[s]=1}),Vo[r[13]]=i+","+e,fr("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");Vo[o[1]]=r[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),fr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Pr.units[i]="px"}),kr.registerPlugin(NN);var Nf=kr.registerPlugin(NN)||kr;function BN(i,e,t,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(n,r)}const Yl=1e3,er=1001,ti=1003,Nn=1006,Fa=1008,Kl=1009,Zl=1014,ka=1015,Hf=1016,Yu=1020,Ps=1023,Ql=1026,Ku=1027,zf=2300,Zu=2301,Jl=3e3,Kt=3001,zo="srgb",ec="srgb-linear";class tc{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const n=this._listeners[e.type];if(void 0!==n){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Bi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let x2=1234567;const nc=Math.PI/180,Gf=180/Math.PI;function Nr(){const i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Bi[255&i]+Bi[i>>8&255]+Bi[i>>16&255]+Bi[i>>24&255]+"-"+Bi[255&e]+Bi[e>>8&255]+"-"+Bi[e>>16&15|64]+Bi[e>>24&255]+"-"+Bi[63&t|128]+Bi[t>>8&255]+"-"+Bi[t>>16&255]+Bi[t>>24&255]+Bi[255&n]+Bi[n>>8&255]+Bi[n>>16&255]+Bi[n>>24&255]).toLowerCase()}function Wn(i,e,t){return Math.max(e,Math.min(t,i))}function XM(i,e){return(i%e+e)%e}function Wf(i,e,t){return(1-t)*i+t*e}function YM(i){return 0==(i&i-1)&&0!==i}function w2(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function F_(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Go(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function un(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}var Vte=Object.freeze({__proto__:null,DEG2RAD:nc,RAD2DEG:Gf,generateUUID:Nr,clamp:Wn,euclideanModulo:XM,mapLinear:function Ete(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)},inverseLerp:function Dte(i,e,t){return i!==e?(t-i)/(e-i):0},lerp:Wf,damp:function Tte(i,e,t,n){return Wf(i,e,1-Math.exp(-t*n))},pingpong:function Ate(i,e=1){return e-Math.abs(XM(i,2*e)-e)},smoothstep:function Ite(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e))*i*(3-2*i)},smootherstep:function Rte(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e))*i*i*(i*(6*i-15)+10)},randInt:function Pte(i,e){return i+Math.floor(Math.random()*(e-i+1))},randFloat:function Lte(i,e){return i+Math.random()*(e-i)},randFloatSpread:function Ote(i){return i*(.5-Math.random())},seededRandom:function Fte(i){void 0!==i&&(x2=i);let e=x2+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function kte(i){return i*nc},radToDeg:function Nte(i){return i*Gf},isPowerOfTwo:YM,ceilPowerOfTwo:w2,floorPowerOfTwo:F_,setQuaternionFromProperEuler:function Bte(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+n)/2),u=o((e+n)/2),d=s((e-n)/2),h=o((e-n)/2),f=s((n-e)/2),m=o((n-e)/2);switch(r){case"XYX":i.set(a*u,l*d,l*h,a*c);break;case"YZY":i.set(l*h,a*u,l*d,a*c);break;case"ZXZ":i.set(l*d,l*h,a*u,a*c);break;case"XZX":i.set(a*u,l*m,l*f,a*c);break;case"YXY":i.set(l*f,a*u,l*m,a*c);break;case"ZYZ":i.set(l*m,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:un,denormalize:Go});class ie{constructor(e=0,t=0){ie.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Br{constructor(){Br.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],u=n[4],d=n[7],h=n[2],f=n[5],m=n[8],p=r[0],g=r[3],_=r[6],y=r[1],v=r[4],b=r[7],x=r[2],M=r[5],C=r[8];return s[0]=o*p+a*y+l*x,s[3]=o*g+a*v+l*M,s[6]=o*_+a*b+l*C,s[1]=c*p+u*y+d*x,s[4]=c*g+u*v+d*M,s[7]=c*_+u*b+d*C,s[2]=h*p+f*y+m*x,s[5]=h*g+f*v+m*M,s[8]=h*_+f*b+m*C,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*s*u+n*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,m=t*d+n*h+r*f;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);const p=1/m;return e[0]=d*p,e[1]=(r*c-u*n)*p,e[2]=(a*n-r*o)*p,e[3]=h*p,e[4]=(u*t-r*l)*p,e[5]=(r*s-a*t)*p,e[6]=f*p,e[7]=(n*l-c*t)*p,e[8]=(o*t-n*s)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*s+n*l,r[3]=t*o+n*c,r[6]=t*a+n*u,r[1]=-n*s+t*l,r[4]=-n*o+t*c,r[7]=-n*a+t*u,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function M2(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function jf(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function ic(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function k_(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const KM={[zo]:{[ec]:ic},[ec]:{[zo]:k_}},Ls={legacyMode:!0,get workingColorSpace(){return ec},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(this.legacyMode||e===t||!e||!t)return i;if(KM[e]&&void 0!==KM[e][t]){const n=KM[e][t];return i.r=n(i.r),i.g=n(i.g),i.b=n(i.b),i}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}},S2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fi={r:0,g:0,b:0},Os={h:0,s:0,l:0},N_={h:0,s:0,l:0};function ZM(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+6*(e-i)*(2/3-t):i}function B_(i,e){return e.r=i.r,e.g=i.g,e.b=i.b,e}let td,De=(()=>{class i{constructor(t,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,n=zo){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Ls.toWorkingColorSpace(this,n),this}setRGB(t,n,r,s=ec){return this.r=t,this.g=n,this.b=r,Ls.toWorkingColorSpace(this,s),this}setHSL(t,n,r,s=ec){if(t=XM(t,1),n=Wn(n,0,1),r=Wn(r,0,1),0===n)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,a=2*r-o;this.r=ZM(a,o,t+1/3),this.g=ZM(a,o,t),this.b=ZM(a,o,t-1/3)}return Ls.toWorkingColorSpace(this,s),this}setStyle(t,n=zo){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const l=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,Ls.toWorkingColorSpace(this,n),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,Ls.toWorkingColorSpace(this,n),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(o[1])/360,u=parseFloat(o[2])/100,d=parseFloat(o[3])/100;return r(o[4]),this.setHSL(c,u,d,n)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,Ls.toWorkingColorSpace(this,n),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,Ls.toWorkingColorSpace(this,n),this}return t&&t.length>0?this.setColorName(t,n):this}setColorName(t,n=zo){const r=S2[t.toLowerCase()];return void 0!==r?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ic(t.r),this.g=ic(t.g),this.b=ic(t.b),this}copyLinearToSRGB(t){return this.r=k_(t.r),this.g=k_(t.g),this.b=k_(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=zo){return Ls.fromWorkingColorSpace(B_(this,fi),t),Wn(255*fi.r,0,255)<<16^Wn(255*fi.g,0,255)<<8^Wn(255*fi.b,0,255)<<0}getHexString(t=zo){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,n=ec){Ls.fromWorkingColorSpace(B_(this,fi),n);const r=fi.r,s=fi.g,o=fi.b,a=Math.max(r,s,o),l=Math.min(r,s,o);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const h=a-l;switch(u=d<=.5?h/(a+l):h/(2-a-l),a){case r:c=(s-o)/h+(s<o?6:0);break;case s:c=(o-r)/h+2;break;case o:c=(r-s)/h+4}c/=6}return t.h=c,t.s=u,t.l=d,t}getRGB(t,n=ec){return Ls.fromWorkingColorSpace(B_(this,fi),n),t.r=fi.r,t.g=fi.g,t.b=fi.b,t}getStyle(t=zo){return Ls.fromWorkingColorSpace(B_(this,fi),t),t!==zo?`color(${t} ${fi.r} ${fi.g} ${fi.b})`:`rgb(${255*fi.r|0},${255*fi.g|0},${255*fi.b|0})`}offsetHSL(t,n,r){return this.getHSL(Os),Os.h+=t,Os.s+=n,Os.l+=r,this.setHSL(Os.h,Os.s,Os.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,r){return this.r=t.r+(n.r-t.r)*r,this.g=t.g+(n.g-t.g)*r,this.b=t.b+(n.b-t.b)*r,this}lerpHSL(t,n){this.getHSL(Os),t.getHSL(N_);const r=Wf(Os.h,N_.h,n),s=Wf(Os.s,N_.s,n),o=Wf(Os.l,N_.l,n);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return i.NAMES=S2,i})();class C2{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===td&&(td=jf("canvas")),td.width=e.width,td.height=e.height;const n=td.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=td}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=jf("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*ic(s[o]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t[n]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*ic(t[n]/255)):ic(t[n]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class nd{constructor(e=null){this.isSource=!0,this.uuid=Nr(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(QM(r[o].isDataTexture?r[o].image:r[o]))}else s=QM(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function QM(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?C2.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Hte=0,Fs=(()=>{class i extends tc{constructor(t=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=er,s=er,o=Nn,a=Fa,l=Ps,c=Kl,u=1,d=Jl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Hte++}),this.uuid=Nr(),this.name="",this.source=new nd(t),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ie(0,0),this.repeat=new ie(1,1),this.center=new ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Br,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Yl:t.x=t.x-Math.floor(t.x);break;case er:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Yl:t.y=t.y-Math.floor(t.y);break;case er:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i})();class tn{constructor(e=0,t=0,n=0,r=1){tn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],m=l[9],p=l[2],g=l[6],_=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-p)<.01&&Math.abs(m-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+p)<.1&&Math.abs(m+g)<.1&&Math.abs(c+f+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,b=(f+1)/2,x=(_+1)/2,M=(u+h)/4,C=(d+p)/4,w=(m+g)/4;return v>b&&v>x?v<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(v),r=M/n,s=C/n):b>x?b<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),n=M/r,s=w/r):x<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),n=C/s,r=w/s),this.set(n,r,s,t),this}let y=Math.sqrt((g-m)*(g-m)+(d-p)*(d-p)+(h-u)*(h-u));return Math.abs(y)<.001&&(y=1),this.x=(g-m)/y,this.y=(d-p)/y,this.z=(h-u)/y,this.w=Math.acos((c+f+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class rc extends tc{constructor(e,t,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new tn(0,0,e,t),this.scissorTest=!1,this.viewport=new tn(0,0,e,t),this.texture=new Fs({width:e,height:t,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Nn,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new nd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class JM extends Fs{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ti,this.minFilter=ti,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class E2 extends Fs{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ti,this.minFilter=ti,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Vi{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],u=n[r+2],d=n[r+3];const h=s[o+0],f=s[o+1],m=s[o+2],p=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=m,void(e[t+3]=p);if(d!==p||l!==h||c!==f||u!==m){let g=1-a;const _=l*h+c*f+u*m+d*p,y=_>=0?1:-1,v=1-_*_;if(v>Number.EPSILON){const x=Math.sqrt(v),M=Math.atan2(x,_*y);g=Math.sin(g*M)/x,a=Math.sin(a*M)/x}const b=a*y;if(l=l*g+h*b,c=c*g+f*b,u=u*g+m*b,d=d*g+p*b,g===1-a){const x=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=x,c*=x,u*=x,d*=x}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],u=n[r+3],d=s[o],h=s[o+1],f=s[o+2],m=s[o+3];return e[t]=a*m+u*d+l*f-c*h,e[t+1]=l*m+u*h+c*d-a*f,e[t+2]=c*m+u*f+a*h-l*d,e[t+3]=u*m-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),u=a(r/2),d=a(s/2),h=l(n/2),f=l(r/2),m=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"YXZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"ZXY":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"ZYX":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"YZX":this._x=h*u*d+c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d-h*f*m;break;case"XZY":this._x=h*u*d-c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=n+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(n>a&&n>d){const f=2*Math.sqrt(1+n-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-n-d);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-n-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Wn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-n*c,this._z=s*u+o*c+n*l-r*a,this._w=o*u-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*n+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=n*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class D{constructor(e=0,t=0,n=0){D.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(D2.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(D2.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*n,u=l*n+a*t-s*r,d=l*r+s*n-o*t,h=-s*t-o*n-a*r;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return eS.copy(this).projectOnVector(e),this.sub(eS)}reflect(e){return this.sub(eS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Wn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const eS=new D,D2=new Vi;class sc{constructor(e=new D(1/0,1/0,1/0),t=new D(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<n&&(n=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<n&&(n=d),h<r&&(r=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=oc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){const s=n.attributes.position;for(let o=0,a=s.count;o<a;o++)oc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(oc)}else null===n.boundingBox&&n.computeBoundingBox(),tS.copy(n.boundingBox),tS.applyMatrix4(e.matrixWorld),this.union(tS);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,oc),oc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter($f),V_.subVectors(this.max,$f),id.subVectors(e.a,$f),rd.subVectors(e.b,$f),sd.subVectors(e.c,$f),Ba.subVectors(rd,id),Va.subVectors(sd,rd),ac.subVectors(id,sd);let t=[0,-Ba.z,Ba.y,0,-Va.z,Va.y,0,-ac.z,ac.y,Ba.z,0,-Ba.x,Va.z,0,-Va.x,ac.z,0,-ac.x,-Ba.y,Ba.x,0,-Va.y,Va.x,0,-ac.y,ac.x,0];return!(!nS(t,id,rd,sd,V_)||(t=[1,0,0,0,1,0,0,0,1],!nS(t,id,rd,sd,V_)))&&(U_.crossVectors(Ba,Va),t=[U_.x,U_.y,U_.z],nS(t,id,rd,sd,V_))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return oc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(oc).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Wo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Wo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Wo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Wo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Wo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Wo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Wo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Wo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Wo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Wo=[new D,new D,new D,new D,new D,new D,new D,new D],oc=new D,tS=new sc,id=new D,rd=new D,sd=new D,Ba=new D,Va=new D,ac=new D,$f=new D,V_=new D,U_=new D,lc=new D;function nS(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){lc.fromArray(i,s);const a=r.x*Math.abs(lc.x)+r.y*Math.abs(lc.y)+r.z*Math.abs(lc.z),l=e.dot(lc),c=t.dot(lc),u=n.dot(lc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const zte=new sc,T2=new D,H_=new D,iS=new D;class cc{constructor(e=new D,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):zte.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){iS.subVectors(e,this.center);const t=iS.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(iS.multiplyScalar(r/n)),this.radius+=r}return this}union(e){return!0===this.center.equals(e.center)?H_.set(0,0,1).multiplyScalar(e.radius):H_.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(T2.copy(e.center).add(H_)),this.expandByPoint(T2.copy(e.center).sub(H_)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const jo=new D,rS=new D,z_=new D,Ua=new D,sS=new D,G_=new D,oS=new D;class W_{constructor(e=new D,t=new D(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,jo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=jo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(jo.copy(this.direction).multiplyScalar(t).add(this.origin),jo.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){rS.copy(e).add(t).multiplyScalar(.5),z_.copy(t).sub(e).normalize(),Ua.copy(this.origin).sub(rS);const s=.5*e.distanceTo(t),o=-this.direction.dot(z_),a=Ua.dot(this.direction),l=-Ua.dot(z_),c=Ua.lengthSq(),u=Math.abs(1-o*o);let d,h,f,m;if(u>0)if(d=o*l-a,h=o*a-l,m=s*u,d>=0)if(h>=-m)if(h<=m){const p=1/u;d*=p,h*=p,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-m?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=m?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return n&&n.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(z_).multiplyScalar(h).add(rS),f}intersectSphere(e,t){jo.subVectors(e.center,this.origin);const n=jo.dot(this.direction),r=jo.dot(jo)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||s>r||((s>n||n!=n)&&(n=s),(o<r||r!=r)&&(r=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,jo)}intersectTriangle(e,t,n,r,s){sS.subVectors(t,e),G_.subVectors(n,e),oS.crossVectors(sS,G_);let a,o=this.direction.dot(oS);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Ua.subVectors(this.origin,e);const l=a*this.direction.dot(G_.crossVectors(Ua,G_));if(l<0)return null;const c=a*this.direction.dot(sS.cross(Ua));if(c<0||l+c>o)return null;const u=-a*Ua.dot(oS);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class pt{constructor(){pt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,s,o,a,l,c,u,d,h,f,m,p,g){const _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=d,_[14]=h,_[3]=f,_[7]=m,_[11]=p,_[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new pt).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/od.setFromMatrixColumn(e,0).length(),s=1/od.setFromMatrixColumn(e,1).length(),o=1/od.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,m=a*u,p=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+m*c,t[5]=h-p*c,t[9]=-a*l,t[2]=p-h*c,t[6]=m+f*c,t[10]=o*l}else if("YXZ"===e.order){const h=l*u,f=l*d,m=c*u,p=c*d;t[0]=h+p*a,t[4]=m*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-m,t[6]=p+h*a,t[10]=o*l}else if("ZXY"===e.order){const h=l*u,f=l*d,m=c*u,p=c*d;t[0]=h-p*a,t[4]=-o*d,t[8]=m+f*a,t[1]=f+m*a,t[5]=o*u,t[9]=p-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const h=o*u,f=o*d,m=a*u,p=a*d;t[0]=l*u,t[4]=m*c-f,t[8]=h*c+p,t[1]=l*d,t[5]=p*c+h,t[9]=f*c-m,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const h=o*l,f=o*c,m=a*l,p=a*c;t[0]=l*u,t[4]=p-h*d,t[8]=m*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+m,t[10]=h-p*d}else if("XZY"===e.order){const h=o*l,f=o*c,m=a*l,p=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+p,t[5]=o*u,t[9]=f*d-m,t[2]=m*d-f,t[6]=a*u,t[10]=p*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Gte,e,Wte)}lookAt(e,t,n){const r=this.elements;return Vr.subVectors(e,t),0===Vr.lengthSq()&&(Vr.z=1),Vr.normalize(),Ha.crossVectors(n,Vr),0===Ha.lengthSq()&&(1===Math.abs(n.z)?Vr.x+=1e-4:Vr.z+=1e-4,Vr.normalize(),Ha.crossVectors(n,Vr)),Ha.normalize(),j_.crossVectors(Vr,Ha),r[0]=Ha.x,r[4]=j_.x,r[8]=Vr.x,r[1]=Ha.y,r[5]=j_.y,r[9]=Vr.y,r[2]=Ha.z,r[6]=j_.z,r[10]=Vr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],u=n[1],d=n[5],h=n[9],f=n[13],m=n[2],p=n[6],g=n[10],_=n[14],y=n[3],v=n[7],b=n[11],x=n[15],M=r[0],C=r[4],w=r[8],S=r[12],I=r[1],W=r[5],K=r[9],B=r[13],L=r[2],X=r[6],O=r[10],G=r[14],H=r[3],F=r[7],z=r[11],de=r[15];return s[0]=o*M+a*I+l*L+c*H,s[4]=o*C+a*W+l*X+c*F,s[8]=o*w+a*K+l*O+c*z,s[12]=o*S+a*B+l*G+c*de,s[1]=u*M+d*I+h*L+f*H,s[5]=u*C+d*W+h*X+f*F,s[9]=u*w+d*K+h*O+f*z,s[13]=u*S+d*B+h*G+f*de,s[2]=m*M+p*I+g*L+_*H,s[6]=m*C+p*W+g*X+_*F,s[10]=m*w+p*K+g*O+_*z,s[14]=m*S+p*B+g*G+_*de,s[3]=y*M+v*I+b*L+x*H,s[7]=y*C+v*W+b*X+x*F,s[11]=y*w+v*K+b*O+x*z,s[15]=y*S+v*B+b*G+x*de,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*l*d-r*c*d-s*a*h+n*c*h+r*a*f-n*l*f)+e[7]*(+t*l*f-t*c*h+s*o*h-r*o*f+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*f-s*o*d+n*o*f+s*a*u-n*c*u)+e[15]*(-r*a*u-t*l*d+t*a*h+r*o*d-n*o*h+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],m=e[12],p=e[13],g=e[14],_=e[15],y=d*g*c-p*h*c+p*l*f-a*g*f-d*l*_+a*h*_,v=m*h*c-u*g*c-m*l*f+o*g*f+u*l*_-o*h*_,b=u*p*c-m*d*c+m*a*f-o*p*f-u*a*_+o*d*_,x=m*d*l-u*p*l-m*a*h+o*p*h+u*a*g-o*d*g,M=t*y+n*v+r*b+s*x;if(0===M)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/M;return e[0]=y*C,e[1]=(p*h*s-d*g*s-p*r*f+n*g*f+d*r*_-n*h*_)*C,e[2]=(a*g*s-p*l*s+p*r*c-n*g*c-a*r*_+n*l*_)*C,e[3]=(d*l*s-a*h*s-d*r*c+n*h*c+a*r*f-n*l*f)*C,e[4]=v*C,e[5]=(u*g*s-m*h*s+m*r*f-t*g*f-u*r*_+t*h*_)*C,e[6]=(m*l*s-o*g*s-m*r*c+t*g*c+o*r*_-t*l*_)*C,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*f+t*l*f)*C,e[8]=b*C,e[9]=(m*d*s-u*p*s-m*n*f+t*p*f+u*n*_-t*d*_)*C,e[10]=(o*p*s-m*a*s+m*n*c-t*p*c-o*n*_+t*a*_)*C,e[11]=(u*a*s-o*d*s-u*n*c+t*d*c+o*n*f-t*a*f)*C,e[12]=x*C,e[13]=(u*p*r-m*d*r+m*n*h-t*p*h-u*n*g+t*d*g)*C,e[14]=(m*a*r-o*p*r-m*n*l+t*p*l+o*n*g-t*a*g)*C,e[15]=(o*d*r-u*a*r+u*n*l-t*d*l-o*n*h+t*a*h)*C,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+n,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,m=s*d,p=o*u,g=o*d,_=a*d,y=l*c,v=l*u,b=l*d,x=n.x,M=n.y,C=n.z;return r[0]=(1-(p+_))*x,r[1]=(f+b)*x,r[2]=(m-v)*x,r[3]=0,r[4]=(f-b)*M,r[5]=(1-(h+_))*M,r[6]=(g+y)*M,r[7]=0,r[8]=(m+v)*C,r[9]=(g-y)*C,r[10]=(1-(h+p))*C,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=od.set(r[0],r[1],r[2]).length();const o=od.set(r[4],r[5],r[6]).length(),a=od.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ks.copy(this);const c=1/s,u=1/o,d=1/a;return ks.elements[0]*=c,ks.elements[1]*=c,ks.elements[2]*=c,ks.elements[4]*=u,ks.elements[5]*=u,ks.elements[6]*=u,ks.elements[8]*=d,ks.elements[9]*=d,ks.elements[10]*=d,t.setFromRotationMatrix(ks),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o){const a=this.elements,c=2*s/(n-r),u=(t+e)/(t-e),d=(n+r)/(n-r),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,s,o){const a=this.elements,l=1/(t-e),c=1/(n-r),u=1/(o-s),d=(t+e)*l,h=(n+r)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const od=new D,ks=new pt,Gte=new D(0,0,0),Wte=new D(1,1,1),Ha=new D,j_=new D,Vr=new D,A2=new pt,I2=new Vi;let jte=(()=>{class i{constructor(t=0,n=0,r=0,s=i.DefaultOrder){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,s=this._order){return this._x=t,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],h=s[2],f=s[6],m=s[10];switch(n){case"XYZ":this._y=Math.asin(Wn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Wn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,m),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(Wn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Wn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Wn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,m));break;case"XZY":this._z=Math.asin(-Wn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return A2.makeRotationFromQuaternion(t),this.setFromRotationMatrix(A2,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return I2.setFromEuler(this),this.setFromQuaternion(I2,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return i.DefaultOrder="XYZ",i.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i})();class aS{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let $te=0;const R2=new D,ad=new Vi,$o=new pt,$_=new D,qf=new D,qte=new D,Xte=new Vi,P2=new D(1,0,0),L2=new D(0,1,0),O2=new D(0,0,1),Yte={type:"added"},F2={type:"removed"};let yi=(()=>{class i extends tc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$te++}),this.uuid=Nr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DefaultUp.clone();const t=new D,n=new jte,r=new Vi,s=new D(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function a(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new pt},normalMatrix:{value:new Br}}),this.matrix=new pt,this.matrixWorld=new pt,this.matrixAutoUpdate=i.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DefaultMatrixWorldAutoUpdate,this.layers=new aS,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return ad.setFromAxisAngle(t,n),this.quaternion.multiply(ad),this}rotateOnWorldAxis(t,n){return ad.setFromAxisAngle(t,n),this.quaternion.premultiply(ad),this}rotateX(t){return this.rotateOnAxis(P2,t)}rotateY(t){return this.rotateOnAxis(L2,t)}rotateZ(t){return this.rotateOnAxis(O2,t)}translateOnAxis(t,n){return R2.copy(t).applyQuaternion(this.quaternion),this.position.add(R2.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(P2,t)}translateY(t){return this.translateOnAxis(L2,t)}translateZ(t){return this.translateOnAxis(O2,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4($o.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?$_.copy(t):$_.set(t,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),qf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?$o.lookAt(qf,$_,this.up):$o.lookAt($_,qf,this.up),this.quaternion.setFromRotationMatrix($o),s&&($o.extractRotation(s.matrixWorld),ad.setFromRotationMatrix($o),this.quaternion.premultiply(ad.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Yte)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(F2)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const n=this.children[t];n.parent=null,n.dispatchEvent(F2)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),$o.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),$o.multiply(t.parent.matrixWorld)),t.applyMatrix4($o),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,n);if(void 0!==a)return a}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qf,t,qte),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qf,Xte,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(t)}traverseAncestors(t){const n=this.parent;null!==n&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,n){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const n=void 0===t||"string"==typeof t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++)o(t.shapes,c[u]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(n){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),m=a(t.animations),p=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),m.length>0&&(r.animations=m),p.length>0&&(r.nodes=p)}return r.object=s,r;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===n)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return i.DefaultUp=new D(0,1,0),i.DefaultMatrixAutoUpdate=!0,i.DefaultMatrixWorldAutoUpdate=!0,i})();const Ns=new D,qo=new D,lS=new D,Xo=new D,ld=new D,cd=new D,k2=new D,cS=new D,uS=new D,dS=new D;class hs{constructor(e=new D,t=new D,n=new D){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Ns.subVectors(e,t),r.cross(Ns);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){Ns.subVectors(r,t),qo.subVectors(n,t),lS.subVectors(e,t);const o=Ns.dot(Ns),a=Ns.dot(qo),l=Ns.dot(lS),c=qo.dot(qo),u=qo.dot(lS),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,m=(o*u-a*l)*h;return s.set(1-f-m,m,f)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Xo),Xo.x>=0&&Xo.y>=0&&Xo.x+Xo.y<=1}static getUV(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,Xo),l.set(0,0),l.addScaledVector(s,Xo.x),l.addScaledVector(o,Xo.y),l.addScaledVector(a,Xo.z),l}static isFrontFacing(e,t,n,r){return Ns.subVectors(n,t),qo.subVectors(e,t),Ns.cross(qo).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ns.subVectors(this.c,this.b),qo.subVectors(this.a,this.b),.5*Ns.cross(qo).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return hs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return hs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return hs.getUV(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return hs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return hs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;ld.subVectors(r,n),cd.subVectors(s,n),cS.subVectors(e,n);const l=ld.dot(cS),c=cd.dot(cS);if(l<=0&&c<=0)return t.copy(n);uS.subVectors(e,r);const u=ld.dot(uS),d=cd.dot(uS);if(u>=0&&d<=u)return t.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(n).addScaledVector(ld,o);dS.subVectors(e,s);const f=ld.dot(dS),m=cd.dot(dS);if(m>=0&&f<=m)return t.copy(s);const p=f*c-l*m;if(p<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(n).addScaledVector(cd,a);const g=u*m-f*d;if(g<=0&&d-u>=0&&f-m>=0)return k2.subVectors(s,r),a=(d-u)/(d-u+(f-m)),t.copy(r).addScaledVector(k2,a);const _=1/(g+p+h);return o=p*_,a=h*_,t.copy(n).addScaledVector(ld,o).addScaledVector(cd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Kte=0;class Bs extends tc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Kte++}),this.uuid=Nr(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class tr extends Bs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new De(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ni=new D,q_=new ie;class jn{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)q_.fromBufferAttribute(this,t),q_.applyMatrix3(e),this.setXY(t,q_.x,q_.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)ni.fromBufferAttribute(this,t),ni.applyMatrix3(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ni.fromBufferAttribute(this,t),ni.applyMatrix4(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ni.fromBufferAttribute(this,t),ni.applyNormalMatrix(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ni.fromBufferAttribute(this,t),ni.transformDirection(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Go(t,this.array)),t}setX(e,t){return this.normalized&&(t=un(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Go(t,this.array)),t}setY(e,t){return this.normalized&&(t=un(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Go(t,this.array)),t}setZ(e,t){return this.normalized&&(t=un(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Go(t,this.array)),t}setW(e,t){return this.normalized&&(t=un(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=un(t,this.array),n=un(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=un(t,this.array),n=un(n,this.array),r=un(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=un(t,this.array),n=un(n,this.array),r=un(r,this.array),s=un(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class N2 extends jn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class B2 extends jn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Ue extends jn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Zte=0;const fs=new pt,hS=new yi,ud=new D,Ur=new sc,Xf=new sc,vi=new D;class bt extends tc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Zte++}),this.uuid=Nr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(M2(e)?B2:N2)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new Br).getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return fs.makeRotationFromQuaternion(e),this.applyMatrix4(fs),this}rotateX(e){return fs.makeRotationX(e),this.applyMatrix4(fs),this}rotateY(e){return fs.makeRotationY(e),this.applyMatrix4(fs),this}rotateZ(e){return fs.makeRotationZ(e),this.applyMatrix4(fs),this}translate(e,t,n){return fs.makeTranslation(e,t,n),this.applyMatrix4(fs),this}scale(e,t,n){return fs.makeScale(e,t,n),this.applyMatrix4(fs),this}lookAt(e){return hS.lookAt(e),hS.updateMatrix(),this.applyMatrix4(hS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ud).negate(),this.translate(ud.x,ud.y,ud.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ue(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new sc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new D(-1/0,-1/0,-1/0),new D(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++)Ur.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(vi.addVectors(this.boundingBox.min,Ur.min),this.boundingBox.expandByPoint(vi),vi.addVectors(this.boundingBox.max,Ur.max),this.boundingBox.expandByPoint(vi)):(this.boundingBox.expandByPoint(Ur.min),this.boundingBox.expandByPoint(Ur.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new cc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new D,1/0);if(e){const n=this.boundingSphere.center;if(Ur.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)Xf.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(vi.addVectors(Ur.min,Xf.min),Ur.expandByPoint(vi),vi.addVectors(Ur.max,Xf.max),Ur.expandByPoint(vi)):(Ur.expandByPoint(Xf.min),Ur.expandByPoint(Xf.max));Ur.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)vi.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(vi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)vi.fromBufferAttribute(a,c),l&&(ud.fromBufferAttribute(e,c),vi.add(ud)),r=Math.max(r,n.distanceToSquared(vi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new jn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let I=0;I<a;I++)c[I]=new D,u[I]=new D;const d=new D,h=new D,f=new D,m=new ie,p=new ie,g=new ie,_=new D,y=new D;function v(I,W,K){d.fromArray(r,3*I),h.fromArray(r,3*W),f.fromArray(r,3*K),m.fromArray(o,2*I),p.fromArray(o,2*W),g.fromArray(o,2*K),h.sub(d),f.sub(d),p.sub(m),g.sub(m);const B=1/(p.x*g.y-g.x*p.y);!isFinite(B)||(_.copy(h).multiplyScalar(g.y).addScaledVector(f,-p.y).multiplyScalar(B),y.copy(f).multiplyScalar(p.x).addScaledVector(h,-g.x).multiplyScalar(B),c[I].add(_),c[W].add(_),c[K].add(_),u[I].add(y),u[W].add(y),u[K].add(y))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let I=0,W=b.length;I<W;++I){const K=b[I],B=K.start;for(let X=B,O=B+K.count;X<O;X+=3)v(n[X+0],n[X+1],n[X+2])}const x=new D,M=new D,C=new D,w=new D;function S(I){C.fromArray(s,3*I),w.copy(C);const W=c[I];x.copy(W),x.sub(C.multiplyScalar(C.dot(W))).normalize(),M.crossVectors(w,W);const B=M.dot(u[I])<0?-1:1;l[4*I]=x.x,l[4*I+1]=x.y,l[4*I+2]=x.z,l[4*I+3]=B}for(let I=0,W=b.length;I<W;++I){const K=b[I],B=K.start;for(let X=B,O=B+K.count;X<O;X+=3)S(n[X+0]),S(n[X+1]),S(n[X+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new jn(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let h=0,f=n.count;h<f;h++)n.setXYZ(h,0,0,0);const r=new D,s=new D,o=new D,a=new D,l=new D,c=new D,u=new D,d=new D;if(e)for(let h=0,f=e.count;h<f;h+=3){const m=e.getX(h+0),p=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,p),o.fromBufferAttribute(t,g),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(n,m),l.fromBufferAttribute(n,p),c.fromBufferAttribute(n,g),a.add(u),l.add(u),c.add(u),n.setXYZ(m,a.x,a.y,a.z),n.setXYZ(p,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),n.setXYZ(h+0,u.x,u.y,u.z),n.setXYZ(h+1,u.x,u.y,u.z),n.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)vi.fromBufferAttribute(e,t),vi.normalize(),e.setXYZ(t,vi.x,vi.y,vi.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,m=0;for(let p=0,g=l.length;p<g;p++){f=a.isInterleavedBufferAttribute?l[p]*a.data.stride+a.offset:l[p]*u;for(let _=0;_<u;_++)h[m++]=c[f++]}return new jn(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new bt,n=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],n);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],n);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n)e.data.attributes[l]=n[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const V2=new pt,dd=new W_,fS=new cc,za=new D,Ga=new D,Wa=new D,pS=new D,mS=new D,gS=new D,X_=new D,Y_=new D,K_=new D,Z_=new ie,Q_=new ie,J_=new ie,_S=new D,ey=new D;class ii extends yi{constructor(e=new bt,t=new tr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),fS.copy(n.boundingSphere),fS.applyMatrix4(s),!1===e.ray.intersectsSphere(fS))||(V2.copy(s).invert(),dd.copy(e.ray).applyMatrix4(V2),null!==n.boundingBox&&!1===dd.intersectsBox(n.boundingBox)))return;let o;const a=n.index,l=n.attributes.position,c=n.morphAttributes.position,u=n.morphTargetsRelative,d=n.attributes.uv,h=n.attributes.uv2,f=n.groups,m=n.drawRange;if(null!==a)if(Array.isArray(r))for(let p=0,g=f.length;p<g;p++){const _=f[p],y=r[_.materialIndex];for(let x=Math.max(_.start,m.start),M=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));x<M;x+=3){const C=a.getX(x),w=a.getX(x+1),S=a.getX(x+2);o=ty(this,y,e,dd,l,c,u,d,h,C,w,S),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=_.materialIndex,t.push(o))}}else for(let _=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);_<y;_+=3){const v=a.getX(_),b=a.getX(_+1),x=a.getX(_+2);o=ty(this,r,e,dd,l,c,u,d,h,v,b,x),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let p=0,g=f.length;p<g;p++){const _=f[p],y=r[_.materialIndex];for(let x=Math.max(_.start,m.start),M=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));x<M;x+=3)o=ty(this,y,e,dd,l,c,u,d,h,x,x+1,x+2),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=_.materialIndex,t.push(o))}else for(let _=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);_<y;_+=3)o=ty(this,r,e,dd,l,c,u,d,h,_,_+1,_+2),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}}function ty(i,e,t,n,r,s,o,a,l,c,u,d){za.fromBufferAttribute(r,c),Ga.fromBufferAttribute(r,u),Wa.fromBufferAttribute(r,d);const h=i.morphTargetInfluences;if(s&&h){X_.set(0,0,0),Y_.set(0,0,0),K_.set(0,0,0);for(let m=0,p=s.length;m<p;m++){const g=h[m],_=s[m];0!==g&&(pS.fromBufferAttribute(_,c),mS.fromBufferAttribute(_,u),gS.fromBufferAttribute(_,d),o?(X_.addScaledVector(pS,g),Y_.addScaledVector(mS,g),K_.addScaledVector(gS,g)):(X_.addScaledVector(pS.sub(za),g),Y_.addScaledVector(mS.sub(Ga),g),K_.addScaledVector(gS.sub(Wa),g)))}za.add(X_),Ga.add(Y_),Wa.add(K_)}i.isSkinnedMesh&&(i.boneTransform(c,za),i.boneTransform(u,Ga),i.boneTransform(d,Wa));const f=function Qte(i,e,t,n,r,s,o,a){let l;if(l=1===e.side?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,2!==e.side,a),null===l)return null;ey.copy(a),ey.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(ey);return c<t.near||c>t.far?null:{distance:c,point:ey.clone(),object:i}}(i,e,t,n,za,Ga,Wa,_S);if(f){a&&(Z_.fromBufferAttribute(a,c),Q_.fromBufferAttribute(a,u),J_.fromBufferAttribute(a,d),f.uv=hs.getUV(_S,za,Ga,Wa,Z_,Q_,J_,new ie)),l&&(Z_.fromBufferAttribute(l,c),Q_.fromBufferAttribute(l,u),J_.fromBufferAttribute(l,d),f.uv2=hs.getUV(_S,za,Ga,Wa,Z_,Q_,J_,new ie));const m={a:c,b:u,c:d,normal:new D,materialIndex:0};hs.getNormal(za,Ga,Wa,m.normal),f.face=m}return f}class hd extends bt{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function m(p,g,_,y,v,b,x,M,C,w,S){const I=b/C,W=x/w,K=b/2,B=x/2,L=M/2,X=C+1,O=w+1;let G=0,H=0;const F=new D;for(let z=0;z<O;z++){const de=z*W-B;for(let ee=0;ee<X;ee++)F[p]=(ee*I-K)*y,F[g]=de*v,F[_]=L,c.push(F.x,F.y,F.z),F[p]=0,F[g]=0,F[_]=M>0?1:-1,u.push(F.x,F.y,F.z),d.push(ee/C),d.push(1-z/w),G+=1}for(let z=0;z<w;z++)for(let de=0;de<C;de++){const me=h+de+X*(z+1),fe=h+(de+1)+X*(z+1),He=h+(de+1)+X*z;l.push(h+de+X*z,me,He),l.push(me,fe,He),H+=6}a.addGroup(f,H,S),f+=H,h+=G}m("z","y","x",-1,-1,n,t,e,o,s,0),m("z","y","x",1,-1,n,t,-e,o,s,1),m("x","z","y",1,1,e,n,t,r,o,2),m("x","z","y",1,-1,e,n,-t,r,o,3),m("x","y","z",1,-1,e,t,n,r,s,4),m("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new Ue(c,3)),this.setAttribute("normal",new Ue(u,3)),this.setAttribute("uv",new Ue(d,2))}static fromJSON(e){return new hd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function fd(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];e[t][n]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function Ui(i){const e={};for(let t=0;t<i.length;t++){const n=fd(i[t]);for(const r in n)e[r]=n[r]}return e}const ene={clone:fd,merge:Ui};class Yo extends Bs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fd(e.uniforms),this.uniformsGroups=function Jte(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class yS extends yi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pt,this.projectionMatrix=new pt,this.projectionMatrixInverse=new pt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class bi extends yS{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Gf*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*nc*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Gf*Math.atan(Math.tan(.5*nc*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*nc*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class ine extends yi{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new bi(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new D(1,0,0)),this.add(r);const s=new bi(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new D(-1,0,0)),this.add(s);const o=new bi(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new D(0,1,0)),this.add(o);const a=new bi(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new D(0,-1,0)),this.add(a);const l=new bi(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new D(0,0,1)),this.add(l);const c=new bi(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new D(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class ny extends Fs{constructor(e,t,n,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class rne extends rc{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1};this.texture=new ny([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Nn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new hd(5,5,5),s=new Yo({name:"CubemapFromEquirect",uniforms:fd(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new ii(r,s),a=t.minFilter;return t.minFilter===Fa&&(t.minFilter=Nn),new ine(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}const vS=new D,sne=new D,one=new Br;class uc{constructor(e=new D(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=vS.subVectors(n,t).cross(sne.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(vS),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(n).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||one.getNormalMatrix(e),r=this.coplanarPoint(vS).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const gd=new cc,iy=new D;class bS{constructor(e=new uc,t=new uc,n=new uc,r=new uc,s=new uc,o=new uc){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],u=n[6],d=n[7],h=n[8],f=n[9],m=n[10],p=n[11],g=n[12],_=n[13],y=n[14],v=n[15];return t[0].setComponents(a-r,d-l,p-h,v-g).normalize(),t[1].setComponents(a+r,d+l,p+h,v+g).normalize(),t[2].setComponents(a+s,d+c,p+f,v+_).normalize(),t[3].setComponents(a-s,d-c,p-f,v-_).normalize(),t[4].setComponents(a-o,d-u,p-m,v-y).normalize(),t[5].setComponents(a+o,d+u,p+m,v+y).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),gd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(gd)}intersectsSprite(e){return gd.center.set(0,0,0),gd.radius=.7071067811865476,gd.applyMatrix4(e.matrixWorld),this.intersectsSphere(gd)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(iy.x=r.normal.x>0?e.max.x:e.min.x,iy.y=r.normal.y>0?e.max.y:e.min.y,iy.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(iy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function U2(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function ane(i,e){const t=e.isWebGL2,n=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=n.get(c);u&&(i.deleteBuffer(u.buffer),n.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=n.get(c);return void((!h||h.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=n.get(c);void 0===d?n.set(c,function r(c,u){const d=c.array,h=c.usage,f=i.createBuffer();let m;if(i.bindBuffer(u,f),i.bufferData(u,d,h),c.onUploadCallback(),d instanceof Float32Array)m=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");m=5131}else m=5123;else if(d instanceof Int16Array)m=5122;else if(d instanceof Uint32Array)m=5125;else if(d instanceof Int32Array)m=5124;else if(d instanceof Int8Array)m=5120;else if(d instanceof Uint8Array)m=5121;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);m=5121}return{buffer:f,type:m,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function s(c,u,d){const h=u.array,f=u.updateRange;i.bindBuffer(d,c),-1===f.count?i.bufferSubData(d,0,h):(t?i.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):i.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class Yf extends bt{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),c=a+1,u=l+1,d=e/a,h=t/l,f=[],m=[],p=[],g=[];for(let _=0;_<u;_++){const y=_*h-o;for(let v=0;v<c;v++)m.push(v*d-s,-y,0),p.push(0,0,1),g.push(v/a),g.push(1-_/l)}for(let _=0;_<l;_++)for(let y=0;y<a;y++){const b=y+c*(_+1),x=y+1+c*(_+1),M=y+1+c*_;f.push(y+c*_,b,M),f.push(b,x,M)}this.setIndex(f),this.setAttribute("position",new Ue(m,3)),this.setAttribute("normal",new Ue(p,3)),this.setAttribute("uv",new Ue(g,2))}static fromJSON(e){return new Yf(e.width,e.height,e.widthSegments,e.heightSegments)}}const Tt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Se={common:{diffuse:{value:new De(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Br},uv2Transform:{value:new Br},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new De(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new De(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Br}},sprite:{diffuse:{value:new De(16777215)},opacity:{value:1},center:{value:new ie(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Br}}},io={basic:{uniforms:Ui([Se.common,Se.specularmap,Se.envmap,Se.aomap,Se.lightmap,Se.fog]),vertexShader:Tt.meshbasic_vert,fragmentShader:Tt.meshbasic_frag},lambert:{uniforms:Ui([Se.common,Se.specularmap,Se.envmap,Se.aomap,Se.lightmap,Se.emissivemap,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.fog,Se.lights,{emissive:{value:new De(0)}}]),vertexShader:Tt.meshlambert_vert,fragmentShader:Tt.meshlambert_frag},phong:{uniforms:Ui([Se.common,Se.specularmap,Se.envmap,Se.aomap,Se.lightmap,Se.emissivemap,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.fog,Se.lights,{emissive:{value:new De(0)},specular:{value:new De(1118481)},shininess:{value:30}}]),vertexShader:Tt.meshphong_vert,fragmentShader:Tt.meshphong_frag},standard:{uniforms:Ui([Se.common,Se.envmap,Se.aomap,Se.lightmap,Se.emissivemap,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.roughnessmap,Se.metalnessmap,Se.fog,Se.lights,{emissive:{value:new De(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag},toon:{uniforms:Ui([Se.common,Se.aomap,Se.lightmap,Se.emissivemap,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.gradientmap,Se.fog,Se.lights,{emissive:{value:new De(0)}}]),vertexShader:Tt.meshtoon_vert,fragmentShader:Tt.meshtoon_frag},matcap:{uniforms:Ui([Se.common,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.fog,{matcap:{value:null}}]),vertexShader:Tt.meshmatcap_vert,fragmentShader:Tt.meshmatcap_frag},points:{uniforms:Ui([Se.points,Se.fog]),vertexShader:Tt.points_vert,fragmentShader:Tt.points_frag},dashed:{uniforms:Ui([Se.common,Se.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tt.linedashed_vert,fragmentShader:Tt.linedashed_frag},depth:{uniforms:Ui([Se.common,Se.displacementmap]),vertexShader:Tt.depth_vert,fragmentShader:Tt.depth_frag},normal:{uniforms:Ui([Se.common,Se.bumpmap,Se.normalmap,Se.displacementmap,{opacity:{value:1}}]),vertexShader:Tt.meshnormal_vert,fragmentShader:Tt.meshnormal_frag},sprite:{uniforms:Ui([Se.sprite,Se.fog]),vertexShader:Tt.sprite_vert,fragmentShader:Tt.sprite_frag},background:{uniforms:{uvTransform:{value:new Br},t2D:{value:null}},vertexShader:Tt.background_vert,fragmentShader:Tt.background_frag},cube:{uniforms:Ui([Se.envmap,{opacity:{value:1}}]),vertexShader:Tt.cube_vert,fragmentShader:Tt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tt.equirect_vert,fragmentShader:Tt.equirect_frag},distanceRGBA:{uniforms:Ui([Se.common,Se.displacementmap,{referencePosition:{value:new D},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tt.distanceRGBA_vert,fragmentShader:Tt.distanceRGBA_frag},shadow:{uniforms:Ui([Se.lights,Se.fog,{color:{value:new De(0)},opacity:{value:1}}]),vertexShader:Tt.shadow_vert,fragmentShader:Tt.shadow_frag}};function ore(i,e,t,n,r,s){const o=new De(0);let l,c,a=!0===r?0:1,u=null,d=0,h=null;function m(p,g){t.buffers.color.setClear(p.r,p.g,p.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(p,g=1){o.set(p),a=g,m(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(p){a=p,m(o,a)},render:function f(p,g){let _=!1,y=!0===g.isScene?g.background:null;y&&y.isTexture&&(y=e.get(y));const v=i.xr,b=v.getSession&&v.getSession();b&&"additive"===b.environmentBlendMode&&(y=null),null===y?m(o,a):y&&y.isColor&&(m(y,1),_=!0),(i.autoClear||_)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),y&&(y.isCubeTexture||306===y.mapping)?(void 0===c&&(c=new ii(new hd(1,1,1),new Yo({name:"BackgroundCubeMaterial",uniforms:fd(io.cube.uniforms),vertexShader:io.cube.vertexShader,fragmentShader:io.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(x,M,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,(u!==y||d!==y.version||h!==i.toneMapping)&&(c.material.needsUpdate=!0,u=y,d=y.version,h=i.toneMapping),c.layers.enableAll(),p.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(void 0===l&&(l=new ii(new Yf(2,2),new Yo({name:"BackgroundMaterial",uniforms:fd(io.background.uniforms),vertexShader:io.background.vertexShader,fragmentShader:io.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(l)),l.material.uniforms.t2D.value=y,!0===y.matrixAutoUpdate&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||d!==y.version||h!==i.toneMapping)&&(l.material.needsUpdate=!0,u=y,d=y.version,h=i.toneMapping),l.layers.enableAll(),p.unshift(l,l.geometry,l.material,0,0,null))}}}function are(i,e,t,n){const r=i.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,a={},l=g(null);let c=l,u=!1;function f(L){return n.isWebGL2?i.bindVertexArray(L):s.bindVertexArrayOES(L)}function m(L){return n.isWebGL2?i.deleteVertexArray(L):s.deleteVertexArrayOES(L)}function g(L){const X=[],O=[],G=[];for(let H=0;H<r;H++)X[H]=0,O[H]=0,G[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:O,attributeDivisors:G,object:L,attributes:{},index:null}}function v(){const L=c.newAttributes;for(let X=0,O=L.length;X<O;X++)L[X]=0}function b(L){x(L,0)}function x(L,X){const G=c.enabledAttributes,H=c.attributeDivisors;c.newAttributes[L]=1,0===G[L]&&(i.enableVertexAttribArray(L),G[L]=1),H[L]!==X&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,X),H[L]=X)}function M(){const L=c.newAttributes,X=c.enabledAttributes;for(let O=0,G=X.length;O<G;O++)X[O]!==L[O]&&(i.disableVertexAttribArray(O),X[O]=0)}function C(L,X,O,G,H,F){!0!==n.isWebGL2||5124!==O&&5125!==O?i.vertexAttribPointer(L,X,O,G,H,F):i.vertexAttribIPointer(L,X,O,H,F)}function K(){B(),u=!0,c!==l&&(c=l,f(c.object))}function B(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(L,X,O,G,H){let F=!1;if(o){const z=function p(L,X,O){const G=!0===O.wireframe;let H=a[L.id];void 0===H&&(H={},a[L.id]=H);let F=H[X.id];void 0===F&&(F={},H[X.id]=F);let z=F[G];return void 0===z&&(z=g(function h(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),F[G]=z),z}(G,O,X);c!==z&&(c=z,f(c.object)),F=function _(L,X,O,G){const H=c.attributes,F=X.attributes;let z=0;const de=O.getAttributes();for(const ee in de)if(de[ee].location>=0){const fe=H[ee];let He=F[ee];if(void 0===He&&("instanceMatrix"===ee&&L.instanceMatrix&&(He=L.instanceMatrix),"instanceColor"===ee&&L.instanceColor&&(He=L.instanceColor)),void 0===fe||fe.attribute!==He||He&&fe.data!==He.data)return!0;z++}return c.attributesNum!==z||c.index!==G}(L,G,O,H),F&&function y(L,X,O,G){const H={},F=X.attributes;let z=0;const de=O.getAttributes();for(const ee in de)if(de[ee].location>=0){let fe=F[ee];void 0===fe&&("instanceMatrix"===ee&&L.instanceMatrix&&(fe=L.instanceMatrix),"instanceColor"===ee&&L.instanceColor&&(fe=L.instanceColor));const He={};He.attribute=fe,fe&&fe.data&&(He.data=fe.data),H[ee]=He,z++}c.attributes=H,c.attributesNum=z,c.index=G}(L,G,O,H)}else{const z=!0===X.wireframe;(c.geometry!==G.id||c.program!==O.id||c.wireframe!==z)&&(c.geometry=G.id,c.program=O.id,c.wireframe=z,F=!0)}null!==H&&t.update(H,34963),(F||u)&&(u=!1,function w(L,X,O,G){if(!1===n.isWebGL2&&(L.isInstancedMesh||G.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;v();const H=G.attributes,F=O.getAttributes(),z=X.defaultAttributeValues;for(const de in F){const ee=F[de];if(ee.location>=0){let me=H[de];if(void 0===me&&("instanceMatrix"===de&&L.instanceMatrix&&(me=L.instanceMatrix),"instanceColor"===de&&L.instanceColor&&(me=L.instanceColor)),void 0!==me){const fe=me.normalized,He=me.itemSize,re=t.get(me);if(void 0===re)continue;const $e=re.buffer,We=re.type,ze=re.bytesPerElement;if(me.isInterleavedBufferAttribute){const Me=me.data,dt=Me.stride,ce=me.offset;if(Me.isInstancedInterleavedBuffer){for(let oe=0;oe<ee.locationSize;oe++)x(ee.location+oe,Me.meshPerAttribute);!0!==L.isInstancedMesh&&void 0===G._maxInstanceCount&&(G._maxInstanceCount=Me.meshPerAttribute*Me.count)}else for(let oe=0;oe<ee.locationSize;oe++)b(ee.location+oe);i.bindBuffer(34962,$e);for(let oe=0;oe<ee.locationSize;oe++)C(ee.location+oe,He/ee.locationSize,We,fe,dt*ze,(ce+He/ee.locationSize*oe)*ze)}else{if(me.isInstancedBufferAttribute){for(let Me=0;Me<ee.locationSize;Me++)x(ee.location+Me,me.meshPerAttribute);!0!==L.isInstancedMesh&&void 0===G._maxInstanceCount&&(G._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let Me=0;Me<ee.locationSize;Me++)b(ee.location+Me);i.bindBuffer(34962,$e);for(let Me=0;Me<ee.locationSize;Me++)C(ee.location+Me,He/ee.locationSize,We,fe,He*ze,He/ee.locationSize*Me*ze)}}else if(void 0!==z){const fe=z[de];if(void 0!==fe)switch(fe.length){case 2:i.vertexAttrib2fv(ee.location,fe);break;case 3:i.vertexAttrib3fv(ee.location,fe);break;case 4:i.vertexAttrib4fv(ee.location,fe);break;default:i.vertexAttrib1fv(ee.location,fe)}}}}M()}(L,X,O,G),null!==H&&i.bindBuffer(34963,t.get(H).buffer))},reset:K,resetDefaultState:B,dispose:function S(){K();for(const L in a){const X=a[L];for(const O in X){const G=X[O];for(const H in G)m(G[H].object),delete G[H];delete X[O]}delete a[L]}},releaseStatesOfGeometry:function I(L){if(void 0===a[L.id])return;const X=a[L.id];for(const O in X){const G=X[O];for(const H in G)m(G[H].object),delete G[H];delete X[O]}delete a[L.id]},releaseStatesOfProgram:function W(L){for(const X in a){const O=a[X];if(void 0===O[L.id])continue;const G=O[L.id];for(const H in G)m(G[H].object),delete G[H];delete O[L.id]}},initAttributes:v,enableAttribute:b,disableUnusedAttributes:M}}function lre(i,e,t,n){const r=n.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){i.drawArrays(s,c,u),t.update(u,s,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,f;if(r)h=i,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,u,d),t.update(u,s,d)}}function cre(i,e,t){let n;function s(C){if("highp"===C){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";C="mediump"}return"mediump"===C&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&i instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=i.getParameter(34930),h=i.getParameter(35660),f=i.getParameter(3379),m=i.getParameter(34076),p=i.getParameter(34921),g=i.getParameter(36347),_=i.getParameter(36348),y=i.getParameter(36349),v=h>0,b=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){const C=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:m,maxAttributes:p,maxVertexUniforms:g,maxVaryings:_,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:b,floatVertexTextures:v&&b,maxSamples:o?i.getParameter(36183):0}}function ure(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new uc,a=new Br,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(d,h,f,m){const p=null!==d?d.length:0;let g=null;if(0!==p){if(g=l.value,!0!==m||null===g){const _=f+4*p,y=h.matrixWorldInverse;a.getNormalMatrix(y),(null===g||g.length<_)&&(g=new Float32Array(_));for(let v=0,b=f;v!==p;++v,b+=4)o.copy(d[v]).applyMatrix4(y,a),o.normal.toArray(g,b),g[b+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,g}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const m=0!==d.length||h||0!==n||r;return r=h,t=u(d,f,0),n=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const m=d.clippingPlanes,p=d.clipIntersection,g=d.clipShadows,_=i.get(d);if(!r||null===m||0===m.length||s&&!g)s?u(null):c();else{const y=s?0:n,v=4*y;let b=_.clippingState||null;l.value=b,b=u(m,h,v,f);for(let x=0;x!==v;++x)b[x]=t[x];_.clippingState=b,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=y}}}function dre(i){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new rne(l.height/2);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}io.physical={uniforms:Ui([io.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ie(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new De(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new De(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new De(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag};class ry extends yS{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const H2=[.125,.215,.35,.446,.526,.582],xS=new ry,z2=new De;let wS=null;const hc=(1+Math.sqrt(5))/2,yd=1/hc,G2=[new D(1,1,1),new D(-1,1,1),new D(1,1,-1),new D(-1,1,-1),new D(0,hc,yd),new D(0,hc,-yd),new D(yd,0,hc),new D(-yd,0,hc),new D(hc,yd,0),new D(-hc,yd,0)];class W2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){wS=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=q2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=$2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(wS),e.scissorTest=!1,sy(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),wS=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Nn,minFilter:Nn,generateMipmaps:!1,type:Hf,format:Ps,encoding:Jl,depthBuffer:!1},r=j2(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=j2(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function hre(i){const e=[],t=[],n=[];let r=i;const s=i-4+1+H2.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>i-4?l=H2[o-i+4-1]:0===o&&(l=0),n.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,m=6,p=3,g=2,_=1,y=new Float32Array(p*m*f),v=new Float32Array(g*m*f),b=new Float32Array(_*m*f);for(let M=0;M<f;M++){const C=M%3*2/3-1,w=M>2?0:-1;y.set([C,w,0,C+2/3,w,0,C+2/3,w+1,0,C,w,0,C+2/3,w+1,0,C,w+1,0],p*m*M),v.set(h,g*m*M),b.set([M,M,M,M,M,M],_*m*M)}const x=new bt;x.setAttribute("position",new jn(y,p)),x.setAttribute("uv",new jn(v,g)),x.setAttribute("faceIndex",new jn(b,_)),e.push(x),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}(s)),this._blurMaterial=function fre(i,e,t){const n=new Float32Array(20),r=new D(0,1,0);return new Yo({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new ii(this._lodPlanes[0],e);this._renderer.compile(t,xS)}_sceneToCubeUV(e,t,n,r){const a=new bi(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(z2),u.toneMapping=0,u.autoClear=!1;const f=new tr({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),m=new ii(new hd,f);let p=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,p=!0):(f.color.copy(z2),p=!0);for(let _=0;_<6;_++){const y=_%3;0===y?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1===y?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const v=this._cubeSize;sy(r,y*v,_>2?v:0,v,v),u.setRenderTarget(r),p&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=g}_textureToCubeUV(e,t){const n=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=q2()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=$2());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new ii(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;sy(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,xS)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,G2[(r-1)%G2.length])}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new ii(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[n]-1,m=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,p=s/m,g=isFinite(s)?1+Math.floor(3*p):20;g>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const _=[];let y=0;for(let C=0;C<20;++C){const w=C/p,S=Math.exp(-w*w/2);_.push(S),0===C?y+=S:C<g&&(y+=2*S)}for(let C=0;C<_.length;C++)_[C]=_[C]/y;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=_,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:v}=this;h.dTheta.value=m,h.mipInt.value=v-n;const b=this._sizeLods[r];sy(t,3*b*(r>v-4?r-v+4:0),4*(this._cubeSize-b),3*b,2*b),l.setRenderTarget(t),l.render(d,xS)}}function j2(i,e,t){const n=new rc(i,e,t);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function sy(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function $2(){return new Yo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function q2(){return new Yo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function pre(i){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new W2(i)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===t&&(t=new W2(i));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function mre(i){const e={};function t(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return null!==t(n)},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function gre(i,e,t,n){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),n.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,m=d.attributes.position;let p=0;if(null!==f){const y=f.array;p=f.version;for(let v=0,b=y.length;v<b;v+=3){const x=y[v+0],M=y[v+1],C=y[v+2];h.push(x,M,M,C,C,x)}}else{p=m.version;for(let v=0,b=m.array.length/3-1;v<b;v+=3){const x=v+0,M=v+1,C=v+2;h.push(x,M,M,C,C,x)}}const g=new(M2(h)?B2:N2)(h,1);g.version=p;const _=s.get(d);_&&e.remove(_),s.set(d,g)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const m in h)e.update(h[m],34962);const f=d.morphAttributes;for(const m in f){const p=f[m];for(let g=0,_=p.length;g<_;g++)e.update(p[g],34962)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function _re(i,e,t,n){const r=n.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,f){i.drawElements(s,f,a,h*l),t.update(f,s,1)},this.renderInstances=function d(h,f,m){if(0===m)return;let p,g;if(r)p=i,g="drawElementsInstanced";else if(p=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",null===p)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[g](s,f,a,h*l,m),t.update(f,s,m)}}function yre(i){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function n(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function vre(i,e){return i[0]-e[0]}function bre(i,e){return Math.abs(e[1])-Math.abs(i[1])}function xre(i,e,t){const n={},r=new Float32Array(8),s=new WeakMap,o=new tn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==m?m.length:0;let g=s.get(u);if(void 0===g||g.count!==p){let X=function(){B.dispose(),s.delete(u),u.removeEventListener("dispose",X)};void 0!==g&&g.texture.dispose();const v=void 0!==u.morphAttributes.position,b=void 0!==u.morphAttributes.normal,x=void 0!==u.morphAttributes.color,M=u.morphAttributes.position||[],C=u.morphAttributes.normal||[],w=u.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===b&&(S=2),!0===x&&(S=3);let I=u.attributes.position.count*S,W=1;I>e.maxTextureSize&&(W=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const K=new Float32Array(I*W*4*p),B=new JM(K,I,W,p);B.type=ka,B.needsUpdate=!0;const L=4*S;for(let O=0;O<p;O++){const G=M[O],H=C[O],F=w[O],z=I*W*4*O;for(let de=0;de<G.count;de++){const ee=de*L;!0===v&&(o.fromBufferAttribute(G,de),K[z+ee+0]=o.x,K[z+ee+1]=o.y,K[z+ee+2]=o.z,K[z+ee+3]=0),!0===b&&(o.fromBufferAttribute(H,de),K[z+ee+4]=o.x,K[z+ee+5]=o.y,K[z+ee+6]=o.z,K[z+ee+7]=0),!0===x&&(o.fromBufferAttribute(F,de),K[z+ee+8]=o.x,K[z+ee+9]=o.y,K[z+ee+10]=o.z,K[z+ee+11]=4===F.itemSize?o.w:1)}}g={count:p,texture:B,size:new ie(I,W)},s.set(u,g),u.addEventListener("dispose",X)}let _=0;for(let v=0;v<f.length;v++)_+=f[v];const y=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(i,"morphTargetBaseInfluence",y),h.getUniforms().setValue(i,"morphTargetInfluences",f),h.getUniforms().setValue(i,"morphTargetsTexture",g.texture,t),h.getUniforms().setValue(i,"morphTargetsTextureSize",g.size)}else{const m=void 0===f?0:f.length;let p=n[u.id];if(void 0===p||p.length!==m){p=[];for(let b=0;b<m;b++)p[b]=[b,0];n[u.id]=p}for(let b=0;b<m;b++){const x=p[b];x[0]=b,x[1]=f[b]}p.sort(bre);for(let b=0;b<8;b++)b<m&&p[b][1]?(a[b][0]=p[b][0],a[b][1]=p[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(vre);const g=u.morphAttributes.position,_=u.morphAttributes.normal;let y=0;for(let b=0;b<8;b++){const x=a[b],M=x[0],C=x[1];M!==Number.MAX_SAFE_INTEGER&&C?(g&&u.getAttribute("morphTarget"+b)!==g[M]&&u.setAttribute("morphTarget"+b,g[M]),_&&u.getAttribute("morphNormal"+b)!==_[M]&&u.setAttribute("morphNormal"+b,_[M]),r[b]=C,y+=C):(g&&!0===u.hasAttribute("morphTarget"+b)&&u.deleteAttribute("morphTarget"+b),_&&!0===u.hasAttribute("morphNormal"+b)&&u.deleteAttribute("morphNormal"+b),r[b]=0)}const v=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(i,"morphTargetBaseInfluence",v),h.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function wre(i,e,t,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,d=e.get(l,l.geometry);return r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),d},dispose:function o(){r=new WeakMap}}}const X2=new Fs,Y2=new JM,K2=new E2,Z2=new ny,Q2=[],J2=[],e3=new Float32Array(16),t3=new Float32Array(9),n3=new Float32Array(4);function vd(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=Q2[r];if(void 0===s&&(s=new Float32Array(r),Q2[r]=s),0!==e){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function nr(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function ir(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function oy(i,e){let t=J2[e];void 0===t&&(t=new Int32Array(e),J2[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function Mre(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Sre(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(nr(t,e))return;i.uniform2fv(this.addr,e),ir(t,e)}}function Cre(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(nr(t,e))return;i.uniform3fv(this.addr,e),ir(t,e)}}function Ere(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(nr(t,e))return;i.uniform4fv(this.addr,e),ir(t,e)}}function Dre(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(nr(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),ir(t,e)}else{if(nr(t,n))return;n3.set(n),i.uniformMatrix2fv(this.addr,!1,n3),ir(t,n)}}function Tre(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(nr(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),ir(t,e)}else{if(nr(t,n))return;t3.set(n),i.uniformMatrix3fv(this.addr,!1,t3),ir(t,n)}}function Are(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(nr(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),ir(t,e)}else{if(nr(t,n))return;e3.set(n),i.uniformMatrix4fv(this.addr,!1,e3),ir(t,n)}}function Ire(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function Rre(i,e){const t=this.cache;nr(t,e)||(i.uniform2iv(this.addr,e),ir(t,e))}function Pre(i,e){const t=this.cache;nr(t,e)||(i.uniform3iv(this.addr,e),ir(t,e))}function Lre(i,e){const t=this.cache;nr(t,e)||(i.uniform4iv(this.addr,e),ir(t,e))}function Ore(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function Fre(i,e){const t=this.cache;nr(t,e)||(i.uniform2uiv(this.addr,e),ir(t,e))}function kre(i,e){const t=this.cache;nr(t,e)||(i.uniform3uiv(this.addr,e),ir(t,e))}function Nre(i,e){const t=this.cache;nr(t,e)||(i.uniform4uiv(this.addr,e),ir(t,e))}function Bre(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||X2,r)}function Vre(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||K2,r)}function Ure(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||Z2,r)}function Hre(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||Y2,r)}function Gre(i,e){i.uniform1fv(this.addr,e)}function Wre(i,e){const t=vd(e,this.size,2);i.uniform2fv(this.addr,t)}function jre(i,e){const t=vd(e,this.size,3);i.uniform3fv(this.addr,t)}function $re(i,e){const t=vd(e,this.size,4);i.uniform4fv(this.addr,t)}function qre(i,e){const t=vd(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function Xre(i,e){const t=vd(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function Yre(i,e){const t=vd(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Kre(i,e){i.uniform1iv(this.addr,e)}function Zre(i,e){i.uniform2iv(this.addr,e)}function Qre(i,e){i.uniform3iv(this.addr,e)}function Jre(i,e){i.uniform4iv(this.addr,e)}function ese(i,e){i.uniform1uiv(this.addr,e)}function tse(i,e){i.uniform2uiv(this.addr,e)}function nse(i,e){i.uniform3uiv(this.addr,e)}function ise(i,e){i.uniform4uiv(this.addr,e)}function rse(i,e,t){const n=e.length,r=oy(t,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)t.setTexture2D(e[s]||X2,r[s])}function sse(i,e,t){const n=e.length,r=oy(t,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)t.setTexture3D(e[s]||K2,r[s])}function ose(i,e,t){const n=e.length,r=oy(t,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)t.setTextureCube(e[s]||Z2,r[s])}function ase(i,e,t){const n=e.length,r=oy(t,n);i.uniform1iv(this.addr,r);for(let s=0;s!==n;++s)t.setTexture2DArray(e[s]||Y2,r[s])}class cse{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function zre(i){switch(i){case 5126:return Mre;case 35664:return Sre;case 35665:return Cre;case 35666:return Ere;case 35674:return Dre;case 35675:return Tre;case 35676:return Are;case 5124:case 35670:return Ire;case 35667:case 35671:return Rre;case 35668:case 35672:return Pre;case 35669:case 35673:return Lre;case 5125:return Ore;case 36294:return Fre;case 36295:return kre;case 36296:return Nre;case 35678:case 36198:case 36298:case 36306:case 35682:return Bre;case 35679:case 36299:case 36307:return Vre;case 35680:case 36300:case 36308:case 36293:return Ure;case 36289:case 36303:case 36311:case 36292:return Hre}}(t.type)}}class use{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function lse(i){switch(i){case 5126:return Gre;case 35664:return Wre;case 35665:return jre;case 35666:return $re;case 35674:return qre;case 35675:return Xre;case 35676:return Yre;case 5124:case 35670:return Kre;case 35667:case 35671:return Zre;case 35668:case 35672:return Qre;case 35669:case 35673:return Jre;case 5125:return ese;case 36294:return tse;case 36295:return nse;case 36296:return ise;case 35678:case 36198:case 36298:case 36306:case 35682:return rse;case 35679:case 36299:case 36307:return sse;case 35680:case 36300:case 36308:case 36293:return ose;case 36289:case 36303:case 36311:case 36292:return ase}}(t.type)}}class dse{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const SS=/(\w+)(\])?(\[|\.)?/g;function r3(i,e){i.seq.push(e),i.map[e.id]=e}function hse(i,e,t){const n=i.name,r=n.length;for(SS.lastIndex=0;;){const s=SS.exec(n),o=SS.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){r3(t,void 0===c?new cse(a,i,e):new use(a,i,e));break}{let d=t.map[a];void 0===d&&(d=new dse(a),r3(t,d)),t=d}}}class ay{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r);hse(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,n,r){const s=this.map[t];void 0!==s&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function s3(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let fse=0;function o3(i,e,t){const n=i.getShaderParameter(e,35713),r=i.getShaderInfoLog(e).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function pse(i,e){const t=i.split("\n"),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join("\n")}(i.getShaderSource(e),o)}return r}function gse(i,e){const t=function mse(i){switch(i){case Jl:return["Linear","( value )"];case Kt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function _se(i,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Kf(i){return""!==i}function a3(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function l3(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const xse=/^[ \t]*#include +<([\w\d./]+)>/gm;function CS(i){return i.replace(xse,wse)}function wse(i,e){const t=Tt[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return CS(t)}const Mse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function c3(i){return i.replace(Mse,Sse)}function Sse(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function u3(i){let e="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?e+="\n#define HIGH_PRECISION":"mediump"===i.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(e+="\n#define LOW_PRECISION"),e}function Ise(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function Cse(i){let e="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function Ese(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function Dse(i){let e="ENVMAP_MODE_REFLECTION";return i.envMap&&302===i.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function Tse(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function Ase(i){const e=i.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}(t),f=t.isWebGL2?"":function yse(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Kf).join("\n")}(t),m=function vse(i){const e=[];for(const t in i){const n=i[t];!1!==n&&e.push("#define "+t+" "+n)}return e.join("\n")}(s),p=r.createProgram();let g,_,y=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(g=[m].filter(Kf).join("\n"),g.length>0&&(g+="\n"),_=[f,m].filter(Kf).join("\n"),_.length>0&&(_+="\n")):(g=[u3(t),"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Kf).join("\n"),_=[f,u3(t),"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Tt.tonemapping_pars_fragment:"",0!==t.toneMapping?_se("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Tt.encodings_pars_fragment,gse("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Kf).join("\n")),o=CS(o),o=a3(o,t),o=l3(o,t),a=CS(a),a=a3(a,t),a=l3(a,t),o=c3(o),a=c3(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,_=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const b=y+_+a,x=s3(r,35633,y+g+o),M=s3(r,35632,b);if(r.attachShader(p,x),r.attachShader(p,M),void 0!==t.index0AttributeName?r.bindAttribLocation(p,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(p,0,"position"),r.linkProgram(p),i.debug.checkShaderErrors){const S=r.getProgramInfoLog(p).trim(),I=r.getShaderInfoLog(x).trim(),W=r.getShaderInfoLog(M).trim();let K=!0,B=!0;if(!1===r.getProgramParameter(p,35714)){K=!1;const L=o3(r,x,"vertex"),X=o3(r,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(p,35715)+"\n\nProgram Info Log: "+S+"\n"+L+"\n"+X)}else""!==S?console.warn("THREE.WebGLProgram: Program Info Log:",S):(""===I||""===W)&&(B=!1);B&&(this.diagnostics={runnable:K,programLog:S,vertexShader:{log:I,prefix:g},fragmentShader:{log:W,prefix:_}})}let C,w;return r.deleteShader(x),r.deleteShader(M),this.getUniforms=function(){return void 0===C&&(C=new ay(r,p)),C},this.getAttributes=function(){return void 0===w&&(w=function bse(i,e){const t={},n=i.getProgramParameter(e,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}(r,p)),w},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(p),this.program=void 0},this.name=t.shaderName,this.id=fse++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=x,this.fragmentShader=M,this}let Rse=0;class Pse{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Lse(e),t.set(e,n)),n}}class Lse{constructor(e){this.id=Rse++,this.code=e,this.usedTimes=0}}function Ose(i,e,t,n,r,s,o){const a=new aS,l=new Pse,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function p(w,S,I,W,K){const B=W.fog,L=K.geometry,O=(w.isMeshStandardMaterial?t:e).get(w.envMap||(w.isMeshStandardMaterial?W.environment:null)),G=O&&306===O.mapping?O.image.height:null,H=m[w.type];null!==w.precision&&(f=r.getMaxPrecision(w.precision),f!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",f,"instead."));const F=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,z=void 0!==F?F.length:0;let ee,me,fe,He,de=0;if(void 0!==L.morphAttributes.position&&(de=1),void 0!==L.morphAttributes.normal&&(de=2),void 0!==L.morphAttributes.color&&(de=3),H){const dt=io[H];ee=dt.vertexShader,me=dt.fragmentShader}else ee=w.vertexShader,me=w.fragmentShader,l.update(w),fe=l.getVertexShaderID(w),He=l.getFragmentShaderID(w);const re=i.getRenderTarget(),We=w.clearcoat>0,ze=w.iridescence>0;return{isWebGL2:u,shaderID:H,shaderName:w.type,vertexShader:ee,fragmentShader:me,defines:w.defines,customVertexShaderID:fe,customFragmentShaderID:He,isRawShaderMaterial:!0===w.isRawShaderMaterial,glslVersion:w.glslVersion,precision:f,instancing:!0===K.isInstancedMesh,instancingColor:!0===K.isInstancedMesh&&null!==K.instanceColor,supportsVertexTextures:h,outputEncoding:null===re?i.outputEncoding:!0===re.isXRRenderTarget?re.texture.encoding:Jl,map:!!w.map,matcap:!!w.matcap,envMap:!!O,envMapMode:O&&O.mapping,envMapCubeUVHeight:G,lightMap:!!w.lightMap,aoMap:!!w.aoMap,emissiveMap:!!w.emissiveMap,bumpMap:!!w.bumpMap,normalMap:!!w.normalMap,objectSpaceNormalMap:1===w.normalMapType,tangentSpaceNormalMap:0===w.normalMapType,decodeVideoTexture:!!w.map&&!0===w.map.isVideoTexture&&w.map.encoding===Kt,clearcoat:We,clearcoatMap:We&&!!w.clearcoatMap,clearcoatRoughnessMap:We&&!!w.clearcoatRoughnessMap,clearcoatNormalMap:We&&!!w.clearcoatNormalMap,iridescence:ze,iridescenceMap:ze&&!!w.iridescenceMap,iridescenceThicknessMap:ze&&!!w.iridescenceThicknessMap,displacementMap:!!w.displacementMap,roughnessMap:!!w.roughnessMap,metalnessMap:!!w.metalnessMap,specularMap:!!w.specularMap,specularIntensityMap:!!w.specularIntensityMap,specularColorMap:!!w.specularColorMap,opaque:!1===w.transparent&&1===w.blending,alphaMap:!!w.alphaMap,alphaTest:w.alphaTest>0,gradientMap:!!w.gradientMap,sheen:w.sheen>0,sheenColorMap:!!w.sheenColorMap,sheenRoughnessMap:!!w.sheenRoughnessMap,transmission:w.transmission>0,transmissionMap:!!w.transmissionMap,thicknessMap:!!w.thicknessMap,combine:w.combine,vertexTangents:!!w.normalMap&&!!L.attributes.tangent,vertexColors:w.vertexColors,vertexAlphas:!0===w.vertexColors&&!!L.attributes.color&&4===L.attributes.color.itemSize,vertexUvs:!!(w.map||w.bumpMap||w.normalMap||w.specularMap||w.alphaMap||w.emissiveMap||w.roughnessMap||w.metalnessMap||w.clearcoatMap||w.clearcoatRoughnessMap||w.clearcoatNormalMap||w.iridescenceMap||w.iridescenceThicknessMap||w.displacementMap||w.transmissionMap||w.thicknessMap||w.specularIntensityMap||w.specularColorMap||w.sheenColorMap||w.sheenRoughnessMap),uvsVertexOnly:!(w.map||w.bumpMap||w.normalMap||w.specularMap||w.alphaMap||w.emissiveMap||w.roughnessMap||w.metalnessMap||w.clearcoatNormalMap||w.iridescenceMap||w.iridescenceThicknessMap||w.transmission>0||w.transmissionMap||w.thicknessMap||w.specularIntensityMap||w.specularColorMap||w.sheen>0||w.sheenColorMap||w.sheenRoughnessMap||!w.displacementMap),fog:!!B,useFog:!0===w.fog,fogExp2:B&&B.isFogExp2,flatShading:!!w.flatShading,sizeAttenuation:w.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===K.isSkinnedMesh,morphTargets:void 0!==L.morphAttributes.position,morphNormals:void 0!==L.morphAttributes.normal,morphColors:void 0!==L.morphAttributes.color,morphTargetsCount:z,morphTextureStride:de,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numSpotLightMaps:S.spotLightMap.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numSpotLightShadowsWithMaps:S.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:w.dithering,shadowMapEnabled:i.shadowMap.enabled&&I.length>0,shadowMapType:i.shadowMap.type,toneMapping:w.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:w.premultipliedAlpha,doubleSided:2===w.side,flipSided:1===w.side,useDepthPacking:!!w.depthPacking,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionDerivatives:w.extensions&&w.extensions.derivatives,extensionFragDepth:w.extensions&&w.extensions.fragDepth,extensionDrawBuffers:w.extensions&&w.extensions.drawBuffers,extensionShaderTextureLOD:w.extensions&&w.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||n.has("EXT_shader_texture_lod"),customProgramCacheKey:w.customProgramCacheKey()}},getProgramCacheKey:function g(w){const S=[];if(w.shaderID?S.push(w.shaderID):(S.push(w.customVertexShaderID),S.push(w.customFragmentShaderID)),void 0!==w.defines)for(const I in w.defines)S.push(I),S.push(w.defines[I]);return!1===w.isRawShaderMaterial&&(function _(w,S){w.push(S.precision),w.push(S.outputEncoding),w.push(S.envMapMode),w.push(S.envMapCubeUVHeight),w.push(S.combine),w.push(S.vertexUvs),w.push(S.fogExp2),w.push(S.sizeAttenuation),w.push(S.morphTargetsCount),w.push(S.morphAttributeCount),w.push(S.numDirLights),w.push(S.numPointLights),w.push(S.numSpotLights),w.push(S.numSpotLightMaps),w.push(S.numHemiLights),w.push(S.numRectAreaLights),w.push(S.numDirLightShadows),w.push(S.numPointLightShadows),w.push(S.numSpotLightShadows),w.push(S.numSpotLightShadowsWithMaps),w.push(S.shadowMapType),w.push(S.toneMapping),w.push(S.numClippingPlanes),w.push(S.numClipIntersection),w.push(S.depthPacking)}(S,w),function y(w,S){a.disableAll(),S.isWebGL2&&a.enable(0),S.supportsVertexTextures&&a.enable(1),S.instancing&&a.enable(2),S.instancingColor&&a.enable(3),S.map&&a.enable(4),S.matcap&&a.enable(5),S.envMap&&a.enable(6),S.lightMap&&a.enable(7),S.aoMap&&a.enable(8),S.emissiveMap&&a.enable(9),S.bumpMap&&a.enable(10),S.normalMap&&a.enable(11),S.objectSpaceNormalMap&&a.enable(12),S.tangentSpaceNormalMap&&a.enable(13),S.clearcoat&&a.enable(14),S.clearcoatMap&&a.enable(15),S.clearcoatRoughnessMap&&a.enable(16),S.clearcoatNormalMap&&a.enable(17),S.iridescence&&a.enable(18),S.iridescenceMap&&a.enable(19),S.iridescenceThicknessMap&&a.enable(20),S.displacementMap&&a.enable(21),S.specularMap&&a.enable(22),S.roughnessMap&&a.enable(23),S.metalnessMap&&a.enable(24),S.gradientMap&&a.enable(25),S.alphaMap&&a.enable(26),S.alphaTest&&a.enable(27),S.vertexColors&&a.enable(28),S.vertexAlphas&&a.enable(29),S.vertexUvs&&a.enable(30),S.vertexTangents&&a.enable(31),S.uvsVertexOnly&&a.enable(32),w.push(a.mask),a.disableAll(),S.fog&&a.enable(0),S.useFog&&a.enable(1),S.flatShading&&a.enable(2),S.logarithmicDepthBuffer&&a.enable(3),S.skinning&&a.enable(4),S.morphTargets&&a.enable(5),S.morphNormals&&a.enable(6),S.morphColors&&a.enable(7),S.premultipliedAlpha&&a.enable(8),S.shadowMapEnabled&&a.enable(9),S.physicallyCorrectLights&&a.enable(10),S.doubleSided&&a.enable(11),S.flipSided&&a.enable(12),S.useDepthPacking&&a.enable(13),S.dithering&&a.enable(14),S.specularIntensityMap&&a.enable(15),S.specularColorMap&&a.enable(16),S.transmission&&a.enable(17),S.transmissionMap&&a.enable(18),S.thicknessMap&&a.enable(19),S.sheen&&a.enable(20),S.sheenColorMap&&a.enable(21),S.sheenRoughnessMap&&a.enable(22),S.decodeVideoTexture&&a.enable(23),S.opaque&&a.enable(24),w.push(a.mask)}(S,w),S.push(i.outputEncoding)),S.push(w.customProgramCacheKey),S.join()},getUniforms:function v(w){const S=m[w.type];let I;return I=S?ene.clone(io[S].uniforms):w.uniforms,I},acquireProgram:function b(w,S){let I;for(let W=0,K=c.length;W<K;W++){const B=c[W];if(B.cacheKey===S){I=B,++I.usedTimes;break}}return void 0===I&&(I=new Ise(i,S,w,s),c.push(I)),I},releaseProgram:function x(w){if(0==--w.usedTimes){const S=c.indexOf(w);c[S]=c[c.length-1],c.pop(),w.destroy()}},releaseShaderCache:function M(w){l.remove(w)},programs:c,dispose:function C(){l.dispose()}}}function Fse(){let i=new WeakMap;return{get:function e(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function t(s){i.delete(s)},update:function n(s,o,a){i.get(s)[o]=a},dispose:function r(){i=new WeakMap}}}function kse(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function d3(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function h3(){const i=[];let e=0;const t=[],n=[],r=[];function o(d,h,f,m,p,g){let _=i[e];return void 0===_?(_={id:d.id,object:d,geometry:h,material:f,groupOrder:m,renderOrder:d.renderOrder,z:p,group:g},i[e]=_):(_.id=d.id,_.object=d,_.geometry=h,_.material=f,_.groupOrder=m,_.renderOrder=d.renderOrder,_.z=p,_.group=g),e++,_}return{opaque:t,transmissive:n,transparent:r,init:function s(){e=0,t.length=0,n.length=0,r.length=0},push:function a(d,h,f,m,p,g){const _=o(d,h,f,m,p,g);f.transmission>0?n.push(_):!0===f.transparent?r.push(_):t.push(_)},unshift:function l(d,h,f,m,p,g){const _=o(d,h,f,m,p,g);f.transmission>0?n.unshift(_):!0===f.transparent?r.unshift(_):t.unshift(_)},finish:function u(){for(let d=e,h=i.length;d<h;d++){const f=i[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){t.length>1&&t.sort(d||kse),n.length>1&&n.sort(h||d3),r.length>1&&r.sort(h||d3)}}}function Nse(){let i=new WeakMap;return{get:function e(n,r){const s=i.get(n);let o;return void 0===s?(o=new h3,i.set(n,[o])):r>=s.length?(o=new h3,s.push(o)):o=s[r],o},dispose:function t(){i=new WeakMap}}}function Bse(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new D,color:new De};break;case"SpotLight":t={position:new D,direction:new D,color:new De,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new D,color:new De,distance:0,decay:0};break;case"HemisphereLight":t={direction:new D,skyColor:new De,groundColor:new De};break;case"RectAreaLight":t={color:new De,position:new D,halfWidth:new D,halfHeight:new D}}return i[e.id]=t,t}}}let Use=0;function Hse(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function zse(i,e){const t=new Bse,n=function Vse(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ie};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ie,shadowCameraNear:1,shadowCameraFar:1e3}}return i[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new D);const s=new D,o=new pt,a=new pt;return{setup:function l(u,d){let h=0,f=0,m=0;for(let W=0;W<9;W++)r.probe[W].set(0,0,0);let p=0,g=0,_=0,y=0,v=0,b=0,x=0,M=0,C=0,w=0;u.sort(Hse);const S=!0!==d?Math.PI:1;for(let W=0,K=u.length;W<K;W++){const B=u[W],L=B.color,X=B.intensity,O=B.distance,G=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)h+=L.r*X*S,f+=L.g*X*S,m+=L.b*X*S;else if(B.isLightProbe)for(let H=0;H<9;H++)r.probe[H].addScaledVector(B.sh.coefficients[H],X);else if(B.isDirectionalLight){const H=t.get(B);if(H.color.copy(B.color).multiplyScalar(B.intensity*S),B.castShadow){const F=B.shadow,z=n.get(B);z.shadowBias=F.bias,z.shadowNormalBias=F.normalBias,z.shadowRadius=F.radius,z.shadowMapSize=F.mapSize,r.directionalShadow[p]=z,r.directionalShadowMap[p]=G,r.directionalShadowMatrix[p]=B.shadow.matrix,b++}r.directional[p]=H,p++}else if(B.isSpotLight){const H=t.get(B);H.position.setFromMatrixPosition(B.matrixWorld),H.color.copy(L).multiplyScalar(X*S),H.distance=O,H.coneCos=Math.cos(B.angle),H.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),H.decay=B.decay,r.spot[_]=H;const F=B.shadow;if(B.map&&(r.spotLightMap[C]=B.map,C++,F.updateMatrices(B),B.castShadow&&w++),r.spotLightMatrix[_]=F.matrix,B.castShadow){const z=n.get(B);z.shadowBias=F.bias,z.shadowNormalBias=F.normalBias,z.shadowRadius=F.radius,z.shadowMapSize=F.mapSize,r.spotShadow[_]=z,r.spotShadowMap[_]=G,M++}_++}else if(B.isRectAreaLight){const H=t.get(B);H.color.copy(L).multiplyScalar(X),H.halfWidth.set(.5*B.width,0,0),H.halfHeight.set(0,.5*B.height,0),r.rectArea[y]=H,y++}else if(B.isPointLight){const H=t.get(B);if(H.color.copy(B.color).multiplyScalar(B.intensity*S),H.distance=B.distance,H.decay=B.decay,B.castShadow){const F=B.shadow,z=n.get(B);z.shadowBias=F.bias,z.shadowNormalBias=F.normalBias,z.shadowRadius=F.radius,z.shadowMapSize=F.mapSize,z.shadowCameraNear=F.camera.near,z.shadowCameraFar=F.camera.far,r.pointShadow[g]=z,r.pointShadowMap[g]=G,r.pointShadowMatrix[g]=B.shadow.matrix,x++}r.point[g]=H,g++}else if(B.isHemisphereLight){const H=t.get(B);H.skyColor.copy(B.color).multiplyScalar(X*S),H.groundColor.copy(B.groundColor).multiplyScalar(X*S),r.hemi[v]=H,v++}}y>0&&(e.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=Se.LTC_FLOAT_1,r.rectAreaLTC2=Se.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Se.LTC_HALF_1,r.rectAreaLTC2=Se.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=m;const I=r.hash;(I.directionalLength!==p||I.pointLength!==g||I.spotLength!==_||I.rectAreaLength!==y||I.hemiLength!==v||I.numDirectionalShadows!==b||I.numPointShadows!==x||I.numSpotShadows!==M||I.numSpotMaps!==C)&&(r.directional.length=p,r.spot.length=_,r.rectArea.length=y,r.point.length=g,r.hemi.length=v,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=M,r.spotShadowMap.length=M,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=x,r.spotLightMatrix.length=M+C-w,r.spotLightMap.length=C,r.numSpotLightShadowsWithMaps=w,I.directionalLength=p,I.pointLength=g,I.spotLength=_,I.rectAreaLength=y,I.hemiLength=v,I.numDirectionalShadows=b,I.numPointShadows=x,I.numSpotShadows=M,I.numSpotMaps=C,r.version=Use++)},setupView:function c(u,d){let h=0,f=0,m=0,p=0,g=0;const _=d.matrixWorldInverse;for(let y=0,v=u.length;y<v;y++){const b=u[y];if(b.isDirectionalLight){const x=r.directional[h];x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(_),h++}else if(b.isSpotLight){const x=r.spot[m];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(_),m++}else if(b.isRectAreaLight){const x=r.rectArea[p];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),a.identity(),o.copy(b.matrixWorld),o.premultiply(_),a.extractRotation(o),x.halfWidth.set(.5*b.width,0,0),x.halfHeight.set(0,.5*b.height,0),x.halfWidth.applyMatrix4(a),x.halfHeight.applyMatrix4(a),p++}else if(b.isPointLight){const x=r.point[f];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(_),f++}else if(b.isHemisphereLight){const x=r.hemi[g];x.direction.setFromMatrixPosition(b.matrixWorld),x.direction.transformDirection(_),g++}}},state:r}}function f3(i,e){const t=new zse(i,e),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:function l(d){t.setup(n,d)},setupLightsView:function c(d){t.setupView(n,d)},pushLight:function o(d){n.push(d)},pushShadow:function a(d){r.push(d)}}}function Gse(i,e){let t=new WeakMap;return{get:function n(s,o=0){const a=t.get(s);let l;return void 0===a?(l=new f3(i,e),t.set(s,[l])):o>=a.length?(l=new f3(i,e),a.push(l)):l=a[o],l},dispose:function r(){t=new WeakMap}}}class p3 extends Bs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class m3 extends Bs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new D,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function $se(i,e,t){let n=new bS;const r=new ie,s=new ie,o=new tn,a=new p3({depthPacking:3201}),l=new m3,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new Yo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ie},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const m=new bt;m.setAttribute("position",new jn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new ii(m,h),g=this;function _(b,x){const M=e.update(p);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===b.mapPass&&(b.mapPass=new rc(r.x,r.y)),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,i.setRenderTarget(b.mapPass),i.clear(),i.renderBufferDirect(x,null,M,h,p,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,i.setRenderTarget(b.map),i.clear(),i.renderBufferDirect(x,null,M,f,p,null)}function y(b,x,M,C,w,S){let I=null;const W=!0===M.isPointLight?b.customDistanceMaterial:b.customDepthMaterial;if(I=void 0!==W?W:!0===M.isPointLight?l:a,i.localClippingEnabled&&!0===x.clipShadows&&Array.isArray(x.clippingPlanes)&&0!==x.clippingPlanes.length||x.displacementMap&&0!==x.displacementScale||x.alphaMap&&x.alphaTest>0){const K=I.uuid,B=x.uuid;let L=c[K];void 0===L&&(L={},c[K]=L);let X=L[B];void 0===X&&(X=I.clone(),L[B]=X),I=X}return I.visible=x.visible,I.wireframe=x.wireframe,I.side=3===S?null!==x.shadowSide?x.shadowSide:x.side:null!==x.shadowSide?x.shadowSide:d[x.side],I.alphaMap=x.alphaMap,I.alphaTest=x.alphaTest,I.clipShadows=x.clipShadows,I.clippingPlanes=x.clippingPlanes,I.clipIntersection=x.clipIntersection,I.displacementMap=x.displacementMap,I.displacementScale=x.displacementScale,I.displacementBias=x.displacementBias,I.wireframeLinewidth=x.wireframeLinewidth,I.linewidth=x.linewidth,!0===M.isPointLight&&!0===I.isMeshDistanceMaterial&&(I.referencePosition.setFromMatrixPosition(M.matrixWorld),I.nearDistance=C,I.farDistance=w),I}function v(b,x,M,C,w){if(!1===b.visible)return;if(b.layers.test(x.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&3===w)&&(!b.frustumCulled||n.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,b.matrixWorld);const W=e.update(b),K=b.material;if(Array.isArray(K)){const B=W.groups;for(let L=0,X=B.length;L<X;L++){const O=B[L],G=K[O.materialIndex];if(G&&G.visible){const H=y(b,G,C,M.near,M.far,w);i.renderBufferDirect(M,null,W,H,b,O)}}}else if(K.visible){const B=y(b,K,C,M.near,M.far,w);i.renderBufferDirect(M,null,W,B,b,null)}}const I=b.children;for(let W=0,K=I.length;W<K;W++)v(I[W],x,M,C,w)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(b,x,M){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===b.length)return;const C=i.getRenderTarget(),w=i.getActiveCubeFace(),S=i.getActiveMipmapLevel(),I=i.state;I.setBlending(0),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);for(let W=0,K=b.length;W<K;W++){const B=b[W],L=B.shadow;if(void 0===L){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(!1===L.autoUpdate&&!1===L.needsUpdate)continue;r.copy(L.mapSize);const X=L.getFrameExtents();r.multiply(X),s.copy(L.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/X.x),r.x=s.x*X.x,L.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/X.y),r.y=s.y*X.y,L.mapSize.y=s.y)),null===L.map&&(L.map=new rc(r.x,r.y,3!==this.type?{minFilter:ti,magFilter:ti}:{}),L.map.texture.name=B.name+".shadowMap",L.camera.updateProjectionMatrix()),i.setRenderTarget(L.map),i.clear();const O=L.getViewportCount();for(let G=0;G<O;G++){const H=L.getViewport(G);o.set(s.x*H.x,s.y*H.y,s.x*H.z,s.y*H.w),I.viewport(o),L.updateMatrices(B,G),n=L.getFrustum(),v(x,M,L.camera,B,this.type)}!0!==L.isPointLightShadow&&3===this.type&&_(L,M),L.needsUpdate=!1}g.needsUpdate=!1,i.setRenderTarget(C,w,S)}}function qse(i,e,t){const n=t.isWebGL2,a=new function r(){let U=!1;const Ee=new tn;let te=null;const Fe=new tn(0,0,0,0);return{setMask:function(Oe){te!==Oe&&!U&&(i.colorMask(Oe,Oe,Oe,Oe),te=Oe)},setLocked:function(Oe){U=Oe},setClear:function(Oe,Ht,xi,qn,Za){!0===Za&&(Oe*=qn,Ht*=qn,xi*=qn),Ee.set(Oe,Ht,xi,qn),!1===Fe.equals(Ee)&&(i.clearColor(Oe,Ht,xi,qn),Fe.copy(Ee))},reset:function(){U=!1,te=null,Fe.set(-1,0,0,0)}}},l=new function s(){let U=!1,Ee=null,te=null,Fe=null;return{setTest:function(Oe){Oe?$e(2929):We(2929)},setMask:function(Oe){Ee!==Oe&&!U&&(i.depthMask(Oe),Ee=Oe)},setFunc:function(Oe){if(te!==Oe){if(Oe)switch(Oe){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}else i.depthFunc(515);te=Oe}},setLocked:function(Oe){U=Oe},setClear:function(Oe){Fe!==Oe&&(i.clearDepth(Oe),Fe=Oe)},reset:function(){U=!1,Ee=null,te=null,Fe=null}}},c=new function o(){let U=!1,Ee=null,te=null,Fe=null,Oe=null,Ht=null,xi=null,qn=null,Za=null;return{setTest:function(Vn){U||(Vn?$e(2960):We(2960))},setMask:function(Vn){Ee!==Vn&&!U&&(i.stencilMask(Vn),Ee=Vn)},setFunc:function(Vn,ta,ms){(te!==Vn||Fe!==ta||Oe!==ms)&&(i.stencilFunc(Vn,ta,ms),te=Vn,Fe=ta,Oe=ms)},setOp:function(Vn,ta,ms){(Ht!==Vn||xi!==ta||qn!==ms)&&(i.stencilOp(Vn,ta,ms),Ht=Vn,xi=ta,qn=ms)},setLocked:function(Vn){U=Vn},setClear:function(Vn){Za!==Vn&&(i.clearStencil(Vn),Za=Vn)},reset:function(){U=!1,Ee=null,te=null,Fe=null,Oe=null,Ht=null,xi=null,qn=null,Za=null}}},u=new WeakMap,d=new WeakMap;let h={},f={},m=new WeakMap,p=[],g=null,_=!1,y=null,v=null,b=null,x=null,M=null,C=null,w=null,S=!1,I=null,W=null,K=null,B=null,L=null;const X=i.getParameter(35661);let O=!1,G=0;const H=i.getParameter(7938);-1!==H.indexOf("WebGL")?(G=parseFloat(/^WebGL (\d)/.exec(H)[1]),O=G>=1):-1!==H.indexOf("OpenGL ES")&&(G=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),O=G>=2);let F=null,z={};const de=i.getParameter(3088),ee=i.getParameter(2978),me=(new tn).fromArray(de),fe=(new tn).fromArray(ee);function He(U,Ee,te){const Fe=new Uint8Array(4),Oe=i.createTexture();i.bindTexture(U,Oe),i.texParameteri(U,10241,9728),i.texParameteri(U,10240,9728);for(let Ht=0;Ht<te;Ht++)i.texImage2D(Ee+Ht,0,6408,1,1,0,6408,5121,Fe);return Oe}const re={};function $e(U){!0!==h[U]&&(i.enable(U),h[U]=!0)}function We(U){!1!==h[U]&&(i.disable(U),h[U]=!1)}re[3553]=He(3553,3553,1),re[34067]=He(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),$e(2929),l.setFunc(3),Ce(!1),ct(1),$e(2884),ye(0);const ce={100:32774,101:32778,102:32779};if(n)ce[103]=32775,ce[104]=32776;else{const U=e.get("EXT_blend_minmax");null!==U&&(ce[103]=U.MIN_EXT,ce[104]=U.MAX_EXT)}const oe={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function ye(U,Ee,te,Fe,Oe,Ht,xi,qn){if(0!==U){if(!1===_&&($e(3042),_=!0),5===U)Oe=Oe||Ee,Ht=Ht||te,xi=xi||Fe,(Ee!==v||Oe!==M)&&(i.blendEquationSeparate(ce[Ee],ce[Oe]),v=Ee,M=Oe),(te!==b||Fe!==x||Ht!==C||xi!==w)&&(i.blendFuncSeparate(oe[te],oe[Fe],oe[Ht],oe[xi]),b=te,x=Fe,C=Ht,w=xi),y=U,S=null;else if(U!==y||qn!==S){if((100!==v||100!==M)&&(i.blendEquation(32774),v=100,M=100),qn)switch(U){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",U)}else switch(U){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",U)}b=null,x=null,C=null,w=null,y=U,S=qn}}else!0===_&&(We(3042),_=!1)}function Ce(U){I!==U&&(i.frontFace(U?2304:2305),I=U)}function ct(U){0!==U?($e(2884),U!==W&&i.cullFace(1===U?1029:2===U?1028:1032)):We(2884),W=U}function Ye(U,Ee,te){U?($e(32823),(B!==Ee||L!==te)&&(i.polygonOffset(Ee,te),B=Ee,L=te)):We(32823)}function Xt(U){void 0===U&&(U=33984+X-1),F!==U&&(i.activeTexture(U),F=U)}return{buffers:{color:a,depth:l,stencil:c},enable:$e,disable:We,bindFramebuffer:function ze(U,Ee){return f[U]!==Ee&&(i.bindFramebuffer(U,Ee),f[U]=Ee,n&&(36009===U&&(f[36160]=Ee),36160===U&&(f[36009]=Ee)),!0)},drawBuffers:function Me(U,Ee){let te=p,Fe=!1;if(U)if(te=m.get(Ee),void 0===te&&(te=[],m.set(Ee,te)),U.isWebGLMultipleRenderTargets){const Oe=U.texture;if(te.length!==Oe.length||36064!==te[0]){for(let Ht=0,xi=Oe.length;Ht<xi;Ht++)te[Ht]=36064+Ht;te.length=Oe.length,Fe=!0}}else 36064!==te[0]&&(te[0]=36064,Fe=!0);else 1029!==te[0]&&(te[0]=1029,Fe=!0);Fe&&(t.isWebGL2?i.drawBuffers(te):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(te))},useProgram:function dt(U){return g!==U&&(i.useProgram(U),g=U,!0)},setBlending:ye,setMaterial:function Be(U,Ee){2===U.side?We(2884):$e(2884);let te=1===U.side;Ee&&(te=!te),Ce(te),1===U.blending&&!1===U.transparent?ye(0):ye(U.blending,U.blendEquation,U.blendSrc,U.blendDst,U.blendEquationAlpha,U.blendSrcAlpha,U.blendDstAlpha,U.premultipliedAlpha),l.setFunc(U.depthFunc),l.setTest(U.depthTest),l.setMask(U.depthWrite),a.setMask(U.colorWrite);const Fe=U.stencilWrite;c.setTest(Fe),Fe&&(c.setMask(U.stencilWriteMask),c.setFunc(U.stencilFunc,U.stencilRef,U.stencilFuncMask),c.setOp(U.stencilFail,U.stencilZFail,U.stencilZPass)),Ye(U.polygonOffset,U.polygonOffsetFactor,U.polygonOffsetUnits),!0===U.alphaToCoverage?$e(32926):We(32926)},setFlipSided:Ce,setCullFace:ct,setLineWidth:function et(U){U!==K&&(O&&i.lineWidth(U),K=U)},setPolygonOffset:Ye,setScissorTest:function nn(U){U?$e(3089):We(3089)},activeTexture:Xt,bindTexture:function R(U,Ee){null===F&&Xt();let te=z[F];void 0===te&&(te={type:void 0,texture:void 0},z[F]=te),(te.type!==U||te.texture!==Ee)&&(i.bindTexture(U,Ee||re[U]),te.type=U,te.texture=Ee)},unbindTexture:function E(){const U=z[F];void 0!==U&&void 0!==U.type&&(i.bindTexture(U.type,null),U.type=void 0,U.texture=void 0)},compressedTexImage2D:function Q(){try{i.compressedTexImage2D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texImage2D:function he(){try{i.texImage2D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texImage3D:function be(){try{i.texImage3D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},updateUBOMapping:function rt(U,Ee){let te=d.get(Ee);void 0===te&&(te=new WeakMap,d.set(Ee,te));let Fe=te.get(U);void 0===Fe&&(Fe=i.getUniformBlockIndex(Ee,U.name),te.set(U,Fe))},uniformBlockBinding:function Lt(U,Ee){const Fe=d.get(Ee).get(U);u.get(U)!==Fe&&(i.uniformBlockBinding(Ee,Fe,U.__bindingPointIndex),u.set(U,Fe))},texStorage2D:function it(){try{i.texStorage2D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texStorage3D:function T(){try{i.texStorage3D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texSubImage2D:function _e(){try{i.texSubImage2D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texSubImage3D:function ve(){try{i.texSubImage3D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},compressedTexSubImage2D:function Te(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},scissor:function Pe(U){!1===me.equals(U)&&(i.scissor(U.x,U.y,U.z,U.w),me.copy(U))},viewport:function Ie(U){!1===fe.equals(U)&&(i.viewport(U.x,U.y,U.z,U.w),fe.copy(U))},reset:function xn(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),h={},F=null,z={},f={},m=new WeakMap,p=[],g=null,_=!1,y=null,v=null,b=null,x=null,M=null,C=null,w=null,S=!1,I=null,W=null,K=null,B=null,L=null,me.set(0,0,i.canvas.width,i.canvas.height),fe.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}}}function Xse(i,e,t,n,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let p;const g=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function y(R,E){return _?new OffscreenCanvas(R,E):jf("canvas")}function v(R,E,Q,_e){let ve=1;if((R.width>_e||R.height>_e)&&(ve=_e/Math.max(R.width,R.height)),ve<1||!0===E){if(typeof HTMLImageElement<"u"&&R instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&R instanceof ImageBitmap){const Te=E?F_:Math.floor,it=Te(ve*R.width),T=Te(ve*R.height);void 0===p&&(p=y(it,T));const he=Q?y(it,T):p;return he.width=it,he.height=T,he.getContext("2d").drawImage(R,0,0,it,T),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+R.width+"x"+R.height+") to ("+it+"x"+T+")."),he}return"data"in R&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+R.width+"x"+R.height+")."),R}return R}function b(R){return YM(R.width)&&YM(R.height)}function M(R,E){return R.generateMipmaps&&E&&R.minFilter!==ti&&R.minFilter!==Nn}function C(R){i.generateMipmap(R)}function w(R,E,Q,_e,ve=!1){if(!1===a)return E;if(null!==R){if(void 0!==i[R])return i[R];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+R+"'")}let Te=E;return 6403===E&&(5126===Q&&(Te=33326),5131===Q&&(Te=33325),5121===Q&&(Te=33321)),33319===E&&(5126===Q&&(Te=33328),5131===Q&&(Te=33327),5121===Q&&(Te=33323)),6408===E&&(5126===Q&&(Te=34836),5131===Q&&(Te=34842),5121===Q&&(Te=_e===Kt&&!1===ve?35907:32856),32819===Q&&(Te=32854),32820===Q&&(Te=32855)),(33325===Te||33326===Te||33327===Te||33328===Te||34842===Te||34836===Te)&&e.get("EXT_color_buffer_float"),Te}function S(R,E,Q){return!0===M(R,Q)||R.isFramebufferTexture&&R.minFilter!==ti&&R.minFilter!==Nn?Math.log2(Math.max(E.width,E.height))+1:void 0!==R.mipmaps&&R.mipmaps.length>0?R.mipmaps.length:R.isCompressedTexture&&Array.isArray(R.image)?E.mipmaps.length:1}function I(R){return R===ti||1004===R||1005===R?9728:9729}function W(R){const E=R.target;E.removeEventListener("dispose",W),function B(R){const E=n.get(R);if(void 0===E.__webglInit)return;const Q=R.source,_e=g.get(Q);if(_e){const ve=_e[E.__cacheKey];ve.usedTimes--,0===ve.usedTimes&&L(R),0===Object.keys(_e).length&&g.delete(Q)}n.remove(R)}(E),E.isVideoTexture&&m.delete(E)}function K(R){const E=R.target;E.removeEventListener("dispose",K),function X(R){const E=R.texture,Q=n.get(R),_e=n.get(E);if(void 0!==_e.__webglTexture&&(i.deleteTexture(_e.__webglTexture),o.memory.textures--),R.depthTexture&&R.depthTexture.dispose(),R.isWebGLCubeRenderTarget)for(let ve=0;ve<6;ve++)i.deleteFramebuffer(Q.__webglFramebuffer[ve]),Q.__webglDepthbuffer&&i.deleteRenderbuffer(Q.__webglDepthbuffer[ve]);else{if(i.deleteFramebuffer(Q.__webglFramebuffer),Q.__webglDepthbuffer&&i.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer)for(let ve=0;ve<Q.__webglColorRenderbuffer.length;ve++)Q.__webglColorRenderbuffer[ve]&&i.deleteRenderbuffer(Q.__webglColorRenderbuffer[ve]);Q.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Q.__webglDepthRenderbuffer)}if(R.isWebGLMultipleRenderTargets)for(let ve=0,Te=E.length;ve<Te;ve++){const it=n.get(E[ve]);it.__webglTexture&&(i.deleteTexture(it.__webglTexture),o.memory.textures--),n.remove(E[ve])}n.remove(E),n.remove(R)}(E)}function L(R){const E=n.get(R);i.deleteTexture(E.__webglTexture),delete g.get(R.source)[E.__cacheKey],o.memory.textures--}let O=0;function z(R,E){const Q=n.get(R);if(R.isVideoTexture&&function nn(R){const E=o.render.frame;m.get(R)!==E&&(m.set(R,E),R.update())}(R),!1===R.isRenderTargetTexture&&R.version>0&&Q.__version!==R.version){const _e=R.image;if(null===_e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==_e.complete)return void We(Q,R,E);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+E),t.bindTexture(3553,Q.__webglTexture)}const fe={[Yl]:10497,[er]:33071,1002:33648},He={[ti]:9728,1004:9984,1005:9986,[Nn]:9729,1007:9985,[Fa]:9987};function re(R,E,Q){if(Q?(i.texParameteri(R,10242,fe[E.wrapS]),i.texParameteri(R,10243,fe[E.wrapT]),(32879===R||35866===R)&&i.texParameteri(R,32882,fe[E.wrapR]),i.texParameteri(R,10240,He[E.magFilter]),i.texParameteri(R,10241,He[E.minFilter])):(i.texParameteri(R,10242,33071),i.texParameteri(R,10243,33071),(32879===R||35866===R)&&i.texParameteri(R,32882,33071),(E.wrapS!==er||E.wrapT!==er)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(R,10240,I(E.magFilter)),i.texParameteri(R,10241,I(E.minFilter)),E.minFilter!==ti&&E.minFilter!==Nn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const _e=e.get("EXT_texture_filter_anisotropic");if(E.type===ka&&!1===e.has("OES_texture_float_linear")||!1===a&&E.type===Hf&&!1===e.has("OES_texture_half_float_linear"))return;(E.anisotropy>1||n.get(E).__currentAnisotropy)&&(i.texParameterf(R,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,r.getMaxAnisotropy())),n.get(E).__currentAnisotropy=E.anisotropy)}}function $e(R,E){let Q=!1;void 0===R.__webglInit&&(R.__webglInit=!0,E.addEventListener("dispose",W));const _e=E.source;let ve=g.get(_e);void 0===ve&&(ve={},g.set(_e,ve));const Te=function F(R){const E=[];return E.push(R.wrapS),E.push(R.wrapT),E.push(R.magFilter),E.push(R.minFilter),E.push(R.anisotropy),E.push(R.internalFormat),E.push(R.format),E.push(R.type),E.push(R.generateMipmaps),E.push(R.premultiplyAlpha),E.push(R.flipY),E.push(R.unpackAlignment),E.push(R.encoding),E.join()}(E);if(Te!==R.__cacheKey){void 0===ve[Te]&&(ve[Te]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,Q=!0),ve[Te].usedTimes++;const it=ve[R.__cacheKey];void 0!==it&&(ve[R.__cacheKey].usedTimes--,0===it.usedTimes&&L(E)),R.__cacheKey=Te,R.__webglTexture=ve[Te].texture}return Q}function We(R,E,Q){let _e=3553;E.isDataArrayTexture&&(_e=35866),E.isData3DTexture&&(_e=32879);const ve=$e(R,E),Te=E.source;if(t.activeTexture(33984+Q),t.bindTexture(_e,R.__webglTexture),Te.version!==Te.__currentVersion||!0===ve){i.pixelStorei(37440,E.flipY),i.pixelStorei(37441,E.premultiplyAlpha),i.pixelStorei(3317,E.unpackAlignment),i.pixelStorei(37443,0);const it=function x(R){return!a&&(R.wrapS!==er||R.wrapT!==er||R.minFilter!==ti&&R.minFilter!==Nn)}(E)&&!1===b(E.image);let T=v(E.image,it,!1,u);T=Xt(E,T);const he=b(T)||a,be=s.convert(E.format,E.encoding);let rt,Pe=s.convert(E.type),Ie=w(E.internalFormat,be,Pe,E.encoding,E.isVideoTexture);re(_e,E,he);const Lt=E.mipmaps,xn=a&&!0!==E.isVideoTexture,U=void 0===Te.__currentVersion||!0===ve,Ee=S(E,T,he);if(E.isDepthTexture)Ie=6402,a?Ie=E.type===ka?36012:E.type===Zl?33190:E.type===Yu?35056:33189:E.type===ka&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),E.format===Ql&&6402===Ie&&1012!==E.type&&E.type!==Zl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),E.type=Zl,Pe=s.convert(E.type)),E.format===Ku&&6402===Ie&&(Ie=34041,E.type!==Yu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),E.type=Yu,Pe=s.convert(E.type))),U&&(xn?t.texStorage2D(3553,1,Ie,T.width,T.height):t.texImage2D(3553,0,Ie,T.width,T.height,0,be,Pe,null));else if(E.isDataTexture)if(Lt.length>0&&he){xn&&U&&t.texStorage2D(3553,Ee,Ie,Lt[0].width,Lt[0].height);for(let te=0,Fe=Lt.length;te<Fe;te++)rt=Lt[te],xn?t.texSubImage2D(3553,te,0,0,rt.width,rt.height,be,Pe,rt.data):t.texImage2D(3553,te,Ie,rt.width,rt.height,0,be,Pe,rt.data);E.generateMipmaps=!1}else xn?(U&&t.texStorage2D(3553,Ee,Ie,T.width,T.height),t.texSubImage2D(3553,0,0,0,T.width,T.height,be,Pe,T.data)):t.texImage2D(3553,0,Ie,T.width,T.height,0,be,Pe,T.data);else if(E.isCompressedTexture){xn&&U&&t.texStorage2D(3553,Ee,Ie,Lt[0].width,Lt[0].height);for(let te=0,Fe=Lt.length;te<Fe;te++)rt=Lt[te],E.format!==Ps?null!==be?xn?t.compressedTexSubImage2D(3553,te,0,0,rt.width,rt.height,be,rt.data):t.compressedTexImage2D(3553,te,Ie,rt.width,rt.height,0,rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xn?t.texSubImage2D(3553,te,0,0,rt.width,rt.height,be,Pe,rt.data):t.texImage2D(3553,te,Ie,rt.width,rt.height,0,be,Pe,rt.data)}else if(E.isDataArrayTexture)xn?(U&&t.texStorage3D(35866,Ee,Ie,T.width,T.height,T.depth),t.texSubImage3D(35866,0,0,0,0,T.width,T.height,T.depth,be,Pe,T.data)):t.texImage3D(35866,0,Ie,T.width,T.height,T.depth,0,be,Pe,T.data);else if(E.isData3DTexture)xn?(U&&t.texStorage3D(32879,Ee,Ie,T.width,T.height,T.depth),t.texSubImage3D(32879,0,0,0,0,T.width,T.height,T.depth,be,Pe,T.data)):t.texImage3D(32879,0,Ie,T.width,T.height,T.depth,0,be,Pe,T.data);else if(E.isFramebufferTexture){if(U)if(xn)t.texStorage2D(3553,Ee,Ie,T.width,T.height);else{let te=T.width,Fe=T.height;for(let Oe=0;Oe<Ee;Oe++)t.texImage2D(3553,Oe,Ie,te,Fe,0,be,Pe,null),te>>=1,Fe>>=1}}else if(Lt.length>0&&he){xn&&U&&t.texStorage2D(3553,Ee,Ie,Lt[0].width,Lt[0].height);for(let te=0,Fe=Lt.length;te<Fe;te++)rt=Lt[te],xn?t.texSubImage2D(3553,te,0,0,be,Pe,rt):t.texImage2D(3553,te,Ie,be,Pe,rt);E.generateMipmaps=!1}else xn?(U&&t.texStorage2D(3553,Ee,Ie,T.width,T.height),t.texSubImage2D(3553,0,0,0,be,Pe,T)):t.texImage2D(3553,0,Ie,be,Pe,T);M(E,he)&&C(_e),Te.__currentVersion=Te.version,E.onUpdate&&E.onUpdate(E)}R.__version=E.version}function Me(R,E,Q,_e,ve){const Te=s.convert(Q.format,Q.encoding),it=s.convert(Q.type),T=w(Q.internalFormat,Te,it,Q.encoding);n.get(E).__hasExternalTextures||(32879===ve||35866===ve?t.texImage3D(ve,0,T,E.width,E.height,E.depth,0,Te,it,null):t.texImage2D(ve,0,T,E.width,E.height,0,Te,it,null)),t.bindFramebuffer(36160,R),Ye(E)?h.framebufferTexture2DMultisampleEXT(36160,_e,ve,n.get(Q).__webglTexture,0,et(E)):i.framebufferTexture2D(36160,_e,ve,n.get(Q).__webglTexture,0),t.bindFramebuffer(36160,null)}function dt(R,E,Q){if(i.bindRenderbuffer(36161,R),E.depthBuffer&&!E.stencilBuffer){let _e=33189;if(Q||Ye(E)){const ve=E.depthTexture;ve&&ve.isDepthTexture&&(ve.type===ka?_e=36012:ve.type===Zl&&(_e=33190));const Te=et(E);Ye(E)?h.renderbufferStorageMultisampleEXT(36161,Te,_e,E.width,E.height):i.renderbufferStorageMultisample(36161,Te,_e,E.width,E.height)}else i.renderbufferStorage(36161,_e,E.width,E.height);i.framebufferRenderbuffer(36160,36096,36161,R)}else if(E.depthBuffer&&E.stencilBuffer){const _e=et(E);Q&&!1===Ye(E)?i.renderbufferStorageMultisample(36161,_e,35056,E.width,E.height):Ye(E)?h.renderbufferStorageMultisampleEXT(36161,_e,35056,E.width,E.height):i.renderbufferStorage(36161,34041,E.width,E.height),i.framebufferRenderbuffer(36160,33306,36161,R)}else{const _e=!0===E.isWebGLMultipleRenderTargets?E.texture:[E.texture];for(let ve=0;ve<_e.length;ve++){const Te=_e[ve],it=s.convert(Te.format,Te.encoding),T=s.convert(Te.type),he=w(Te.internalFormat,it,T,Te.encoding),be=et(E);Q&&!1===Ye(E)?i.renderbufferStorageMultisample(36161,be,he,E.width,E.height):Ye(E)?h.renderbufferStorageMultisampleEXT(36161,be,he,E.width,E.height):i.renderbufferStorage(36161,he,E.width,E.height)}}i.bindRenderbuffer(36161,null)}function oe(R){const E=n.get(R),Q=!0===R.isWebGLCubeRenderTarget;if(R.depthTexture&&!E.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");!function ce(R,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,R),!E.depthTexture||!E.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(E.depthTexture).__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),z(E.depthTexture,0);const _e=n.get(E.depthTexture).__webglTexture,ve=et(E);if(E.depthTexture.format===Ql)Ye(E)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,_e,0,ve):i.framebufferTexture2D(36160,36096,3553,_e,0);else{if(E.depthTexture.format!==Ku)throw new Error("Unknown depthTexture format");Ye(E)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,_e,0,ve):i.framebufferTexture2D(36160,33306,3553,_e,0)}}(E.__webglFramebuffer,R)}else if(Q){E.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)t.bindFramebuffer(36160,E.__webglFramebuffer[_e]),E.__webglDepthbuffer[_e]=i.createRenderbuffer(),dt(E.__webglDepthbuffer[_e],R,!1)}else t.bindFramebuffer(36160,E.__webglFramebuffer),E.__webglDepthbuffer=i.createRenderbuffer(),dt(E.__webglDepthbuffer,R,!1);t.bindFramebuffer(36160,null)}function et(R){return Math.min(d,R.samples)}function Ye(R){const E=n.get(R);return a&&R.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==E.__useRenderToTexture}function Xt(R,E){const Q=R.encoding,_e=R.format,ve=R.type;return!0===R.isCompressedTexture||!0===R.isVideoTexture||1035===R.format||Q!==Jl&&(Q===Kt?!1===a?!0===e.has("EXT_sRGB")&&_e===Ps?(R.format=1035,R.minFilter=Nn,R.generateMipmaps=!1):E=C2.sRGBToLinear(E):(_e!==Ps||ve!==Kl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Q)),E}this.allocateTextureUnit=function H(){const R=O;return R>=l&&console.warn("THREE.WebGLTextures: Trying to use "+R+" texture units while this GPU supports only "+l),O+=1,R},this.resetTextureUnits=function G(){O=0},this.setTexture2D=z,this.setTexture2DArray=function de(R,E){const Q=n.get(R);R.version>0&&Q.__version!==R.version?We(Q,R,E):(t.activeTexture(33984+E),t.bindTexture(35866,Q.__webglTexture))},this.setTexture3D=function ee(R,E){const Q=n.get(R);R.version>0&&Q.__version!==R.version?We(Q,R,E):(t.activeTexture(33984+E),t.bindTexture(32879,Q.__webglTexture))},this.setTextureCube=function me(R,E){const Q=n.get(R);R.version>0&&Q.__version!==R.version?function ze(R,E,Q){if(6!==E.image.length)return;const _e=$e(R,E),ve=E.source;if(t.activeTexture(33984+Q),t.bindTexture(34067,R.__webglTexture),ve.version!==ve.__currentVersion||!0===_e){i.pixelStorei(37440,E.flipY),i.pixelStorei(37441,E.premultiplyAlpha),i.pixelStorei(3317,E.unpackAlignment),i.pixelStorei(37443,0);const Te=E.isCompressedTexture||E.image[0].isCompressedTexture,it=E.image[0]&&E.image[0].isDataTexture,T=[];for(let te=0;te<6;te++)T[te]=Te||it?it?E.image[te].image:E.image[te]:v(E.image[te],!1,!0,c),T[te]=Xt(E,T[te]);const he=T[0],be=b(he)||a,Pe=s.convert(E.format,E.encoding),Ie=s.convert(E.type),rt=w(E.internalFormat,Pe,Ie,E.encoding),Lt=a&&!0!==E.isVideoTexture,xn=void 0===ve.__currentVersion||!0===_e;let Ee,U=S(E,he,be);if(re(34067,E,be),Te){Lt&&xn&&t.texStorage2D(34067,U,rt,he.width,he.height);for(let te=0;te<6;te++){Ee=T[te].mipmaps;for(let Fe=0;Fe<Ee.length;Fe++){const Oe=Ee[Fe];E.format!==Ps?null!==Pe?Lt?t.compressedTexSubImage2D(34069+te,Fe,0,0,Oe.width,Oe.height,Pe,Oe.data):t.compressedTexImage2D(34069+te,Fe,rt,Oe.width,Oe.height,0,Oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Lt?t.texSubImage2D(34069+te,Fe,0,0,Oe.width,Oe.height,Pe,Ie,Oe.data):t.texImage2D(34069+te,Fe,rt,Oe.width,Oe.height,0,Pe,Ie,Oe.data)}}}else{Ee=E.mipmaps,Lt&&xn&&(Ee.length>0&&U++,t.texStorage2D(34067,U,rt,T[0].width,T[0].height));for(let te=0;te<6;te++)if(it){Lt?t.texSubImage2D(34069+te,0,0,0,T[te].width,T[te].height,Pe,Ie,T[te].data):t.texImage2D(34069+te,0,rt,T[te].width,T[te].height,0,Pe,Ie,T[te].data);for(let Fe=0;Fe<Ee.length;Fe++){const Ht=Ee[Fe].image[te].image;Lt?t.texSubImage2D(34069+te,Fe+1,0,0,Ht.width,Ht.height,Pe,Ie,Ht.data):t.texImage2D(34069+te,Fe+1,rt,Ht.width,Ht.height,0,Pe,Ie,Ht.data)}}else{Lt?t.texSubImage2D(34069+te,0,0,0,Pe,Ie,T[te]):t.texImage2D(34069+te,0,rt,Pe,Ie,T[te]);for(let Fe=0;Fe<Ee.length;Fe++){const Oe=Ee[Fe];Lt?t.texSubImage2D(34069+te,Fe+1,0,0,Pe,Ie,Oe.image[te]):t.texImage2D(34069+te,Fe+1,rt,Pe,Ie,Oe.image[te])}}}M(E,be)&&C(34067),ve.__currentVersion=ve.version,E.onUpdate&&E.onUpdate(E)}R.__version=E.version}(Q,R,E):(t.activeTexture(33984+E),t.bindTexture(34067,Q.__webglTexture))},this.rebindTextures=function ye(R,E,Q){const _e=n.get(R);void 0!==E&&Me(_e.__webglFramebuffer,R,R.texture,36064,3553),void 0!==Q&&oe(R)},this.setupRenderTarget=function Be(R){const E=R.texture,Q=n.get(R),_e=n.get(E);R.addEventListener("dispose",K),!0!==R.isWebGLMultipleRenderTargets&&(void 0===_e.__webglTexture&&(_e.__webglTexture=i.createTexture()),_e.__version=E.version,o.memory.textures++);const ve=!0===R.isWebGLCubeRenderTarget,Te=!0===R.isWebGLMultipleRenderTargets,it=b(R)||a;if(ve){Q.__webglFramebuffer=[];for(let T=0;T<6;T++)Q.__webglFramebuffer[T]=i.createFramebuffer()}else{if(Q.__webglFramebuffer=i.createFramebuffer(),Te)if(r.drawBuffers){const T=R.texture;for(let he=0,be=T.length;he<be;he++){const Pe=n.get(T[he]);void 0===Pe.__webglTexture&&(Pe.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&R.samples>0&&!1===Ye(R)){const T=Te?E:[E];Q.__webglMultisampledFramebuffer=i.createFramebuffer(),Q.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Q.__webglMultisampledFramebuffer);for(let he=0;he<T.length;he++){const be=T[he];Q.__webglColorRenderbuffer[he]=i.createRenderbuffer(),i.bindRenderbuffer(36161,Q.__webglColorRenderbuffer[he]);const Pe=s.convert(be.format,be.encoding),Ie=s.convert(be.type),rt=w(be.internalFormat,Pe,Ie,be.encoding),Lt=et(R);i.renderbufferStorageMultisample(36161,Lt,rt,R.width,R.height),i.framebufferRenderbuffer(36160,36064+he,36161,Q.__webglColorRenderbuffer[he])}i.bindRenderbuffer(36161,null),R.depthBuffer&&(Q.__webglDepthRenderbuffer=i.createRenderbuffer(),dt(Q.__webglDepthRenderbuffer,R,!0)),t.bindFramebuffer(36160,null)}}if(ve){t.bindTexture(34067,_e.__webglTexture),re(34067,E,it);for(let T=0;T<6;T++)Me(Q.__webglFramebuffer[T],R,E,36064,34069+T);M(E,it)&&C(34067),t.unbindTexture()}else if(Te){const T=R.texture;for(let he=0,be=T.length;he<be;he++){const Pe=T[he],Ie=n.get(Pe);t.bindTexture(3553,Ie.__webglTexture),re(3553,Pe,it),Me(Q.__webglFramebuffer,R,Pe,36064+he,3553),M(Pe,it)&&C(3553)}t.unbindTexture()}else{let T=3553;(R.isWebGL3DRenderTarget||R.isWebGLArrayRenderTarget)&&(a?T=R.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(T,_e.__webglTexture),re(T,E,it),Me(Q.__webglFramebuffer,R,E,36064,T),M(E,it)&&C(T),t.unbindTexture()}R.depthBuffer&&oe(R)},this.updateRenderTargetMipmap=function Ce(R){const E=b(R)||a,Q=!0===R.isWebGLMultipleRenderTargets?R.texture:[R.texture];for(let _e=0,ve=Q.length;_e<ve;_e++){const Te=Q[_e];if(M(Te,E)){const it=R.isWebGLCubeRenderTarget?34067:3553,T=n.get(Te).__webglTexture;t.bindTexture(it,T),C(it),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function ct(R){if(a&&R.samples>0&&!1===Ye(R)){const E=R.isWebGLMultipleRenderTargets?R.texture:[R.texture],Q=R.width,_e=R.height;let ve=16384;const Te=[],it=R.stencilBuffer?33306:36096,T=n.get(R),he=!0===R.isWebGLMultipleRenderTargets;if(he)for(let be=0;be<E.length;be++)t.bindFramebuffer(36160,T.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+be,36161,null),t.bindFramebuffer(36160,T.__webglFramebuffer),i.framebufferTexture2D(36009,36064+be,3553,null,0);t.bindFramebuffer(36008,T.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,T.__webglFramebuffer);for(let be=0;be<E.length;be++){Te.push(36064+be),R.depthBuffer&&Te.push(it);const Pe=void 0!==T.__ignoreDepthValues&&T.__ignoreDepthValues;if(!1===Pe&&(R.depthBuffer&&(ve|=256),R.stencilBuffer&&(ve|=1024)),he&&i.framebufferRenderbuffer(36008,36064,36161,T.__webglColorRenderbuffer[be]),!0===Pe&&(i.invalidateFramebuffer(36008,[it]),i.invalidateFramebuffer(36009,[it])),he){const Ie=n.get(E[be]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,Ie,0)}i.blitFramebuffer(0,0,Q,_e,0,0,Q,_e,ve,9728),f&&i.invalidateFramebuffer(36008,Te)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),he)for(let be=0;be<E.length;be++){t.bindFramebuffer(36160,T.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+be,36161,T.__webglColorRenderbuffer[be]);const Pe=n.get(E[be]).__webglTexture;t.bindFramebuffer(36160,T.__webglFramebuffer),i.framebufferTexture2D(36009,36064+be,3553,Pe,0)}t.bindFramebuffer(36009,T.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=oe,this.setupFrameBufferTexture=Me,this.useMultisampledRTT=Ye}function Yse(i,e,t){const n=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===Kl)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===Zl)return 5125;if(s===ka)return 5126;if(s===Hf)return n?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Ps)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===Ql)return 6402;if(s===Ku)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Kt){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===Kt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Kt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===Kt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===Yu?n?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==i[s]?i[s]:null}}}class Kse extends bi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ja extends yi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Zse={type:"move"};class ES{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ja,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ja,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new D,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new D),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ja,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new D,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new D),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const p of e.hand.values()){const g=t.getJointPose(p,n);if(void 0===c.joints[p.jointName]){const y=new ja;y.matrixAutoUpdate=!1,y.visible=!1,c.joints[p.jointName]=y,c.add(y)}const _=c.joints[p.jointName];null!==g&&(_.matrix.fromArray(g.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=g.radius),_.visible=null!==g}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,m=.005;c.inputState.pinching&&h>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Zse)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class Qse extends Fs{constructor(e,t,n,r,s,o,a,l,c,u){if((u=void 0!==u?u:Ql)!==Ql&&u!==Ku)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Ql&&(n=Zl),void 0===n&&u===Ku&&(n=Yu),super(null,r,s,o,a,l,u,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:ti,this.minFilter=void 0!==l?l:ti,this.flipY=!1,this.generateMipmaps=!1}}class Jse extends tc{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,d=null,h=null,f=null;const m=t.getContextAttributes();let p=null,g=null;const _=[],y=[],v=new bi;v.layers.enable(1),v.viewport=new tn;const b=new bi;b.layers.enable(2),b.viewport=new tn;const x=[v,b],M=new Kse;M.layers.enable(1),M.layers.enable(2);let C=null,w=null;function S(F){const z=y.indexOf(F.inputSource);if(-1===z)return;const de=_[z];void 0!==de&&de.dispatchEvent({type:F.type,data:F.inputSource})}function I(){r.removeEventListener("select",S),r.removeEventListener("selectstart",S),r.removeEventListener("selectend",S),r.removeEventListener("squeeze",S),r.removeEventListener("squeezestart",S),r.removeEventListener("squeezeend",S),r.removeEventListener("end",I),r.removeEventListener("inputsourceschange",W);for(let F=0;F<_.length;F++){const z=y[F];null!==z&&(y[F]=null,_[F].disconnect(z))}C=null,w=null,e.setRenderTarget(p),h=null,d=null,u=null,r=null,g=null,H.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function W(F){for(let z=0;z<F.removed.length;z++){const de=F.removed[z],ee=y.indexOf(de);ee>=0&&(y[ee]=null,_[ee].dispatchEvent({type:"disconnected",data:de}))}for(let z=0;z<F.added.length;z++){const de=F.added[z];let ee=y.indexOf(de);if(-1===ee){for(let fe=0;fe<_.length;fe++){if(fe>=y.length){y.push(de),ee=fe;break}if(null===y[fe]){y[fe]=de,ee=fe;break}}if(-1===ee)break}const me=_[ee];me&&me.dispatchEvent({type:"connected",data:de})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(F){let z=_[F];return void 0===z&&(z=new ES,_[F]=z),z.getTargetRaySpace()},this.getControllerGrip=function(F){let z=_[F];return void 0===z&&(z=new ES,_[F]=z),z.getGripSpace()},this.getHand=function(F){let z=_[F];return void 0===z&&(z=new ES,_[F]=z),z.getHandSpace()},this.setFramebufferScaleFactor=function(F){s=F,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(F){a=F,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(F){l=F},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=function(){var F=function Tee(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(l){BN(s,n,r,o,a,"next",l)}function a(l){BN(s,n,r,o,a,"throw",l)}o(void 0)})}}(function*(z){if(r=z,null!==r){if(p=e.getRenderTarget(),r.addEventListener("select",S),r.addEventListener("selectstart",S),r.addEventListener("selectend",S),r.addEventListener("squeeze",S),r.addEventListener("squeezestart",S),r.addEventListener("squeezeend",S),r.addEventListener("end",I),r.addEventListener("inputsourceschange",W),!0!==m.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||m.antialias,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:h}),g=new rc(h.framebufferWidth,h.framebufferHeight,{format:Ps,type:Kl,encoding:e.outputEncoding,stencilBuffer:m.stencil});else{let de=null,ee=null,me=null;m.depth&&(me=m.stencil?35056:33190,de=m.stencil?Ku:Ql,ee=m.stencil?Yu:Zl);const fe={colorFormat:32856,depthFormat:me,scaleFactor:s};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(fe),r.updateRenderState({layers:[d]}),g=new rc(d.textureWidth,d.textureHeight,{format:Ps,type:Kl,depthTexture:new Qse(d.textureWidth,d.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=yield r.requestReferenceSpace(a),H.setContext(r),H.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(z){return F.apply(this,arguments)}}();const K=new D,B=new D;function X(F,z){null===z?F.matrixWorld.copy(F.matrix):F.matrixWorld.multiplyMatrices(z.matrixWorld,F.matrix),F.matrixWorldInverse.copy(F.matrixWorld).invert()}this.updateCamera=function(F){if(null===r)return;M.near=b.near=v.near=F.near,M.far=b.far=v.far=F.far,(C!==M.near||w!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),C=M.near,w=M.far);const z=F.parent,de=M.cameras;X(M,z);for(let me=0;me<de.length;me++)X(de[me],z);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),F.matrix.copy(M.matrix),F.matrix.decompose(F.position,F.quaternion,F.scale);const ee=F.children;for(let me=0,fe=ee.length;me<fe;me++)ee[me].updateMatrixWorld(!0);2===de.length?function L(F,z,de){K.setFromMatrixPosition(z.matrixWorld),B.setFromMatrixPosition(de.matrixWorld);const ee=K.distanceTo(B),me=z.projectionMatrix.elements,fe=de.projectionMatrix.elements,He=me[14]/(me[10]-1),re=me[14]/(me[10]+1),$e=(me[9]+1)/me[5],We=(me[9]-1)/me[5],ze=(me[8]-1)/me[0],Me=(fe[8]+1)/fe[0],dt=He*ze,ce=He*Me,oe=ee/(-ze+Me),ye=oe*-ze;z.matrixWorld.decompose(F.position,F.quaternion,F.scale),F.translateX(ye),F.translateZ(oe),F.matrixWorld.compose(F.position,F.quaternion,F.scale),F.matrixWorldInverse.copy(F.matrixWorld).invert();const Be=He+oe,Ce=re+oe;F.projectionMatrix.makePerspective(dt-ye,ce+(ee-ye),$e*re/Ce*Be,We*re/Ce*Be,Be,Ce)}(M,v,b):M.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(F){null!==d&&(d.fixedFoveation=F),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=F)};let O=null;const H=new U2;H.setAnimationLoop(function G(F,z){if(c=z.getViewerPose(l||o),f=z,null!==c){const de=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let ee=!1;de.length!==M.cameras.length&&(M.cameras.length=0,ee=!0);for(let me=0;me<de.length;me++){const fe=de[me];let He=null;if(null!==h)He=h.getViewport(fe);else{const $e=u.getViewSubImage(d,fe);He=$e.viewport,0===me&&(e.setRenderTargetTextures(g,$e.colorTexture,d.ignoreDepthValues?void 0:$e.depthStencilTexture),e.setRenderTarget(g))}let re=x[me];void 0===re&&(re=new bi,re.layers.enable(me),re.viewport=new tn,x[me]=re),re.matrix.fromArray(fe.transform.matrix),re.projectionMatrix.fromArray(fe.projectionMatrix),re.viewport.set(He.x,He.y,He.width,He.height),0===me&&M.matrix.copy(re.matrix),!0===ee&&M.cameras.push(re)}}for(let de=0;de<_.length;de++){const ee=y[de],me=_[de];null!==ee&&void 0!==me&&me.update(ee,z,l||o)}O&&O(F,z),f=null}),this.setAnimationLoop=function(F){O=F},this.dispose=function(){}}}function eoe(i,e){function r(p,g){p.opacity.value=g.opacity,g.color&&p.diffuse.value.copy(g.color),g.emissive&&p.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.bumpMap&&(p.bumpMap.value=g.bumpMap,p.bumpScale.value=g.bumpScale,1===g.side&&(p.bumpScale.value*=-1)),g.displacementMap&&(p.displacementMap.value=g.displacementMap,p.displacementScale.value=g.displacementScale,p.displacementBias.value=g.displacementBias),g.emissiveMap&&(p.emissiveMap.value=g.emissiveMap),g.normalMap&&(p.normalMap.value=g.normalMap,p.normalScale.value.copy(g.normalScale),1===g.side&&p.normalScale.value.negate()),g.specularMap&&(p.specularMap.value=g.specularMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);const _=e.get(g).envMap;if(_&&(p.envMap.value=_,p.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,p.reflectivity.value=g.reflectivity,p.ior.value=g.ior,p.refractionRatio.value=g.refractionRatio),g.lightMap){p.lightMap.value=g.lightMap;const b=!0!==i.physicallyCorrectLights?Math.PI:1;p.lightMapIntensity.value=g.lightMapIntensity*b}let y,v;g.aoMap&&(p.aoMap.value=g.aoMap,p.aoMapIntensity.value=g.aoMapIntensity),g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),void 0!==y&&(y.isWebGLRenderTarget&&(y=y.texture),!0===y.matrixAutoUpdate&&y.updateMatrix(),p.uvTransform.value.copy(y.matrix)),g.aoMap?v=g.aoMap:g.lightMap&&(v=g.lightMap),void 0!==v&&(v.isWebGLRenderTarget&&(v=v.texture),!0===v.matrixAutoUpdate&&v.updateMatrix(),p.uv2Transform.value.copy(v.matrix))}return{refreshFogUniforms:function t(p,g){p.fogColor.value.copy(g.color),g.isFog?(p.fogNear.value=g.near,p.fogFar.value=g.far):g.isFogExp2&&(p.fogDensity.value=g.density)},refreshMaterialUniforms:function n(p,g,_,y,v){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(p,g):g.isMeshToonMaterial?(r(p,g),function u(p,g){g.gradientMap&&(p.gradientMap.value=g.gradientMap)}(p,g)):g.isMeshPhongMaterial?(r(p,g),function c(p,g){p.specular.value.copy(g.specular),p.shininess.value=Math.max(g.shininess,1e-4)}(p,g)):g.isMeshStandardMaterial?(r(p,g),function d(p,g){p.roughness.value=g.roughness,p.metalness.value=g.metalness,g.roughnessMap&&(p.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(p.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(p.envMapIntensity.value=g.envMapIntensity)}(p,g),g.isMeshPhysicalMaterial&&function h(p,g,_){p.ior.value=g.ior,g.sheen>0&&(p.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),p.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(p.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(p.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(p.clearcoat.value=g.clearcoat,p.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(p.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),p.clearcoatNormalMap.value=g.clearcoatNormalMap,1===g.side&&p.clearcoatNormalScale.value.negate())),g.iridescence>0&&(p.iridescence.value=g.iridescence,p.iridescenceIOR.value=g.iridescenceIOR,p.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(p.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(p.transmission.value=g.transmission,p.transmissionSamplerMap.value=_.texture,p.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(p.transmissionMap.value=g.transmissionMap),p.thickness.value=g.thickness,g.thicknessMap&&(p.thicknessMap.value=g.thicknessMap),p.attenuationDistance.value=g.attenuationDistance,p.attenuationColor.value.copy(g.attenuationColor)),p.specularIntensity.value=g.specularIntensity,p.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(p.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(p.specularColorMap.value=g.specularColorMap)}(p,g,v)):g.isMeshMatcapMaterial?(r(p,g),function f(p,g){g.matcap&&(p.matcap.value=g.matcap)}(p,g)):g.isMeshDepthMaterial?r(p,g):g.isMeshDistanceMaterial?(r(p,g),function m(p,g){p.referencePosition.value.copy(g.referencePosition),p.nearDistance.value=g.nearDistance,p.farDistance.value=g.farDistance}(p,g)):g.isMeshNormalMaterial?r(p,g):g.isLineBasicMaterial?(function s(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity}(p,g),g.isLineDashedMaterial&&function o(p,g){p.dashSize.value=g.dashSize,p.totalSize.value=g.dashSize+g.gapSize,p.scale.value=g.scale}(p,g)):g.isPointsMaterial?function a(p,g,_,y){let v;p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.size.value=g.size*_,p.scale.value=.5*y,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest),g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),void 0!==v&&(!0===v.matrixAutoUpdate&&v.updateMatrix(),p.uvTransform.value.copy(v.matrix))}(p,g,_,y):g.isSpriteMaterial?function l(p,g){let _;p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.rotation.value=g.rotation,g.map&&(p.map.value=g.map),g.alphaMap&&(p.alphaMap.value=g.alphaMap),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest),g.map?_=g.map:g.alphaMap&&(_=g.alphaMap),void 0!==_&&(!0===_.matrixAutoUpdate&&_.updateMatrix(),p.uvTransform.value.copy(_.matrix))}(p,g):g.isShadowMaterial?(p.color.value.copy(g.color),p.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function toe(i,e,t,n){let r={},s={},o=[];const a=t.isWebGL2?i.getParameter(35375):0;function f(y,v,b){const x=y.value;if(void 0===b[v])return b[v]="number"==typeof x?x:x.clone(),!0;if("number"==typeof x){if(b[v]!==x)return b[v]=x,!0}else{const M=b[v];if(!1===M.equals(x))return M.copy(x),!0}return!1}function p(y){const v=y.value,b={boundary:0,storage:0};return"number"==typeof v?(b.boundary=4,b.storage=4):v.isVector2?(b.boundary=8,b.storage=8):v.isVector3||v.isColor?(b.boundary=16,b.storage=12):v.isVector4?(b.boundary=16,b.storage=16):v.isMatrix3?(b.boundary=48,b.storage=48):v.isMatrix4?(b.boundary=64,b.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),b}function g(y){const v=y.target;v.removeEventListener("dispose",g);const b=o.indexOf(v.__bindingPointIndex);o.splice(b,1),i.deleteBuffer(r[v.id]),delete r[v.id],delete s[v.id]}return{bind:function l(y,v){n.uniformBlockBinding(y,v.program)},update:function c(y,v){let b=r[y.id];void 0===b&&(function m(y){const v=y.uniforms;let b=0;let M=0;for(let C=0,w=v.length;C<w;C++){const S=v[C],I=p(S);if(S.__data=new Float32Array(I.storage/Float32Array.BYTES_PER_ELEMENT),S.__offset=b,C>0){M=b%16;const W=16-M;0!==M&&W-I.boundary<0&&(b+=16-M,S.__offset=b)}b+=I.storage}M=b%16,M>0&&(b+=16-M),y.__size=b,y.__cache={}}(y),b=function u(y){const v=function d(){for(let y=0;y<a;y++)if(-1===o.indexOf(y))return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();y.__bindingPointIndex=v;const b=i.createBuffer(),x=y.__size,M=y.usage;return i.bindBuffer(35345,b),i.bufferData(35345,x,M),i.bindBuffer(35345,null),i.bindBufferBase(35345,v,b),b}(y),r[y.id]=b,y.addEventListener("dispose",g)),n.updateUBOMapping(y,v.program);const M=e.render.frame;s[y.id]!==M&&(function h(y){const b=y.uniforms,x=y.__cache;i.bindBuffer(35345,r[y.id]);for(let M=0,C=b.length;M<C;M++){const w=b[M];if(!0===f(w,M,x)){const S=w.value,I=w.__offset;"number"==typeof S?(w.__data[0]=S,i.bufferSubData(35345,I,w.__data)):(w.value.isMatrix3?(w.__data[0]=w.value.elements[0],w.__data[1]=w.value.elements[1],w.__data[2]=w.value.elements[2],w.__data[3]=w.value.elements[0],w.__data[4]=w.value.elements[3],w.__data[5]=w.value.elements[4],w.__data[6]=w.value.elements[5],w.__data[7]=w.value.elements[0],w.__data[8]=w.value.elements[6],w.__data[9]=w.value.elements[7],w.__data[10]=w.value.elements[8],w.__data[11]=w.value.elements[0]):S.toArray(w.__data),i.bufferSubData(35345,I,w.__data))}}i.bindBuffer(35345,null)}(y),s[y.id]=M)},dispose:function _(){for(const y in r)i.deleteBuffer(r[y]);o=[],r={},s={}}}}function g3(i={}){this.isWebGLRenderer=!0;const e=void 0!==i.canvas?i.canvas:function noe(){const i=jf("canvas");return i.style.display="block",i}(),t=void 0!==i.context?i.context:null,n=void 0===i.depth||i.depth,r=void 0===i.stencil||i.stencil,s=void 0!==i.antialias&&i.antialias,o=void 0===i.premultipliedAlpha||i.premultipliedAlpha,a=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,l=void 0!==i.powerPreference?i.powerPreference:"default",c=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==i.alpha&&i.alpha;let d=null,h=null;const f=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Jl,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const p=this;let g=!1,_=0,y=0,v=null,b=-1,x=null;const M=new tn,C=new tn;let w=null,S=e.width,I=e.height,W=1,K=null,B=null;const L=new tn(0,0,S,I),X=new tn(0,0,S,I);let O=!1;const G=new bS;let H=!1,F=!1,z=null;const de=new pt,ee=new ie,me=new D,fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function He(){return null===v?W:1}let We,ze,Me,dt,ce,oe,ye,Be,Ce,ct,et,Ye,nn,Xt,R,E,Q,_e,ve,Te,it,T,he,be,re=t;function $e(A,Y){for(let ne=0;ne<A.length;ne++){const ae=e.getContext(A[ne],Y);if(null!==ae)return ae}return null}try{const A={alpha:!0,depth:n,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r144"),e.addEventListener("webglcontextlost",rt,!1),e.addEventListener("webglcontextrestored",Lt,!1),e.addEventListener("webglcontextcreationerror",xn,!1),null===re){const Y=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&Y.shift(),re=$e(Y,A),null===re)throw $e(Y)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===re.getShaderPrecisionFormat&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(A){throw console.error("THREE.WebGLRenderer: "+A.message),A}function Pe(){We=new mre(re),ze=new cre(re,We,i),We.init(ze),T=new Yse(re,We,ze),Me=new qse(re,We,ze),dt=new yre,ce=new Fse,oe=new Xse(re,We,Me,ce,ze,T,dt),ye=new dre(p),Be=new pre(p),Ce=new ane(re,ze),he=new are(re,We,Ce,ze),ct=new gre(re,Ce,dt,he),et=new wre(re,ct,Ce,dt),ve=new xre(re,ze,oe),E=new ure(ce),Ye=new Ose(p,ye,Be,We,ze,he,E),nn=new eoe(p,ce),Xt=new Nse,R=new Gse(We,ze),_e=new ore(p,ye,Me,et,u,o),Q=new $se(p,et,ze),be=new toe(re,dt,ze,Me),Te=new lre(re,We,dt,ze),it=new _re(re,We,dt,ze),dt.programs=Ye.programs,p.capabilities=ze,p.extensions=We,p.properties=ce,p.renderLists=Xt,p.shadowMap=Q,p.state=Me,p.info=dt}Pe();const Ie=new Jse(p,re);function rt(A){A.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Lt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const A=dt.autoReset,Y=Q.enabled,ne=Q.autoUpdate,q=Q.needsUpdate,ae=Q.type;Pe(),dt.autoReset=A,Q.enabled=Y,Q.autoUpdate=ne,Q.needsUpdate=q,Q.type=ae}function xn(A){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",A.statusMessage)}function U(A){const Y=A.target;Y.removeEventListener("dispose",U),function Ee(A){(function te(A){const Y=ce.get(A).programs;void 0!==Y&&(Y.forEach(function(ne){Ye.releaseProgram(ne)}),A.isShaderMaterial&&Ye.releaseShaderCache(A))})(A),ce.remove(A)}(Y)}this.xr=Ie,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const A=We.get("WEBGL_lose_context");A&&A.loseContext()},this.forceContextRestore=function(){const A=We.get("WEBGL_lose_context");A&&A.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(A){void 0!==A&&(W=A,this.setSize(S,I,!1))},this.getSize=function(A){return A.set(S,I)},this.setSize=function(A,Y,ne){Ie.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(S=A,I=Y,e.width=Math.floor(A*W),e.height=Math.floor(Y*W),!1!==ne&&(e.style.width=A+"px",e.style.height=Y+"px"),this.setViewport(0,0,A,Y))},this.getDrawingBufferSize=function(A){return A.set(S*W,I*W).floor()},this.setDrawingBufferSize=function(A,Y,ne){S=A,I=Y,W=ne,e.width=Math.floor(A*ne),e.height=Math.floor(Y*ne),this.setViewport(0,0,A,Y)},this.getCurrentViewport=function(A){return A.copy(M)},this.getViewport=function(A){return A.copy(L)},this.setViewport=function(A,Y,ne,q){A.isVector4?L.set(A.x,A.y,A.z,A.w):L.set(A,Y,ne,q),Me.viewport(M.copy(L).multiplyScalar(W).floor())},this.getScissor=function(A){return A.copy(X)},this.setScissor=function(A,Y,ne,q){A.isVector4?X.set(A.x,A.y,A.z,A.w):X.set(A,Y,ne,q),Me.scissor(C.copy(X).multiplyScalar(W).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(A){Me.setScissorTest(O=A)},this.setOpaqueSort=function(A){K=A},this.setTransparentSort=function(A){B=A},this.getClearColor=function(A){return A.copy(_e.getClearColor())},this.setClearColor=function(){_e.setClearColor.apply(_e,arguments)},this.getClearAlpha=function(){return _e.getClearAlpha()},this.setClearAlpha=function(){_e.setClearAlpha.apply(_e,arguments)},this.clear=function(A=!0,Y=!0,ne=!0){let q=0;A&&(q|=16384),Y&&(q|=256),ne&&(q|=1024),re.clear(q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",rt,!1),e.removeEventListener("webglcontextrestored",Lt,!1),e.removeEventListener("webglcontextcreationerror",xn,!1),Xt.dispose(),R.dispose(),ce.dispose(),ye.dispose(),Be.dispose(),et.dispose(),he.dispose(),be.dispose(),Ye.dispose(),Ie.dispose(),Ie.removeEventListener("sessionstart",Ht),Ie.removeEventListener("sessionend",xi),z&&(z.dispose(),z=null),qn.stop()},this.renderBufferDirect=function(A,Y,ne,q,ae,Qe){null===Y&&(Y=fe);const ht=ae.isMesh&&ae.matrixWorld.determinant()<0,Ct=function Nle(A,Y,ne,q,ae){!0!==Y.isScene&&(Y=fe),oe.resetTextureUnits();const Qe=Y.fog,Ct=null===v?p.outputEncoding:!0===v.isXRRenderTarget?v.texture.encoding:Jl,mt=(q.isMeshStandardMaterial?Be:ye).get(q.envMap||(q.isMeshStandardMaterial?Y.environment:null)),en=!0===q.vertexColors&&!!ne.attributes.color&&4===ne.attributes.color.itemSize,Bt=!!q.normalMap&&!!ne.attributes.tangent,Vt=!!ne.morphAttributes.position,Un=!!ne.morphAttributes.normal,Mc=!!ne.morphAttributes.color,Ad=q.toneMapped?p.toneMapping:0,Id=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,ao=void 0!==Id?Id.length:0,Zt=ce.get(q),Rd=h.state.lights;!0!==H||!0!==F&&A===x||E.setState(q,A,A===x&&q.id===b);let ri=!1;q.version===Zt.__version?(Zt.needsLights&&Zt.lightsStateVersion!==Rd.state.version||Zt.outputEncoding!==Ct||ae.isInstancedMesh&&!1===Zt.instancing||!ae.isInstancedMesh&&!0===Zt.instancing||ae.isSkinnedMesh&&!1===Zt.skinning||!ae.isSkinnedMesh&&!0===Zt.skinning||Zt.envMap!==mt||!0===q.fog&&Zt.fog!==Qe||void 0!==Zt.numClippingPlanes&&(Zt.numClippingPlanes!==E.numPlanes||Zt.numIntersection!==E.numIntersection)||Zt.vertexAlphas!==en||Zt.vertexTangents!==Bt||Zt.morphTargets!==Vt||Zt.morphNormals!==Un||Zt.morphColors!==Mc||Zt.toneMapping!==Ad||!0===ze.isWebGL2&&Zt.morphTargetsCount!==ao)&&(ri=!0):(ri=!0,Zt.__version=q.version);let gs=Zt.currentProgram;!0===ri&&(gs=Fy(q,Y,ae));let Qa=!1,bp=!1,wC=!1;const sr=gs.getUniforms(),Sc=Zt.uniforms;if(Me.useProgram(gs.program)&&(Qa=!0,bp=!0,wC=!0),q.id!==b&&(b=q.id,bp=!0),Qa||x!==A){if(sr.setValue(re,"projectionMatrix",A.projectionMatrix),ze.logarithmicDepthBuffer&&sr.setValue(re,"logDepthBufFC",2/(Math.log(A.far+1)/Math.LN2)),x!==A&&(x=A,bp=!0,wC=!0),q.isShaderMaterial||q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshStandardMaterial||q.envMap){const Hr=sr.map.cameraPosition;void 0!==Hr&&Hr.setValue(re,me.setFromMatrixPosition(A.matrixWorld))}(q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshLambertMaterial||q.isMeshBasicMaterial||q.isMeshStandardMaterial||q.isShaderMaterial)&&sr.setValue(re,"isOrthographic",!0===A.isOrthographicCamera),(q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshLambertMaterial||q.isMeshBasicMaterial||q.isMeshStandardMaterial||q.isShaderMaterial||q.isShadowMaterial||ae.isSkinnedMesh)&&sr.setValue(re,"viewMatrix",A.matrixWorldInverse)}if(ae.isSkinnedMesh){sr.setOptional(re,ae,"bindMatrix"),sr.setOptional(re,ae,"bindMatrixInverse");const Hr=ae.skeleton;Hr&&(ze.floatVertexTextures?(null===Hr.boneTexture&&Hr.computeBoneTexture(),sr.setValue(re,"boneTexture",Hr.boneTexture,oe),sr.setValue(re,"boneTextureSize",Hr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const MC=ne.morphAttributes;if((void 0!==MC.position||void 0!==MC.normal||void 0!==MC.color&&!0===ze.isWebGL2)&&ve.update(ae,ne,q,gs),(bp||Zt.receiveShadow!==ae.receiveShadow)&&(Zt.receiveShadow=ae.receiveShadow,sr.setValue(re,"receiveShadow",ae.receiveShadow)),q.isMeshGouraudMaterial&&null!==q.envMap&&(Sc.envMap.value=mt,Sc.flipEnvMap.value=mt.isCubeTexture&&!1===mt.isRenderTargetTexture?-1:1),bp&&(sr.setValue(re,"toneMappingExposure",p.toneMappingExposure),Zt.needsLights&&function Ble(A,Y){A.ambientLightColor.needsUpdate=Y,A.lightProbe.needsUpdate=Y,A.directionalLights.needsUpdate=Y,A.directionalLightShadows.needsUpdate=Y,A.pointLights.needsUpdate=Y,A.pointLightShadows.needsUpdate=Y,A.spotLights.needsUpdate=Y,A.spotLightShadows.needsUpdate=Y,A.rectAreaLights.needsUpdate=Y,A.hemisphereLights.needsUpdate=Y}(Sc,wC),Qe&&!0===q.fog&&nn.refreshFogUniforms(Sc,Qe),nn.refreshMaterialUniforms(Sc,q,W,I,z),ay.upload(re,Zt.uniformsList,Sc,oe)),q.isShaderMaterial&&!0===q.uniformsNeedUpdate&&(ay.upload(re,Zt.uniformsList,Sc,oe),q.uniformsNeedUpdate=!1),q.isSpriteMaterial&&sr.setValue(re,"center",ae.center),sr.setValue(re,"modelViewMatrix",ae.modelViewMatrix),sr.setValue(re,"normalMatrix",ae.normalMatrix),sr.setValue(re,"modelMatrix",ae.matrixWorld),q.isShaderMaterial||q.isRawShaderMaterial){const Hr=q.uniformsGroups;for(let SC=0,Ule=Hr.length;SC<Ule;SC++)if(ze.isWebGL2){const GB=Hr[SC];be.update(GB,gs),be.bind(GB,gs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return gs}(A,Y,ne,q,ae);Me.setMaterial(q,ht);let mt=ne.index;const en=ne.attributes.position;if(null===mt){if(void 0===en||0===en.count)return}else if(0===mt.count)return;let Bt=1;!0===q.wireframe&&(mt=ct.getWireframeAttribute(ne),Bt=2),he.setup(ae,q,Ct,ne,mt);let Vt,Un=Te;null!==mt&&(Vt=Ce.get(mt),Un=it,Un.setIndex(Vt));const Mc=null!==mt?mt.count:en.count,Ad=ne.drawRange.start*Bt,Id=ne.drawRange.count*Bt,ao=null!==Qe?Qe.start*Bt:0,Zt=null!==Qe?Qe.count*Bt:1/0,Rd=Math.max(Ad,ao),ri=Math.min(Mc,Ad+Id,ao+Zt)-1,gs=Math.max(0,ri-Rd+1);if(0!==gs){if(ae.isMesh)!0===q.wireframe?(Me.setLineWidth(q.wireframeLinewidth*He()),Un.setMode(1)):Un.setMode(4);else if(ae.isLine){let Qa=q.linewidth;void 0===Qa&&(Qa=1),Me.setLineWidth(Qa*He()),Un.setMode(ae.isLineSegments?1:ae.isLineLoop?2:3)}else ae.isPoints?Un.setMode(0):ae.isSprite&&Un.setMode(4);if(ae.isInstancedMesh)Un.renderInstances(Rd,gs,ae.count);else if(ne.isInstancedBufferGeometry){const Qa=Math.min(ne.instanceCount,ne._maxInstanceCount);Un.renderInstances(Rd,gs,Qa)}else Un.render(Rd,gs)}},this.compile=function(A,Y){function ne(q,ae,Qe){!0===q.transparent&&2===q.side?(q.side=1,q.needsUpdate=!0,Fy(q,ae,Qe),q.side=0,q.needsUpdate=!0,Fy(q,ae,Qe),q.side=2):Fy(q,ae,Qe)}h=R.get(A),h.init(),m.push(h),A.traverseVisible(function(q){q.isLight&&q.layers.test(Y.layers)&&(h.pushLight(q),q.castShadow&&h.pushShadow(q))}),h.setupLights(p.physicallyCorrectLights),A.traverse(function(q){const ae=q.material;if(ae)if(Array.isArray(ae))for(let Qe=0;Qe<ae.length;Qe++)ne(ae[Qe],A,q);else ne(ae,A,q)}),m.pop(),h=null};let Fe=null;function Ht(){qn.stop()}function xi(){qn.start()}const qn=new U2;function Za(A,Y,ne,q){if(!1===A.visible)return;if(A.layers.test(Y.layers))if(A.isGroup)ne=A.renderOrder;else if(A.isLOD)!0===A.autoUpdate&&A.update(Y);else if(A.isLight)h.pushLight(A),A.castShadow&&h.pushShadow(A);else if(A.isSprite){if(!A.frustumCulled||G.intersectsSprite(A)){q&&me.setFromMatrixPosition(A.matrixWorld).applyMatrix4(de);const ht=et.update(A),Ct=A.material;Ct.visible&&d.push(A,ht,Ct,ne,me.z,null)}}else if((A.isMesh||A.isLine||A.isPoints)&&(A.isSkinnedMesh&&A.skeleton.frame!==dt.render.frame&&(A.skeleton.update(),A.skeleton.frame=dt.render.frame),!A.frustumCulled||G.intersectsObject(A))){q&&me.setFromMatrixPosition(A.matrixWorld).applyMatrix4(de);const ht=et.update(A),Ct=A.material;if(Array.isArray(Ct)){const mt=ht.groups;for(let en=0,Bt=mt.length;en<Bt;en++){const Vt=mt[en],Un=Ct[Vt.materialIndex];Un&&Un.visible&&d.push(A,ht,Un,ne,me.z,Vt)}}else Ct.visible&&d.push(A,ht,Ct,ne,me.z,null)}const Qe=A.children;for(let ht=0,Ct=Qe.length;ht<Ct;ht++)Za(Qe[ht],Y,ne,q)}function Vn(A,Y,ne,q){const ae=A.opaque,Qe=A.transmissive,ht=A.transparent;h.setupLightsView(ne),Qe.length>0&&function ta(A,Y,ne){const q=ze.isWebGL2;null===z&&(z=new rc(1,1,{generateMipmaps:!0,type:We.has("EXT_color_buffer_half_float")?Hf:Kl,minFilter:Fa,samples:q&&!0===s?4:0})),p.getDrawingBufferSize(ee),q?z.setSize(ee.x,ee.y):z.setSize(F_(ee.x),F_(ee.y));const ae=p.getRenderTarget();p.setRenderTarget(z),p.clear();const Qe=p.toneMapping;p.toneMapping=0,ms(A,Y,ne),p.toneMapping=Qe,oe.updateMultisampleRenderTarget(z),oe.updateRenderTargetMipmap(z),p.setRenderTarget(ae)}(ae,Y,ne),q&&Me.viewport(M.copy(q)),ae.length>0&&ms(ae,Y,ne),Qe.length>0&&ms(Qe,Y,ne),ht.length>0&&ms(ht,Y,ne),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function ms(A,Y,ne){const q=!0===Y.isScene?Y.overrideMaterial:null;for(let ae=0,Qe=A.length;ae<Qe;ae++){const ht=A[ae],Ct=ht.object,mt=ht.geometry,en=null===q?ht.material:q,Bt=ht.group;Ct.layers.test(ne.layers)&&kle(Ct,Y,ne,mt,en,Bt)}}function kle(A,Y,ne,q,ae,Qe){A.onBeforeRender(p,Y,ne,q,ae,Qe),A.modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,A.matrixWorld),A.normalMatrix.getNormalMatrix(A.modelViewMatrix),ae.onBeforeRender(p,Y,ne,q,A,Qe),!0===ae.transparent&&2===ae.side?(ae.side=1,ae.needsUpdate=!0,p.renderBufferDirect(ne,Y,q,ae,A,Qe),ae.side=0,ae.needsUpdate=!0,p.renderBufferDirect(ne,Y,q,ae,A,Qe),ae.side=2):p.renderBufferDirect(ne,Y,q,ae,A,Qe),A.onAfterRender(p,Y,ne,q,ae,Qe)}function Fy(A,Y,ne){!0!==Y.isScene&&(Y=fe);const q=ce.get(A),ae=h.state.lights,ht=ae.state.version,Ct=Ye.getParameters(A,ae.state,h.state.shadowsArray,Y,ne),mt=Ye.getProgramCacheKey(Ct);let en=q.programs;q.environment=A.isMeshStandardMaterial?Y.environment:null,q.fog=Y.fog,q.envMap=(A.isMeshStandardMaterial?Be:ye).get(A.envMap||q.environment),void 0===en&&(A.addEventListener("dispose",U),en=new Map,q.programs=en);let Bt=en.get(mt);if(void 0!==Bt){if(q.currentProgram===Bt&&q.lightsStateVersion===ht)return zB(A,Ct),Bt}else Ct.uniforms=Ye.getUniforms(A),A.onBuild(ne,Ct,p),A.onBeforeCompile(Ct,p),Bt=Ye.acquireProgram(Ct,mt),en.set(mt,Bt),q.uniforms=Ct.uniforms;const Vt=q.uniforms;(!A.isShaderMaterial&&!A.isRawShaderMaterial||!0===A.clipping)&&(Vt.clippingPlanes=E.uniform),zB(A,Ct),q.needsLights=function Vle(A){return A.isMeshLambertMaterial||A.isMeshToonMaterial||A.isMeshPhongMaterial||A.isMeshStandardMaterial||A.isShadowMaterial||A.isShaderMaterial&&!0===A.lights}(A),q.lightsStateVersion=ht,q.needsLights&&(Vt.ambientLightColor.value=ae.state.ambient,Vt.lightProbe.value=ae.state.probe,Vt.directionalLights.value=ae.state.directional,Vt.directionalLightShadows.value=ae.state.directionalShadow,Vt.spotLights.value=ae.state.spot,Vt.spotLightShadows.value=ae.state.spotShadow,Vt.rectAreaLights.value=ae.state.rectArea,Vt.ltc_1.value=ae.state.rectAreaLTC1,Vt.ltc_2.value=ae.state.rectAreaLTC2,Vt.pointLights.value=ae.state.point,Vt.pointLightShadows.value=ae.state.pointShadow,Vt.hemisphereLights.value=ae.state.hemi,Vt.directionalShadowMap.value=ae.state.directionalShadowMap,Vt.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,Vt.spotShadowMap.value=ae.state.spotShadowMap,Vt.spotLightMatrix.value=ae.state.spotLightMatrix,Vt.spotLightMap.value=ae.state.spotLightMap,Vt.pointShadowMap.value=ae.state.pointShadowMap,Vt.pointShadowMatrix.value=ae.state.pointShadowMatrix);const Un=Bt.getUniforms(),Mc=ay.seqWithValue(Un.seq,Vt);return q.currentProgram=Bt,q.uniformsList=Mc,Bt}function zB(A,Y){const ne=ce.get(A);ne.outputEncoding=Y.outputEncoding,ne.instancing=Y.instancing,ne.skinning=Y.skinning,ne.morphTargets=Y.morphTargets,ne.morphNormals=Y.morphNormals,ne.morphColors=Y.morphColors,ne.morphTargetsCount=Y.morphTargetsCount,ne.numClippingPlanes=Y.numClippingPlanes,ne.numIntersection=Y.numClipIntersection,ne.vertexAlphas=Y.vertexAlphas,ne.vertexTangents=Y.vertexTangents,ne.toneMapping=Y.toneMapping}qn.setAnimationLoop(function Oe(A){Fe&&Fe(A)}),typeof self<"u"&&qn.setContext(self),this.setAnimationLoop=function(A){Fe=A,Ie.setAnimationLoop(A),null===A?qn.stop():qn.start()},Ie.addEventListener("sessionstart",Ht),Ie.addEventListener("sessionend",xi),this.render=function(A,Y){if(void 0===Y||!0===Y.isCamera){if(!0!==g){if(!0===A.matrixWorldAutoUpdate&&A.updateMatrixWorld(),null===Y.parent&&!0===Y.matrixWorldAutoUpdate&&Y.updateMatrixWorld(),!0===Ie.enabled&&!0===Ie.isPresenting&&(!0===Ie.cameraAutoUpdate&&Ie.updateCamera(Y),Y=Ie.getCamera()),!0===A.isScene&&A.onBeforeRender(p,A,Y,v),h=R.get(A,m.length),h.init(),m.push(h),de.multiplyMatrices(Y.projectionMatrix,Y.matrixWorldInverse),G.setFromProjectionMatrix(de),F=this.localClippingEnabled,H=E.init(this.clippingPlanes,F,Y),d=Xt.get(A,f.length),d.init(),f.push(d),Za(A,Y,0,p.sortObjects),d.finish(),!0===p.sortObjects&&d.sort(K,B),!0===H&&E.beginShadows(),Q.render(h.state.shadowsArray,A,Y),!0===H&&E.endShadows(),!0===this.info.autoReset&&this.info.reset(),_e.render(d,A),h.setupLights(p.physicallyCorrectLights),Y.isArrayCamera){const q=Y.cameras;for(let ae=0,Qe=q.length;ae<Qe;ae++){const ht=q[ae];Vn(d,A,ht,ht.viewport)}}else Vn(d,A,Y);null!==v&&(oe.updateMultisampleRenderTarget(v),oe.updateRenderTargetMipmap(v)),!0===A.isScene&&A.onAfterRender(p,A,Y),he.resetDefaultState(),b=-1,x=null,m.pop(),h=m.length>0?m[m.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return v},this.setRenderTargetTextures=function(A,Y,ne){ce.get(A.texture).__webglTexture=Y,ce.get(A.depthTexture).__webglTexture=ne;const q=ce.get(A);q.__hasExternalTextures=!0,q.__hasExternalTextures&&(q.__autoAllocateDepthBuffer=void 0===ne,q.__autoAllocateDepthBuffer||!0===We.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),q.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(A,Y){const ne=ce.get(A);ne.__webglFramebuffer=Y,ne.__useDefaultFramebuffer=void 0===Y},this.setRenderTarget=function(A,Y=0,ne=0){v=A,_=Y,y=ne;let q=!0;if(A){const mt=ce.get(A);void 0!==mt.__useDefaultFramebuffer?(Me.bindFramebuffer(36160,null),q=!1):void 0===mt.__webglFramebuffer?oe.setupRenderTarget(A):mt.__hasExternalTextures&&oe.rebindTextures(A,ce.get(A.texture).__webglTexture,ce.get(A.depthTexture).__webglTexture)}let ae=null,Qe=!1,ht=!1;if(A){const mt=A.texture;(mt.isData3DTexture||mt.isDataArrayTexture)&&(ht=!0);const en=ce.get(A).__webglFramebuffer;A.isWebGLCubeRenderTarget?(ae=en[Y],Qe=!0):ae=ze.isWebGL2&&A.samples>0&&!1===oe.useMultisampledRTT(A)?ce.get(A).__webglMultisampledFramebuffer:en,M.copy(A.viewport),C.copy(A.scissor),w=A.scissorTest}else M.copy(L).multiplyScalar(W).floor(),C.copy(X).multiplyScalar(W).floor(),w=O;if(Me.bindFramebuffer(36160,ae)&&ze.drawBuffers&&q&&Me.drawBuffers(A,ae),Me.viewport(M),Me.scissor(C),Me.setScissorTest(w),Qe){const mt=ce.get(A.texture);re.framebufferTexture2D(36160,36064,34069+Y,mt.__webglTexture,ne)}else if(ht){const mt=ce.get(A.texture);re.framebufferTextureLayer(36160,36064,mt.__webglTexture,ne||0,Y||0)}b=-1},this.readRenderTargetPixels=function(A,Y,ne,q,ae,Qe,ht){if(!A||!A.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ct=ce.get(A).__webglFramebuffer;if(A.isWebGLCubeRenderTarget&&void 0!==ht&&(Ct=Ct[ht]),Ct){Me.bindFramebuffer(36160,Ct);try{const mt=A.texture,en=mt.format,Bt=mt.type;if(en!==Ps&&T.convert(en)!==re.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Vt=Bt===Hf&&(We.has("EXT_color_buffer_half_float")||ze.isWebGL2&&We.has("EXT_color_buffer_float"));if(!(Bt===Kl||T.convert(Bt)===re.getParameter(35738)||Bt===ka&&(ze.isWebGL2||We.has("OES_texture_float")||We.has("WEBGL_color_buffer_float"))||Vt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Y>=0&&Y<=A.width-q&&ne>=0&&ne<=A.height-ae&&re.readPixels(Y,ne,q,ae,T.convert(en),T.convert(Bt),Qe)}finally{const mt=null!==v?ce.get(v).__webglFramebuffer:null;Me.bindFramebuffer(36160,mt)}}},this.copyFramebufferToTexture=function(A,Y,ne=0){const q=Math.pow(2,-ne),ae=Math.floor(Y.image.width*q),Qe=Math.floor(Y.image.height*q);oe.setTexture2D(Y,0),re.copyTexSubImage2D(3553,ne,0,0,A.x,A.y,ae,Qe),Me.unbindTexture()},this.copyTextureToTexture=function(A,Y,ne,q=0){const ae=Y.image.width,Qe=Y.image.height,ht=T.convert(ne.format),Ct=T.convert(ne.type);oe.setTexture2D(ne,0),re.pixelStorei(37440,ne.flipY),re.pixelStorei(37441,ne.premultiplyAlpha),re.pixelStorei(3317,ne.unpackAlignment),Y.isDataTexture?re.texSubImage2D(3553,q,A.x,A.y,ae,Qe,ht,Ct,Y.image.data):Y.isCompressedTexture?re.compressedTexSubImage2D(3553,q,A.x,A.y,Y.mipmaps[0].width,Y.mipmaps[0].height,ht,Y.mipmaps[0].data):re.texSubImage2D(3553,q,A.x,A.y,ht,Ct,Y.image),0===q&&ne.generateMipmaps&&re.generateMipmap(3553),Me.unbindTexture()},this.copyTextureToTexture3D=function(A,Y,ne,q,ae=0){if(p.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Qe=A.max.x-A.min.x+1,ht=A.max.y-A.min.y+1,Ct=A.max.z-A.min.z+1,mt=T.convert(q.format),en=T.convert(q.type);let Bt;if(q.isData3DTexture)oe.setTexture3D(q,0),Bt=32879;else{if(!q.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");oe.setTexture2DArray(q,0),Bt=35866}re.pixelStorei(37440,q.flipY),re.pixelStorei(37441,q.premultiplyAlpha),re.pixelStorei(3317,q.unpackAlignment);const Vt=re.getParameter(3314),Un=re.getParameter(32878),Mc=re.getParameter(3316),Ad=re.getParameter(3315),Id=re.getParameter(32877),ao=ne.isCompressedTexture?ne.mipmaps[0]:ne.image;re.pixelStorei(3314,ao.width),re.pixelStorei(32878,ao.height),re.pixelStorei(3316,A.min.x),re.pixelStorei(3315,A.min.y),re.pixelStorei(32877,A.min.z),ne.isDataTexture||ne.isData3DTexture?re.texSubImage3D(Bt,ae,Y.x,Y.y,Y.z,Qe,ht,Ct,mt,en,ao.data):ne.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),re.compressedTexSubImage3D(Bt,ae,Y.x,Y.y,Y.z,Qe,ht,Ct,mt,ao.data)):re.texSubImage3D(Bt,ae,Y.x,Y.y,Y.z,Qe,ht,Ct,mt,en,ao),re.pixelStorei(3314,Vt),re.pixelStorei(32878,Un),re.pixelStorei(3316,Mc),re.pixelStorei(3315,Ad),re.pixelStorei(32877,Id),0===ae&&q.generateMipmaps&&re.generateMipmap(Bt),Me.unbindTexture()},this.initTexture=function(A){A.isCubeTexture?oe.setTextureCube(A,0):A.isData3DTexture?oe.setTexture3D(A,0):A.isDataArrayTexture?oe.setTexture2DArray(A,0):oe.setTexture2D(A,0),Me.unbindTexture()},this.resetState=function(){_=0,y=0,v=null,Me.reset(),he.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class ioe extends g3{}).prototype.isWebGL1Renderer=!0;class _3 extends yi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class AS{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Nr()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Nr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Nr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const rr=new D;class fc{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)rr.fromBufferAttribute(this,t),rr.applyMatrix4(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)rr.fromBufferAttribute(this,t),rr.applyNormalMatrix(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)rr.fromBufferAttribute(this,t),rr.transformDirection(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}setX(e,t){return this.normalized&&(t=un(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=un(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=un(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=un(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Go(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Go(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Go(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Go(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=un(t,this.array),n=un(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=un(t,this.array),n=un(n,this.array),r=un(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=un(t,this.array),n=un(n,this.array),r=un(r,this.array),s=un(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new jn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new fc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const M3=new D,S3=new tn,C3=new tn,ooe=new D,E3=new pt;class D3 extends ii{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new pt,this.bindMatrixInverse=new pt}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new tn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;S3.fromBufferAttribute(r.attributes.skinIndex,e),C3.fromBufferAttribute(r.attributes.skinWeight,e),M3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=C3.getComponent(s);if(0!==o){const a=S3.getComponent(s);E3.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(ooe.copy(M3).applyMatrix4(E3),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class RS extends yi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ep extends Fs{constructor(e=null,t=1,n=1,r,s,o,a,l,c=ti,u=ti,d,h){super(null,o,a,l,c,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const T3=new pt,aoe=new pt;class hy{constructor(e=[],t=[]){this.uuid=Nr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new pt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new pt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)T3.multiplyMatrices(e[s]?e[s].matrixWorld:aoe,t[s]),T3.toArray(n,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new hy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=w2(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new ep(t,e,e,Ps,ka);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new RS),this.bones.push(o),this.boneInverses.push((new pt).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(n[r].toArray());return e}}class gr extends Bs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new De(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const R3=new D,P3=new D,L3=new pt,PS=new W_,py=new cc;class $a extends yi{constructor(e=new bt,t=new gr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)R3.fromBufferAttribute(t,r-1),P3.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=R3.distanceTo(P3);e.setAttribute("lineDistance",new Ue(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),py.copy(n.boundingSphere),py.applyMatrix4(r),py.radius+=s,!1===e.ray.intersectsSphere(py))return;L3.copy(r).invert(),PS.copy(e.ray).applyMatrix4(L3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new D,u=new D,d=new D,h=new D,f=this.isLineSegments?2:1,m=n.index,g=n.attributes.position;if(null!==m)for(let v=Math.max(0,o.start),b=Math.min(m.count,o.start+o.count)-1;v<b;v+=f){const x=m.getX(v),M=m.getX(v+1);if(c.fromBufferAttribute(g,x),u.fromBufferAttribute(g,M),PS.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}else for(let v=Math.max(0,o.start),b=Math.min(g.count,o.start+o.count)-1;v<b;v+=f){if(c.fromBufferAttribute(g,v),u.fromBufferAttribute(g,v+1),PS.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(h);M<e.near||M>e.far||t.push({distance:M,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const O3=new D,F3=new D;class LS extends $a{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)O3.fromBufferAttribute(t,r),F3.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+O3.distanceTo(F3);e.setAttribute("lineDistance",new Ue(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class k3 extends $a{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class OS extends Bs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new De(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const N3=new pt,FS=new W_,my=new cc,gy=new D;class B3 extends yi{constructor(e=new bt,t=new OS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),my.copy(n.boundingSphere),my.applyMatrix4(r),my.radius+=s,!1===e.ray.intersectsSphere(my))return;N3.copy(r).invert(),FS.copy(e.ray).applyMatrix4(N3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,d=n.attributes.position;if(null!==c)for(let m=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);m<p;m++){const g=c.getX(m);gy.fromBufferAttribute(d,g),V3(gy,g,l,r,e,t,this)}else for(let m=Math.max(0,o.start),p=Math.min(d.count,o.start+o.count);m<p;m++)gy.fromBufferAttribute(d,m),V3(gy,m,l,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function V3(i,e,t,n,r,s,o){const a=FS.distanceSqToPoint(i);if(a<t){const l=new D;FS.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class cp extends bt{constructor(e=1,t=32,n=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new D,h=new D,f=[],m=[],p=[],g=[];for(let _=0;_<=n;_++){const y=[],v=_/n;let b=0;0==_&&0==o?b=.5/t:_==n&&l==Math.PI&&(b=-.5/t);for(let x=0;x<=t;x++){const M=x/t;d.x=-e*Math.cos(r+M*s)*Math.sin(o+v*a),d.y=e*Math.cos(o+v*a),d.z=e*Math.sin(r+M*s)*Math.sin(o+v*a),m.push(d.x,d.y,d.z),h.copy(d).normalize(),p.push(h.x,h.y,h.z),g.push(M+b,1-v),y.push(c++)}u.push(y)}for(let _=0;_<n;_++)for(let y=0;y<t;y++){const v=u[_][y+1],b=u[_][y],x=u[_+1][y],M=u[_+1][y+1];(0!==_||o>0)&&f.push(v,b,M),(_!==n-1||l<Math.PI)&&f.push(b,x,M)}this.setIndex(f),this.setAttribute("position",new Ue(m,3)),this.setAttribute("normal",new Ue(p,3)),this.setAttribute("uv",new Ue(g,2))}static fromJSON(e){return new cp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class up extends Bs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new De(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xa extends up{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ie(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Wn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new De(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new De(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new De(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function ps(i,e,t){return rC(i)?new i.constructor(i.subarray(e,void 0!==t?t:i.length)):i.slice(e,t)}function mc(i,e,t){return!i||!t&&i.constructor===e?i:"number"==typeof e.BYTES_PER_ELEMENT?new e(i):Array.prototype.slice.call(i)}function rC(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function J3(i){const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(function e(r,s){return i[r]-i[s]}),n}function sC(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=i[a+l]}return r}function oC(i,e,t,n){let r=1,s=i[0];for(;void 0!==s&&void 0===s[n];)s=i[r++];if(void 0===s)return;let o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=i[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(e.push(s.time),t.push(o)),s=i[r++]}while(void 0!==s)}class dp{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class eae extends dp{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-n;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=e,l=2*n-t;break;case 2402:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(n-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(n-t)/(r-t),p=m*m,g=p*m,_=-h*g+2*h*p-h*m,y=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*m+1,v=(-1-f)*g+(1.5+f)*p+.5*m,b=f*g-f*p;for(let x=0;x!==a;++x)s[x]=_*o[u+x]+y*o[c+x]+v*o[l+x]+b*o[d+x];return s}}class eB extends dp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(n-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class tae extends dp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class so{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mc(t,this.TimeBufferType),this.values=mc(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:mc(e.times,Array),values:mc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new tae(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new eB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new eae(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case zf:t=this.InterpolantFactoryMethodDiscrete;break;case Zu:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return zf;case this.InterpolantFactoryMethodLinear:return Zu;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=ps(n,s,o),this.values=ps(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&rC(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=ps(this.times),t=ps(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*n,h=d-n,f=d+n;for(let m=0;m!==n;++m){const p=t[d+m];if(p!==t[h+m]||p!==t[f+m]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*n,h=o*n;for(let f=0;f!==n;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=ps(e,0,o),this.values=ps(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=ps(this.times,0),t=ps(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}so.prototype.TimeBufferType=Float32Array,so.prototype.ValueBufferType=Float32Array,so.prototype.DefaultInterpolation=Zu;class Ed extends so{}Ed.prototype.ValueTypeName="bool",Ed.prototype.ValueBufferType=Array,Ed.prototype.DefaultInterpolation=zf,Ed.prototype.InterpolantFactoryMethodLinear=void 0,Ed.prototype.InterpolantFactoryMethodSmooth=void 0;class tB extends so{}tB.prototype.ValueTypeName="color";class hp extends so{}hp.prototype.ValueTypeName="number";class nae extends dp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Vi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class gc extends so{InterpolantFactoryMethodLinear(e){return new nae(this.times,this.values,this.getValueSize(),e)}}gc.prototype.ValueTypeName="quaternion",gc.prototype.DefaultInterpolation=Zu,gc.prototype.InterpolantFactoryMethodSmooth=void 0;class Dd extends so{}Dd.prototype.ValueTypeName="string",Dd.prototype.ValueBufferType=Array,Dd.prototype.DefaultInterpolation=zf,Dd.prototype.InterpolantFactoryMethodLinear=void 0,Dd.prototype.InterpolantFactoryMethodSmooth=void 0;class fp extends so{}fp.prototype.ValueTypeName="vector";class pp{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Nr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(rae(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(so.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=J3(l);l=sC(l,1,u),c=sC(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new hp(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(d,h,f,m,p){if(0!==f.length){const g=[],_=[];oC(f,g,_,m),0!==g.length&&p.push(new d(h,g,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let p=0;p<h[m].morphTargets.length;p++)f[h[m].morphTargets[p]]=-1;for(const p in f){const g=[],_=[];for(let y=0;y!==h[m].morphTargets.length;++y){const v=h[m];g.push(v.time),_.push(v.morphTarget===p?1:0)}r.push(new hp(".morphTargetInfluence["+p+"]",g,_))}l=f.length*o}else{const f=".bones["+t[d].name+"]";n(fp,f+".position",h,"pos",r),n(gc,f+".quaternion",h,"rot",r),n(fp,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let n=0,r=this.tracks.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function rae(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function iae(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hp;case"vector":case"vector2":case"vector3":case"vector4":return fp;case"color":return tB;case"quaternion":return gc;case"bool":case"boolean":return Ed;case"string":return Dd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const t=[],n=[];oC(i.keys,t,n,"value"),i.times=t,i.values=n}return void 0!==e.parse?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Td={enabled:!1,files:{},add:function(i,e){!1!==this.enabled&&(this.files[i]=e)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class aC{constructor(e,t,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],m=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return m}return null}}}const sae=new aC;class mp{constructor(e){this.manager=void 0!==e?e:sae,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Zo={};class oae extends Error{constructor(e,t){super(e),this.response=t}}class oo extends mp{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Td.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Zo[e])return void Zo[e].push({onLoad:t,onProgress:n,onError:r});Zo[e]=[],Zo[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const u=Zo[e],d=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,m=0!==f;let p=0;const g=new ReadableStream({start(_){!function y(){d.read().then(({done:v,value:b})=>{if(v)_.close();else{p+=b.byteLength;const x=new ProgressEvent("progress",{lengthComputable:m,loaded:p,total:f});for(let M=0,C=u.length;M<C;M++){const w=u[M];w.onProgress&&w.onProgress(x)}_.enqueue(b),y()}})}()}});return new Response(g)}throw new oae(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{Td.add(e,c);const u=Zo[e];delete Zo[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Zo[e];if(void 0===u)throw this.manager.itemError(e),c;delete Zo[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Dy extends mp{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Td.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=jf("img");function l(){u(),Td.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class aae extends mp{constructor(e){super(e)}load(e,t,n,r){const s=new Fs,o=new Dy(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},n,r),s}}class lC extends yi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new De(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const nB=new pt,iB=new D,rB=new D;class cC{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ie(512,512),this.map=null,this.mapPass=null,this.matrix=new pt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new bS,this._frameExtents=new ie(1,1),this._viewportCount=1,this._viewports=[new tn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;iB.setFromMatrixPosition(e.matrixWorld),t.position.copy(iB),rB.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(rB),t.updateMatrixWorld(),nB.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nB),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class cae extends cC{constructor(){super(new bi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*Gf*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class sB extends lC{constructor(e,t,n=0,r=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yi.DefaultUp),this.updateMatrix(),this.target=new yi,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new cae}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const oB=new pt,gp=new D,uC=new D;class uae extends cC{constructor(){super(new bi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ie(4,2),this._viewportCount=6,this._viewports=[new tn(2,1,1,1),new tn(0,1,1,1),new tn(3,1,1,1),new tn(1,1,1,1),new tn(3,0,1,1),new tn(1,0,1,1)],this._cubeDirections=[new D(1,0,0),new D(-1,0,0),new D(0,0,1),new D(0,0,-1),new D(0,1,0),new D(0,-1,0)],this._cubeUps=[new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,0,1),new D(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),gp.setFromMatrixPosition(e.matrixWorld),n.position.copy(gp),uC.copy(n.position),uC.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(uC),n.updateMatrixWorld(),r.makeTranslation(-gp.x,-gp.y,-gp.z),oB.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oB)}}class aB extends lC{constructor(e,t,n=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new uae}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class dae extends cC{constructor(){super(new ry(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class lB extends lC{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yi.DefaultUp),this.updateMatrix(),this.target=new yi,this.shadow=new dae}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Qo{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class vae extends mp{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Td.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Td.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}const hC="\\[\\]\\.:\\/",Sae=new RegExp("["+hC+"]","g"),fC="[^"+hC+"]",Cae="[^"+hC.replace("\\.","")+"]",Iae=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",fC)+/(WCOD+)?/.source.replace("WCOD",Cae)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fC)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fC)+"$"),Rae=["material","materials","bones","map"];class Pae{constructor(e,t,n){const r=n||pn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}let pn=(()=>{class i{constructor(t,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new i.Composite(t,n,r):new i(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Sae,"")}static parseTrackName(t){const n=Iae.exec(t);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==Rae.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(void 0===n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[n++]=r[s]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(t||(t=i.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=Pae,i})();pn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},pn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},pn.prototype.GetterByBindingType=[pn.prototype._getValue_direct,pn.prototype._getValue_array,pn.prototype._getValue_arrayElement,pn.prototype._getValue_toArray],pn.prototype.SetterByBindingTypeAndVersioning=[[pn.prototype._setValue_direct,pn.prototype._setValue_direct_setNeedsUpdate,pn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_array,pn.prototype._setValue_array_setNeedsUpdate,pn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_arrayElement,pn.prototype._setValue_arrayElement_setNeedsUpdate,pn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_fromArray,pn.prototype._setValue_fromArray_setNeedsUpdate,pn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class kae{constructor(e,t,n=0,r=1/0){this.ray=new W_(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new aS,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return pC(e,this,n,t),n.sort(yB),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)pC(e[r],this,n,t);return n.sort(yB),n}}function yB(i,e){return i.distance-e.distance}function pC(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),!0===n){const r=i.children;for(let s=0,o=r.length;s<o;s++)pC(r[s],e,t,!0)}}class vB{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Wn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"144"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="144");let Hae=(()=>{class i{constructor(){this.isActive=!1,this.trigger=new qe}setup(){this.start=Date.now(),this.current=this.start,this.elapsed=0,this.delta=16,window.requestAnimationFrame(()=>{this.tick()}),this.isActive=!0}tick(){if(this.isActive){const t=Date.now();this.delta=t-this.current,this.current=t,this.elapsed=this.current-this.start,this.trigger.next(),window.requestAnimationFrame(()=>{this.tick()})}}getTrigger(){return this.trigger.asObservable()}stop(){delete this.start,delete this.delta,delete this.current,delete this.elapsed,this.isActive=!1}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),zae=(()=>{class i{constructor(){this.resize=new qe}setup(){window.addEventListener("resize",this.onResize.bind(this))}onResize(){this.resize.next()}getResize(){return this.resize.asObservable()}destroy(){window.removeEventListener("resize",this.onResize.bind(this))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const AB={type:"change"},_C={type:"start"},IB={type:"end"};class Gae extends tc{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new D,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(T){T.addEventListener("keydown",Xt),this._domElementKeyEvents=T},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(AB),n.update(),s=r.NONE},this.update=function(){const T=new D,he=(new Vi).setFromUnitVectors(e.up,new D(0,1,0)),be=he.clone().invert(),Pe=new D,Ie=new Vi,rt=2*Math.PI;return function(){const xn=n.object.position;T.copy(xn).sub(n.target),T.applyQuaternion(he),a.setFromVector3(T),n.autoRotate&&s===r.NONE&&S(function C(){return 2*Math.PI/60/60*n.autoRotateSpeed}()),n.enableDamping?(a.theta+=l.theta*n.dampingFactor,a.phi+=l.phi*n.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let U=n.minAzimuthAngle,Ee=n.maxAzimuthAngle;return isFinite(U)&&isFinite(Ee)&&(U<-Math.PI?U+=rt:U>Math.PI&&(U-=rt),Ee<-Math.PI?Ee+=rt:Ee>Math.PI&&(Ee-=rt),a.theta=U<=Ee?Math.max(U,Math.min(Ee,a.theta)):a.theta>(U+Ee)/2?Math.max(U,a.theta):Math.min(Ee,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(u,n.dampingFactor):n.target.add(u),T.setFromSpherical(a),T.applyQuaternion(be),xn.copy(n.target).add(T),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,u.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,!!(d||Pe.distanceToSquared(n.object.position)>o||8*(1-Ie.dot(n.object.quaternion))>o)&&(n.dispatchEvent(AB),Pe.copy(n.object.position),Ie.copy(n.object.quaternion),d=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Q),n.domElement.removeEventListener("pointerdown",ye),n.domElement.removeEventListener("pointercancel",ct),n.domElement.removeEventListener("wheel",nn),n.domElement.removeEventListener("pointermove",Be),n.domElement.removeEventListener("pointerup",Ce),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",Xt)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new vB,l=new vB;let c=1;const u=new D;let d=!1;const h=new ie,f=new ie,m=new ie,p=new ie,g=new ie,_=new ie,y=new ie,v=new ie,b=new ie,x=[],M={};function w(){return Math.pow(.95,n.zoomSpeed)}function S(T){l.theta-=T}function I(T){l.phi-=T}const W=function(){const T=new D;return function(be,Pe){T.setFromMatrixColumn(Pe,0),T.multiplyScalar(-be),u.add(T)}}(),K=function(){const T=new D;return function(be,Pe){!0===n.screenSpacePanning?T.setFromMatrixColumn(Pe,1):(T.setFromMatrixColumn(Pe,0),T.crossVectors(n.object.up,T)),T.multiplyScalar(be),u.add(T)}}(),B=function(){const T=new D;return function(be,Pe){const Ie=n.domElement;if(n.object.isPerspectiveCamera){T.copy(n.object.position).sub(n.target);let Lt=T.length();Lt*=Math.tan(n.object.fov/2*Math.PI/180),W(2*be*Lt/Ie.clientHeight,n.object.matrix),K(2*Pe*Lt/Ie.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(W(be*(n.object.right-n.object.left)/n.object.zoom/Ie.clientWidth,n.object.matrix),K(Pe*(n.object.top-n.object.bottom)/n.object.zoom/Ie.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function L(T){n.object.isPerspectiveCamera?c/=T:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*T)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function X(T){n.object.isPerspectiveCamera?c*=T:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/T)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(T){h.set(T.clientX,T.clientY)}function H(T){p.set(T.clientX,T.clientY)}function fe(){1===x.length?h.set(x[0].pageX,x[0].pageY):h.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function He(){1===x.length?p.set(x[0].pageX,x[0].pageY):p.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function re(){const T=x[0].pageX-x[1].pageX,he=x[0].pageY-x[1].pageY,be=Math.sqrt(T*T+he*he);y.set(0,be)}function ze(T){if(1==x.length)f.set(T.pageX,T.pageY);else{const be=it(T);f.set(.5*(T.pageX+be.x),.5*(T.pageY+be.y))}m.subVectors(f,h).multiplyScalar(n.rotateSpeed);const he=n.domElement;S(2*Math.PI*m.x/he.clientHeight),I(2*Math.PI*m.y/he.clientHeight),h.copy(f)}function Me(T){if(1===x.length)g.set(T.pageX,T.pageY);else{const he=it(T);g.set(.5*(T.pageX+he.x),.5*(T.pageY+he.y))}_.subVectors(g,p).multiplyScalar(n.panSpeed),B(_.x,_.y),p.copy(g)}function dt(T){const he=it(T),be=T.pageX-he.x,Pe=T.pageY-he.y,Ie=Math.sqrt(be*be+Pe*Pe);v.set(0,Ie),b.set(0,Math.pow(v.y/y.y,n.zoomSpeed)),L(b.y),y.copy(v)}function ye(T){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(T.pointerId),n.domElement.addEventListener("pointermove",Be),n.domElement.addEventListener("pointerup",Ce)),function _e(T){x.push(T)}(T),"touch"===T.pointerType?function R(T){switch(Te(T),x.length){case 1:switch(n.touches.ONE){case 0:if(!1===n.enableRotate)return;fe(),s=r.TOUCH_ROTATE;break;case 1:if(!1===n.enablePan)return;He(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(n.touches.TWO){case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;(function $e(){n.enableZoom&&re(),n.enablePan&&He()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function We(){n.enableZoom&&re(),n.enableRotate&&fe()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(_C)}(T):function et(T){let he;switch(T.button){case 0:he=n.mouseButtons.LEFT;break;case 1:he=n.mouseButtons.MIDDLE;break;case 2:he=n.mouseButtons.RIGHT;break;default:he=-1}switch(he){case 1:if(!1===n.enableZoom)return;(function G(T){y.set(T.clientX,T.clientY)})(T),s=r.DOLLY;break;case 0:if(T.ctrlKey||T.metaKey||T.shiftKey){if(!1===n.enablePan)return;H(T),s=r.PAN}else{if(!1===n.enableRotate)return;O(T),s=r.ROTATE}break;case 2:if(T.ctrlKey||T.metaKey||T.shiftKey){if(!1===n.enableRotate)return;O(T),s=r.ROTATE}else{if(!1===n.enablePan)return;H(T),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(_C)}(T))}function Be(T){!1!==n.enabled&&("touch"===T.pointerType?function E(T){switch(Te(T),s){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;ze(T),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;Me(T),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;(function ce(T){n.enableZoom&&dt(T),n.enablePan&&Me(T)})(T),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function oe(T){n.enableZoom&&dt(T),n.enableRotate&&ze(T)})(T),n.update();break;default:s=r.NONE}}(T):function Ye(T){switch(s){case r.ROTATE:if(!1===n.enableRotate)return;!function F(T){f.set(T.clientX,T.clientY),m.subVectors(f,h).multiplyScalar(n.rotateSpeed);const he=n.domElement;S(2*Math.PI*m.x/he.clientHeight),I(2*Math.PI*m.y/he.clientHeight),h.copy(f),n.update()}(T);break;case r.DOLLY:if(!1===n.enableZoom)return;!function z(T){v.set(T.clientX,T.clientY),b.subVectors(v,y),b.y>0?L(w()):b.y<0&&X(w()),y.copy(v),n.update()}(T);break;case r.PAN:if(!1===n.enablePan)return;!function de(T){g.set(T.clientX,T.clientY),_.subVectors(g,p).multiplyScalar(n.panSpeed),B(_.x,_.y),p.copy(g),n.update()}(T)}}(T))}function Ce(T){ve(T),0===x.length&&(n.domElement.releasePointerCapture(T.pointerId),n.domElement.removeEventListener("pointermove",Be),n.domElement.removeEventListener("pointerup",Ce)),n.dispatchEvent(IB),s=r.NONE}function ct(T){ve(T)}function nn(T){!1===n.enabled||!1===n.enableZoom||s!==r.NONE||(T.preventDefault(),n.dispatchEvent(_C),function ee(T){T.deltaY<0?X(w()):T.deltaY>0&&L(w()),n.update()}(T),n.dispatchEvent(IB))}function Xt(T){!1===n.enabled||!1===n.enablePan||function me(T){let he=!1;switch(T.code){case n.keys.UP:B(0,n.keyPanSpeed),he=!0;break;case n.keys.BOTTOM:B(0,-n.keyPanSpeed),he=!0;break;case n.keys.LEFT:B(n.keyPanSpeed,0),he=!0;break;case n.keys.RIGHT:B(-n.keyPanSpeed,0),he=!0}he&&(T.preventDefault(),n.update())}(T)}function Q(T){!1!==n.enabled&&T.preventDefault()}function ve(T){delete M[T.pointerId];for(let he=0;he<x.length;he++)if(x[he].pointerId==T.pointerId)return void x.splice(he,1)}function Te(T){let he=M[T.pointerId];void 0===he&&(he=new ie,M[T.pointerId]=he),he.set(T.pageX,T.pageY)}function it(T){return M[(T.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}n.domElement.addEventListener("contextmenu",Q),n.domElement.addEventListener("pointerdown",ye),n.domElement.addEventListener("pointercancel",ct),n.domElement.addEventListener("wheel",nn,{passive:!1}),this.update()}}let Wae=(()=>{class i{constructor(){}initialize(t,n){return this.instance=new bi(35,t.width/t.height,.01,5e3),this.instance.position.set(75,75,75),{camera:this.instance,controls:this.setOrbitControl(n)}}setOrbitControl(t){return this.controls=new Gae(this.instance,t),this.controls.enableDamping=!0,this.controls}resize(t){this.instance.aspect=t.width/t.height,this.instance?.updateProjectionMatrix()}update(){this.controls?.update()}destroy(){this.controls?.dispose()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),jae=(()=>{class i{constructor(){}setInstance(t){return this.instance=new g3({antialias:!0}),this.instance.physicallyCorrectLights=!0,this.instance.outputEncoding=Kt,this.instance.toneMapping=3,this.instance.toneMappingExposure=1.75,this.instance.setClearColor("#211d20"),this.instance.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.instance.setSize(t.clientWidth,t.clientHeight),t.appendChild(this.instance.domElement),this.instance}resize(t){this.instance?.setSize(t.width,t.height),this.instance?.setPixelRatio(Math.min(window.devicePixelRatio,2))}update(t,n){this.instance?.render(t,n)}destroy(){this.instance?.dispose()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class $ae extends mp{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Zae(t)}),this.register(function(t){return new rle(t)}),this.register(function(t){return new sle(t)}),this.register(function(t){return new Jae(t)}),this.register(function(t){return new ele(t)}),this.register(function(t){return new tle(t)}),this.register(function(t){return new nle(t)}),this.register(function(t){return new Kae(t)}),this.register(function(t){return new ile(t)}),this.register(function(t){return new Qae(t)}),this.register(function(t){return new Xae(t)}),this.register(function(t){return new ole(t)})}load(e,t,n,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Qo.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new oo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},a={};if("string"==typeof e)s=e;else if(Qo.decodeText(new Uint8Array(e,0,4))===RB){try{o[At.KHR_BINARY_GLTF]=new ale(e)}catch(d){return void(r&&r(d))}s=o[At.KHR_BINARY_GLTF].content}else s=Qo.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(void 0===l.asset||l.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new ble(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);a[d.name]=d,o[d.name]=!0}if(l.extensionsUsed)for(let u=0;u<l.extensionsUsed.length;++u){const d=l.extensionsUsed[u],h=l.extensionsRequired||[];switch(d){case At.KHR_MATERIALS_UNLIT:o[d]=new Yae;break;case At.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[d]=new ule;break;case At.KHR_DRACO_MESH_COMPRESSION:o[d]=new lle(l,this.dracoLoader);break;case At.KHR_TEXTURE_TRANSFORM:o[d]=new cle;break;case At.KHR_MESH_QUANTIZATION:o[d]=new dle;break;default:h.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function qae(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const At={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Xae{constructor(e){this.parser=e,this.name=At.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new De(16777215);void 0!==l.color&&u.fromArray(l.color);const d=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new lB(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new aB(u),c.distance=d;break;case"spot":c=new sB(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class Yae{constructor(){this.name=At.KHR_MATERIALS_UNLIT}getMaterialType(){return tr}extendParams(e,t,n){const r=[];e.color=new De(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(e,"map",s.baseColorTexture,Kt))}return Promise.all(r)}}class Kae{constructor(e){this.parser=e,this.name=At.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class Zae{constructor(e){this.parser=e,this.name=At.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Xa:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ie(a,a)}return Promise.all(s)}}class Qae{constructor(e){this.parser=e,this.name=At.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Xa:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Jae{constructor(e){this.parser=e,this.name=At.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Xa:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new De(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Kt)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class ele{constructor(e){this.parser=e,this.name=At.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Xa:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class tle{constructor(e){this.parser=e,this.name=At.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Xa:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new De(a[0],a[1],a[2]),Promise.all(s)}}class nle{constructor(e){this.parser=e,this.name=At.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Xa:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class ile{constructor(e){this.parser=e,this.name=At.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Xa:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new De(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,Kt)),Promise.all(s)}}class rle{constructor(e){this.parser=e,this.name=At.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class sle{constructor(e){this.parser=e,this.name=At.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class ole{constructor(e){this.name=At.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,d=r.byteStride,h=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(f),u,d,h,r.mode,r.filter),f})})}return null}}const RB="glTF";class ale{constructor(e){this.name=At.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:Qo.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==RB)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const l=new Uint8Array(e,12+s,o);this.content=Qo.decodeText(l)}else if(5130562===a){const l=12+s;this.body=e.slice(l,l+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class lle{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=At.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=vC[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=vC[u]||u.toLowerCase();if(void 0!==o[u]){const h=n.accessors[e.attributes[u]];c[d]=yp[h.componentType].name,l[d]=!0===h.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d){r.decodeDracoFile(u,function(h){for(const f in h.attributes){const m=h.attributes[f],p=l[f];void 0!==p&&(m.normalized=p)}d(h)},a,c)})})}}class cle{constructor(){this.name=At.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class yC extends up{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new De).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class ule{constructor(){this.name=At.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return yC}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new De(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==r.diffuseTexture&&s.push(n.assignTexture(e,"map",r.diffuseTexture,Kt)),e.emissive=new De(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new De(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const o=r.specularGlossinessTexture;s.push(n.assignTexture(e,"glossinessMap",o)),s.push(n.assignTexture(e,"specularMap",o,Kt))}return Promise.all(s)}createMaterial(e){const t=new yC(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class dle{constructor(){this.name=At.KHR_MESH_QUANTIZATION}}class LB extends dp{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,u=r-t,d=(n-t)/u,h=d*d,f=h*d,m=e*c,p=m-c,g=-2*f+3*h,_=f-h,y=1-g,v=_-h+d;for(let b=0;b!==a;b++)s[b]=y*o[p+b+a]+v*(o[p+b+l]*u)+g*o[m+b+a]+_*(o[m+b]*u);return s}}const hle=new Vi;class fle extends LB{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return hle.fromArray(s).normalize().toArray(s),s}}const yp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},OB={9728:ti,9729:Nn,9984:1004,9985:1007,9986:1005,9987:Fa},FB={33071:er,33648:1002,10497:Yl},kB={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vC={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ka={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ple={CUBICSPLINE:void 0,LINEAR:Zu,STEP:zf};function mle(i){return void 0===i.DefaultMaterial&&(i.DefaultMaterial=new up({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),i.DefaultMaterial}function vp(i,e,t){for(const n in t.extensions)void 0===i[n]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function wc(i,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function _le(i,e){if(i.updateMorphTargets(),void 0!==e.weights)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function yle(i){const e=i.extensions&&i.extensions[At.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+NB(e.attributes):i.indices+":"+NB(i.attributes)+":"+i.mode,t}function NB(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function xC(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class ble{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new qae,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;this.textureLoader=typeof createImageBitmap>"u"||n||r&&s<98?new aae(this.options.manager):new vae(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new oo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};vp(s,a,r),wc(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(n[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[At.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(Qo.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteOffset||0;return n.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=kB[r.type],c=yp[r.componentType],u=c.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,m=!0===r.normalized;let p,g;if(f&&f!==u*l){const _=Math.floor(h/f),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let v=t.cache.get(y);v||(p=new c(a,_*f,r.count*f/u),v=new AS(p,f/u),t.cache.add(y,v)),g=new fc(v,l,h%f/u,m)}else p=null===a?new c(r.count*l):new c(a,h,r.count*l),g=new jn(p,l,m);if(void 0!==r.sparse){const b=r.sparse.values.byteOffset||0,x=new(0,yp[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*kB.SCALAR),M=new c(o[2],b,r.sparse.count*l);null!==a&&(g=new jn(g.array.slice(),g.itemSize,g.normalized));for(let C=0,w=x.length;C<w;C++){const S=x[C];if(g.setX(S,M[C*l]),l>=2&&g.setY(S,M[C*l+1]),l>=3&&g.setZ(S,M[C*l+2]),l>=4&&g.setW(S,M[C*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(u){u.flipY=!1,o.name&&(u.name=o.name);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=OB[h.magFilter]||Nn,u.minFilter=OB[h.minFilter]||Fa,u.wrapS=FB[h.wrapS]||Yl,u.wrapT=FB[h.wrapT]||Yl,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(h,f){let m=h;!0===t.isImageBitmapLoader&&(m=function(p){const g=new Fs(p);g.needsUpdate=!0,h(g)}),t.load(Qo.resolveURL(d,s.path),m,void 0,f)})}).then(function(d){return!0===c&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||function vle(i){return i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/)?"image/jpeg":i.search(/\.webp($|\?)/i)>0||0===i.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(void 0!==n.texCoord&&0!=n.texCoord&&!("aoMap"===t&&1==n.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),s.extensions[At.KHR_TEXTURE_TRANSFORM]){const a=void 0!==n.extensions?n.extensions[At.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[At.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new OS,Bs.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new gr,Bs.prototype.copy.call(l,n),l.color.copy(n.color),this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return up}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[At.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=r[At.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else if(l[At.KHR_MATERIALS_UNLIT]){const d=r[At.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new De(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}void 0!==d.baseColorTexture&&c.push(t.assignTexture(a,"map",d.baseColorTexture,Kt)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==tr&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ie(1,1),void 0!==s.normalTexture.scale)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return void 0!==s.occlusionTexture&&o!==tr&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==tr&&(a.emissive=(new De).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==tr&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Kt)),Promise.all(c).then(function(){let d;return d=o===yC?r[At.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),s.name&&(d.name=s.name),wc(d,s),t.associations.set(d,{materials:e}),s.extensions&&vp(r,d,s),d})}createUniqueName(e){const t=pn.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[At.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return VB(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=yle(c),d=r[u];if(d)o.push(d.promise);else{let h;h=c.extensions&&c.extensions[At.KHR_DRACO_MESH_COMPRESSION]?s(c):VB(new bt,c,t),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=void 0===o[l].material?mle(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let f=0,m=u.length;f<m;f++){const p=u[f],g=o[f];let _;const y=c[f];if(4===g.mode||5===g.mode||6===g.mode||void 0===g.mode)_=!0===s.isSkinnedMesh?new D3(p,y):new ii(p,y),!0===_.isSkinnedMesh&&!_.geometry.attributes.skinWeight.normalized&&_.normalizeSkinWeights(),5===g.mode?_.geometry=UB(_.geometry,1):6===g.mode&&(_.geometry=UB(_.geometry,2));else if(1===g.mode)_=new LS(p,y);else if(3===g.mode)_=new $a(p,y);else if(2===g.mode)_=new k3(p,y);else{if(0!==g.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);_=new B3(p,y)}Object.keys(_.geometry.morphAttributes).length>0&&_le(_,s),_.name=t.createUniqueName(s.name||"mesh_"+e),wc(_,s),g.extensions&&vp(r,_,g),t.assignFinalMaterial(_),d.push(_)}for(let f=0,m=d.length;f<m;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(1===d.length)return d[0];const h=new ja;t.associations.set(h,{meshes:e});for(let f=0,m=d.length;f<m;f++)h.add(d[f]);return h})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new bi(Vte.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new ry(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),wc(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return n.inverseBindMatrices=r,n})}loadAnimation(e){const n=this.json.animations[e],r=[],s=[],o=[],a=[],l=[];for(let c=0,u=n.channels.length;c<u;c++){const d=n.channels[c],h=n.samplers[d.sampler],f=d.target,p=void 0!==n.parameters?n.parameters[h.input]:h.input,g=void 0!==n.parameters?n.parameters[h.output]:h.output;r.push(this.getDependency("node",f.node)),s.push(this.getDependency("accessor",p)),o.push(this.getDependency("accessor",g)),a.push(h),l.push(f)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2],f=c[3],m=c[4],p=[];for(let _=0,y=u.length;_<y;_++){const v=u[_],b=d[_],x=h[_],M=f[_],C=m[_];if(void 0===v)continue;let w;switch(v.updateMatrix(),Ka[C.path]){case Ka.weights:w=hp;break;case Ka.rotation:w=gc;break;default:w=fp}const S=v.name?v.name:v.uuid,I=void 0!==M.interpolation?ple[M.interpolation]:Zu,W=[];Ka[C.path]===Ka.weights?v.traverse(function(B){B.morphTargetInfluences&&W.push(B.name?B.name:B.uuid)}):W.push(S);let K=x.array;if(x.normalized){const B=xC(K.constructor),L=new Float32Array(K.length);for(let X=0,O=K.length;X<O;X++)L[X]=K[X]*B;K=L}for(let B=0,L=W.length;B<L;B++){const X=new w(W[B]+"."+Ka[C.path],b.array,K,I);"CUBICSPLINE"===M.interpolation&&(X.createInterpolant=function(G){return new(this instanceof gc?fle:LB)(this.times,this.values,this.getValueSize()/3,G)},X.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),p.push(X)}}return new pp(n.name?n.name:"animation_"+e,void 0,p)})}createNodeMesh(e){const n=this,r=this.json.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this.extensions,r=this,s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(l=!0===s.isBone?new RS:a.length>1?new ja:1===a.length?a[0]:new yi,l!==a[0])for(let c=0,u=a.length;c<u;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),wc(l,s),s.extensions&&vp(n,l,s),void 0!==s.matrix){const c=new pt;c.fromArray(s.matrix),l.applyMatrix4(c)}else void 0!==s.translation&&l.position.fromArray(s.translation),void 0!==s.rotation&&l.quaternion.fromArray(s.rotation),void 0!==s.scale&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],s=this,o=new ja;r.name&&(o.name=s.createUniqueName(r.name)),wc(o,r),r.extensions&&vp(n,o,r);const a=r.nodes||[],l=[];for(let c=0,u=a.length;c<u;c++)l.push(BB(a[c],o,t,s));return Promise.all(l).then(function(){return s.associations=(u=>{const d=new Map;for(const[h,f]of s.associations)(h instanceof Bs||h instanceof Fs)&&d.set(h,f);return u.traverse(h=>{const f=s.associations.get(h);null!=f&&d.set(h,f)}),d})(o),o})}}function BB(i,e,t,n){const r=t.nodes[i];return n.getDependency("node",i).then(function(s){if(void 0===r.skin)return s;let o;return n.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let c=0,u=o.joints.length;c<u;c++)l.push(n.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],u=[];for(let d=0,h=a.length;d<h;d++){const f=a[d];if(f){c.push(f);const m=new pt;void 0!==o.inverseBindMatrices&&m.fromArray(o.inverseBindMatrices.array,16*d),u.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[d])}l.bind(new hy(c,u),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,c=a.length;l<c;l++)o.push(BB(a[l],s,t,n))}return Promise.all(o)})}function VB(i,e,t){const n=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=vC[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(void 0!==e.indices&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});r.push(o)}return wc(i,e),function xle(i,e,t){const n=e.attributes,r=new sc;if(void 0===n.POSITION)return;{const a=t.json.accessors[n.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new D(l[0],l[1],l[2]),new D(c[0],c[1],c[2])),a.normalized){const u=xC(yp[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new D,l=new D;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(void 0!==d.POSITION){const h=t.json.accessors[d.POSITION],f=h.min,m=h.max;if(void 0!==f&&void 0!==m){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),h.normalized){const p=xC(yp[h.componentType]);l.multiplyScalar(p)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new cc;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}(i,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function gle(i,e,t){let n=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(void 0!==d.POSITION&&(n=!0),void 0!==d.NORMAL&&(r=!0),void 0!==d.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(n){const h=void 0!==d.POSITION?t.getDependency("accessor",d.POSITION):i.attributes.position;o.push(h)}if(r){const h=void 0!==d.NORMAL?t.getDependency("accessor",d.NORMAL):i.attributes.normal;a.push(h)}if(s){const h=void 0!==d.COLOR_0?t.getDependency("accessor",d.COLOR_0):i.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[1],h=c[2];return n&&(i.morphAttributes.position=c[0]),r&&(i.morphAttributes.normal=d),s&&(i.morphAttributes.color=h),i.morphTargetsRelative=!0,i})}(i,e.targets,t):i})}function UB(i,e){let t=i.getIndex();if(null===t){const o=[],a=i.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i;for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}const n=t.count-2,r=[];if(2===e)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s}let wle=(()=>{class i{constructor(){this.manager=new aC(this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this)),this.gltfLoader=new $ae(this.manager),this.loaded$=new qe,this.modelLoaded$=new qe,this.resourcesLoaded$=new qe}onLoad(){this.resourcesLoaded$.next()}onProgress(t,n,r){this.loaded$.next(n/r)}onError(t){console.log("Error in loading ",t)}loadModel(t){this.gltfLoader.load(t,n=>{this.modelLoaded$.next(n)})}getLoadedAmount(){return this.loaded$.asObservable()}getLoadedModel(){return this.modelLoaded$.asObservable()}getResourcesLoaded(){return this.resourcesLoaded$.asObservable()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Mle=(()=>{class i{constructor(){this.instance=new kae,this.pointer=new ie,this.intersections$=new qe}raycastOnClickedPoint(t,n,r,s,o){this.pointer.x=t.clientX/n.width*2-1,this.pointer.y=-t.clientY/n.height*2+1,this.instance.setFromCamera(this.pointer,r);const a=this.instance.intersectObject(s,!0),l=this.instance.intersectObjects(o);this.intersections$.next({modelIntersections:a,dimIntersections:l})}getIntersections(){return this.intersections$.asObservable()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var HB=tt(804);let Sle=(()=>{class i{constructor(){this.lengthMarkers=[],this.meshAdded$=new qe,this.lengthObj$=new Ir({value:{length:0}}),this.requestMeshRemoval$=new qe}setMarker(t){if((t.dimIntersections.length>0||t.modelIntersections.length>0)&&this.lengthMarkers.length>3&&this.dimensionPolygon&&this.requestMeshRemoval$.next(),t.dimIntersections.length>0&&this.lengthMarkers.length>2){const n=new bt,r=this.lengthMarkers.map(o=>o.position),s=[];try{const o=new HB.SweepContext(r.map(u=>new HB.Point(u.x,u.z)));o.triangulate();const a=new Float32Array(o.getTriangles().map(u=>{const d=u.getPoints().map(h=>{const f=r.find(m=>m.x===h.x&&m.z===h.y).y;return new D(h.x,f,h.y)});return s.push(new hs(d[0],d[1],d[2])),d}).reduce((u,d)=>[...u,...d.reduce((h,f)=>[...h,f.x,f.y,f.z],[])],[])),l=s.reduce((u,d)=>u+d.getArea(),0);n.setAttribute("position",new jn(a,3)),this.dimensionPolygon=new ii(n,new tr({color:13959168,transparent:!0,opacity:.5,side:2})),this.dimensionPolygon.material.depthTest=!1,this.meshAdded$.next(this.dimensionPolygon);const c=[...this.lengthMarkers,this.lengthMarkers[0]].reduce((u,d)=>{const h=u.prevPos.distanceTo(d.position);return{prevPos:d.position,length:h+u.length}},{length:0,prevPos:this.lengthMarkers[0].position});this.lengthObj$.next({value:{length:c.length,area:l,position:c.prevPos}})}catch{this.lengthObj$.next({value:this.lengthObj$.value.value,error:new Error("Not a valid polygon. Please press 'Escape' key & draw a valid polygon, with no intersecting sides, to measure area.")})}}else if(t.modelIntersections.length>0){const n=t.modelIntersections[0].point;n.setY(n.y);const r=new ii(new cp(1),new tr({color:13959168,transparent:!0,opacity:.5}));if(r.position.copy(n),r.userData={type:"marker"},r.material.depthTest=!1,this.lengthMarkers.push(r),this.meshAdded$.next(r),this.lengthMarkers.length>0){if(this.dimensionLine)this.dimensionLine.geometry.setFromPoints(this.lengthMarkers.map(o=>o.position)),this.meshAdded$.next(this.dimensionLine);else{const o=new bt;o.setFromPoints(this.lengthMarkers.map(a=>a.position)),this.dimensionLine=new $a(o,new tr({color:13959168})),this.dimensionLine.material.depthTest=!1}const s=this.lengthMarkers.reduce((o,a)=>{const l=o.prevPos.distanceTo(a.position);return{prevPos:a.position,length:l+o.length}},{length:0,prevPos:this.lengthMarkers[0].position});this.lengthObj$.next({value:{length:s.length,position:s.prevPos}})}}}meshAdded(){return this.meshAdded$.asObservable()}getLengthObj(){return this.lengthObj$.asObservable()}getToBeRemovedMeshes(){return[...this.lengthMarkers,this.dimensionLine,this.dimensionPolygon]}requestDimMeshesRemoval(){return this.requestMeshRemoval$.asObservable()}destroy(){this.lengthMarkers.splice(0),delete this.dimensionLine,delete this.dimensionPolygon,this.lengthObj$.next({value:{length:0}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Cle=(()=>{class i{constructor(){}initLoadingObjects(){return this.overlayGeometry=new Yf(2,2,1,1),this.overlayMaterial=new Yo({transparent:!0,uniforms:{uAlpha:{value:1}},vertexShader:"\n           void main()\n           {\n               gl_Position = vec4(position, 1.0);\n           }\n       ",fragmentShader:"\n           uniform float uAlpha;\n   \n           void main()\n           {\n               gl_FragColor = vec4(0.0, 0.0, 0.0, uAlpha);\n           }\n       "}),new ii(this.overlayGeometry,this.overlayMaterial)}destroy(){delete this.overlayGeometry,delete this.overlayMaterial}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ele=(()=>{class i{constructor(t,n,r,s,o,a,l,c){this.timeService=t,this.sizesService=n,this.cameraService=r,this.rendererService=s,this.resourcesService=o,this.raycasterService=a,this.dimensionService=l,this.loadingService=c,this.currentMeasurementOnPoint$=new qe,this.modes=Rr.DEFAULT}initialize(t,n,r){this.renderer=this.rendererService.setInstance(t),this.overlay=this.loadingService.initLoadingObjects(),this.sizesService.setup(),this.timeService.setup(),this.scene=new _3,this.scene.add(this.overlay),this.sizes={width:t.clientWidth,height:t.clientHeight};const s=this.cameraService.initialize(this.sizes,this.renderer.domElement);this.camera=s.camera,this.controls=s.controls,this.controls.enabled=!1,this.timeService.tick(),r.forEach(o=>{this.resourcesService.loadModel(o.assetUrl)}),this.sizesService.getResize().pipe(Dn(n)).subscribe(()=>{this.sizes={width:t.clientWidth,height:t.clientHeight},this.onResize(this.sizes)}),this.timeService.getTrigger().pipe(Dn(n)).subscribe(()=>{this.onUpdate()}),this.resourcesService.getLoadedModel().pipe(Dn(n)).subscribe(this.onModelLoaded.bind(this)),this.resourcesService.getResourcesLoaded().pipe(Dn(n)).subscribe(()=>{Nf.delayedCall(.5,()=>{this.overlay&&Nf.to(this.overlay.material.uniforms.uAlpha,{value:0,duration:3}).then(()=>{this.scene?.remove(this.overlay),this.loadingService.destroy()})})}),this.raycasterService.getIntersections().pipe(Dn(n)).subscribe(o=>{this.dimensionService.setMarker(o)}),this.dimensionService.meshAdded().pipe(Dn(n),di(()=>this.modes===Rr.DIM)).subscribe(o=>{this.scene?.add(o)}),this.timeService.getTrigger().pipe(Dn(n),di(()=>this.modes===Rr.DIM),function Dee(...i){const e=Gy(i);return k((t,n)=>{const r=i.length,s=new Array(r);let o=i.map(()=>!1),a=!1;for(let l=0;l<r;l++)zi(i[l]).subscribe(P(n,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(jr))&&(o=null))},ke));t.subscribe(P(n,l=>{if(a){const c=[l,...s];n.next(e?e(...c):c)}}))})}(this.dimensionService.getLengthObj())).subscribe({next:([o,{value:a,error:l}])=>{if(a.position){const c=a.position.clone();c.project(this.camera),this.currentMeasurementOnPoint$.next({error:l,value:{event:{x:c.x*this.sizes.width*.5,y:-c.y*this.sizes.height*.5},length:a.length,area:a.area}})}else this.currentMeasurementOnPoint$.next({error:l,value:{length:0}})}}),this.dimensionService.requestDimMeshesRemoval().pipe(Dn(n),di(()=>this.modes===Rr.DIM)).subscribe(()=>{this.onEscapePress()})}onResize(t){this.cameraService.resize(t),this.rendererService.resize(t)}onUpdate(){this.cameraService.update(),this.rendererService.update(this.scene,this.camera)}onModelLoaded(t){let n=!1,r=!1;t.scene.traverse(o=>{o instanceof yi&&(o.name.includes("plovdiv")&&(n=o.name.includes("plovdiv"),this.model=o,this.scene?.add(this.model)),o.name.includes("teste")&&(r=o.name.includes("teste"),this.model=o,this.scene?.add(this.model)))});let s=0;this.model?.traverse(o=>{o instanceof ii&&(o.geometry.computeBoundingSphere(),s=o.geometry.boundingSphere.radius)}),n&&(this.model.position.y=1.5*-s,this.model.position.z=s,this.model.rotation.x+=Math.PI,Nf.to(this.camera.position,{x:1.5*s,y:1.5*s,z:1.5*s,duration:5}).then(()=>{this.controls.enabled=!0})),r&&(this.model.position.z=.5*s,this.model.rotation.x+=Math.PI,Nf.to(this.camera.position,{x:1*s,y:1*s,z:1*s,duration:3}).then(()=>{this.controls.enabled=!0})),this.controls.target.set(0,0,0)}onClick(t){if(this.sizes&&this.camera&&this.model){const n=this.scene.children.filter(r=>"marker"===r.userData.type);this.raycasterService.raycastOnClickedPoint(t,this.sizes,this.camera,this.model,n)}}onEscapePress(){this.dimensionService.getToBeRemovedMeshes().forEach(n=>{n&&(n.geometry.dispose(),n.material.dispose(),this.scene?.remove(n))}),this.dimensionService.destroy()}getLoadedAmount(){return this.resourcesService.getLoadedAmount()}getCurrentLength(){return this.currentMeasurementOnPoint$.asObservable()}setMode(t){this.modes=t,this.modes===Rr.DEFAULT&&(this.onEscapePress(),this.currentMeasurementOnPoint$.next({value:{length:0}}))}destroy(){this.timeService.stop(),this.sizesService.destroy(),this.scene?.traverse(t=>{if(t instanceof ii){t.geometry.dispose();for(const n in t.material){const r=t.material[n];r&&"function"==typeof r.dispose&&r.dispose()}}}),this.cameraService.destroy(),this.rendererService.destroy()}}return i.\u0275fac=function(t){return new(t||i)(j(Hae),j(zae),j(Wae),j(jae),j(wle),j(Mle),j(Sle),j(Cle))},i.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Dle=["container"],Tle=["chipContainer"],Ale=["modeButton"];function Ile(i,e){if(1&i&&(vt(0,"mat-chip",7),an(1),hu(2,"number"),vt(3,"sup"),an(4,"2"),Mt()()),2&i){const t=yh();li(1),xh("Area: ",fu(2,1,t.area)," m")}}const Rle=function(i,e){return{title:!0,ended:i,hide:e}},Ple=function(i){return{"loading-bar":!0,ended:i}},Lle=function(i){return{transform:i}};let Ole=(()=>{class i{constructor(t,n,r,s,o){this.titleService=t,this.prithviService=n,this.renderer=r,this._bottomSheet=s,this.snackbar=o,this.title="Prithvi Analytics",this.hideTitle=!1,this.modeFormControl=new Bx(Rr.DEFAULT),this.mouseDown=!1,this.length=0,this.area=0,this.ngUnSubscribe=new qe,this.titleService.setTitle(this.title),this.loadingBarScale$=n.getLoadedAmount().pipe(Dn(this.ngUnSubscribe),zn(a=>{1===a&&setTimeout(()=>{this.hideTitle=!0},500)}),Z(a=>a<1?`scaleX(${a})`:""))}ngOnInit(){this.modeFormControl.valueChanges.pipe(Dn(this.ngUnSubscribe)).subscribe(t=>{this.prithviService.setMode(t),t===Rr.DEFAULT&&(this.container.nativeElement.style.cursor="grab"),t===Rr.DIM&&(this.container.nativeElement.style.cursor="crosshair")})}ngAfterViewInit(){this.prithviService.initialize(this.container.nativeElement,this.ngUnSubscribe,[{assetUrl:"/prithvi-analytics/assets/models/old_town_plovdiv/scene.gltf"}]),this.prithviService.getCurrentLength().pipe(Dn(this.ngUnSubscribe)).subscribe({next:({value:t,error:n})=>{if(this.length=t.length,this.area=t.area||0,this.chipContainer&&(t.event?(this.renderer.setStyle(this.chipContainer.nativeElement,"display","block"),this.renderer.setStyle(this.chipContainer.nativeElement,"transform",`translate(${t.event.x}px, ${t.event.y}px)`)):this.renderer.setStyle(this.chipContainer.nativeElement,"display","none")),n&&!this.error){const r=n.message;console.log(r),this.snackbar.open(r,"Dismiss")}this.error=n}})}onKeyDown(t){"Escape"===t.code&&this.prithviService.onEscapePress()}onMouseDown(){this.modeFormControl.value!==Rr.DEFAULT?(this.mouseDown=!0,this.clickTimeout&&clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout(()=>{this.mouseDown=!1},200)):this.container&&(this.container.nativeElement.style.cursor="grabbing")}onMouseUp(t){this.modeFormControl.value===Rr.DEFAULT?this.container&&(this.container.nativeElement.style.cursor="grab"):this.container&&(this.container.nativeElement.style.cursor="crosshair"),this.mouseDown&&(this.prithviService.onClick(t),this.clickTimeout&&clearTimeout(this.clickTimeout))}openInfoBox(){this._bottomSheet.open(hJ)}ngOnDestroy(){this.prithviService.destroy(),this.ngUnSubscribe.next(),this.ngUnSubscribe.complete()}}return i.\u0275fac=function(t){return new(t||i)(N(X0),N(Ele),N(zs),N(mK),N(GK))},i.\u0275cmp=Yn({type:i,selectors:[["app-root"]],viewQuery:function(t,n){if(1&t&&(Mo(Dle,5),Mo(Tle,5),Mo(Ale,5)),2&t){let r;Sn(r=Cn())&&(n.container=r.first),Sn(r=Cn())&&(n.chipContainer=r.first),Sn(r=Cn())&&(n.modeButton=r.first)}},hostBindings:function(t,n){1&t&&_n("keydown",function(s){return n.onKeyDown(s)},0,SD)},decls:28,vars:24,consts:[[1,"container",3,"mousedown","mouseup"],["container",""],[3,"ngClass"],[3,"ngClass","ngStyle"],[1,"chip-container"],["chipContainer",""],["area-orientation","vertical",1,"mat-chip-list-stacked"],["color","primary","selected",""],["color","primary","selected","",4,"ngIf"],[1,"mode"],["color","primary"],["aria-label","Mode",3,"formControl"],[3,"value"],["mat-mini-fab","",1,"info-box",3,"click"]],template:function(t,n){1&t&&(vt(0,"div",0,1),_n("mousedown",function(){return n.onMouseDown()})("mouseup",function(s){return n.onMouseUp(s)}),Mt(),vt(2,"h1",2),hu(3,"async"),an(4),Mt(),Yi(5,"div",3),hu(6,"async"),hu(7,"async"),vt(8,"div",4,5)(10,"mat-chip-list",6)(11,"mat-chip",7),an(12),hu(13,"number"),Mt(),pl(14,Ile,5,3,"mat-chip",8),Mt()(),vt(15,"div",9)(16,"mat-card",10)(17,"mat-card-title"),an(18," Mode "),Mt(),vt(19,"mat-card-content")(20,"mat-button-toggle-group",11)(21,"mat-button-toggle",12),an(22,"Default"),Mt(),vt(23,"mat-button-toggle",12),an(24,"Measurement"),Mt()()()()(),vt(25,"button",13),_n("click",function(){return n.openInfoBox()}),vt(26,"mat-icon"),an(27,"info"),Mt()()),2&t&&(li(2),Li("ngClass",w1(17,Rle,""===fu(3,9,n.loadingBarScale$),n.hideTitle)),li(2),bh(n.title),li(1),Li("ngClass",Zb(20,Ple,""===fu(6,11,n.loadingBarScale$)))("ngStyle",Zb(22,Lle,fu(7,13,n.loadingBarScale$))),li(7),xh("Distance: ",fu(13,15,n.length)," m"),li(2),Li("ngIf",n.area>0),li(6),Li("formControl",n.modeFormControl),li(1),Li("value",1),li(2),Li("value",2))},dependencies:[WI,$m,KI,zP,Ux,pO,Og,vO,bO,xO,HX,zX,wO,FO,ZI,JI],styles:[".container[_ngcontent-%COMP%]{height:100vh;width:100%;overflow:hidden}.container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{outline:none!important}.chip-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;display:none}.mode[_ngcontent-%COMP%]{position:absolute;top:5px;left:5px}.mode[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{padding-left:30%!important}h1.title[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 48px);width:100%;text-align:center;font-size:48px}h1.title.ended[_ngcontent-%COMP%]{opacity:0;transition:opacity 1.5s ease-in-out}h1.title.hide[_ngcontent-%COMP%]{display:none}.loading-bar[_ngcontent-%COMP%]{position:absolute;top:50%;width:100%;height:2px;transform:scaleX(0);transform-origin:top left;transition:transform .5s}.loading-bar.ended[_ngcontent-%COMP%]{transform:scaleX(0);transform-origin:100% 0;transition:transform 1.5s ease-in-out}.info-box[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}"]}),i})(),Fle=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i,bootstrap:[Ole]}),i.\u0275inj=Nt({imports:[bR,dJ,Zq,r7,LX,BX,GX,MO,gY,eF,LK,nF,uF]}),i})();(function f8(){vI=!1})(),z6().bootstrapModule(Fle).catch(i=>console.error(i))},215:wn=>{var tt=function(we,se){this.head_=we,this.tail_=se,this.search_node_=we};tt.prototype.head=function(){return this.head_},tt.prototype.setHead=function(we){this.head_=we},tt.prototype.tail=function(){return this.tail_},tt.prototype.setTail=function(we){this.tail_=we},tt.prototype.search=function(){return this.search_node_},tt.prototype.setSearch=function(we){this.search_node_=we},tt.prototype.findSearchNode=function(){return this.search_node_},tt.prototype.locateNode=function(we){var se=this.search_node_;if(we<se.value){for(;se=se.prev;)if(we>=se.value)return this.search_node_=se,se}else for(;se=se.next;)if(we<se.value)return this.search_node_=se.prev,se.prev;return null},tt.prototype.locatePoint=function(we){var se=we.x,ge=this.findSearchNode(se),$=ge.point.x;if(se===$){if(we!==ge.point)if(we===ge.prev.point)ge=ge.prev;else{if(we!==ge.next.point)throw new Error("poly2tri Invalid AdvancingFront.locatePoint() call");ge=ge.next}}else if(se<$)for(;(ge=ge.prev)&&we!==ge.point;);else for(;(ge=ge.next)&&we!==ge.point;);return ge&&(this.search_node_=ge),ge},wn.exports=tt,wn.exports.Node=function(we,se){this.point=we,this.triangle=se||null,this.next=null,this.prev=null,this.value=we.x}},181:wn=>{wn.exports=function zt(tt,we){if(!tt)throw new Error(we||"Assert Failed")}},770:(wn,zt,tt)=>{var we=tt(468),se=function(ge,$){this.x=+ge||0,this.y=+$||0,this._p2t_edge_list=null};se.prototype.toString=function(){return we.toStringBase(this)},se.prototype.toJSON=function(){return{x:this.x,y:this.y}},se.prototype.clone=function(){return new se(this.x,this.y)},se.prototype.set_zero=function(){return this.x=0,this.y=0,this},se.prototype.set=function(ge,$){return this.x=+ge||0,this.y=+$||0,this},se.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},se.prototype.add=function(ge){return this.x+=ge.x,this.y+=ge.y,this},se.prototype.sub=function(ge){return this.x-=ge.x,this.y-=ge.y,this},se.prototype.mul=function(ge){return this.x*=ge,this.y*=ge,this},se.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},se.prototype.normalize=function(){var ge=this.length();return this.x/=ge,this.y/=ge,ge},se.prototype.equals=function(ge){return this.x===ge.x&&this.y===ge.y},se.negate=function(ge){return new se(-ge.x,-ge.y)},se.add=function(ge,$){return new se(ge.x+$.x,ge.y+$.y)},se.sub=function(ge,$){return new se(ge.x-$.x,ge.y-$.y)},se.mul=function(ge,$){return new se(ge*$.x,ge*$.y)},se.cross=function(ge,$){return"number"==typeof ge?"number"==typeof $?ge*$:new se(-ge*$.y,ge*$.x):"number"==typeof $?new se($*ge.y,-$*ge.x):ge.x*$.y-ge.y*$.x},se.toString=we.toString,se.compare=we.compare,se.cmp=we.compare,se.equals=we.equals,se.dot=function(ge,$){return ge.x*$.x+ge.y*$.y},wn.exports=se},660:(wn,zt,tt)=>{var we=tt(468),se=function(ge,$){this.name="PointError",this.points=$=$||[],this.message=ge||"Invalid Points!";for(var J=0;J<$.length;J++)this.message+=" "+we.toString($[J])};(se.prototype=new Error).constructor=se,wn.exports=se},804:(wn,zt,tt)=>{var we=global.poly2tri;zt.noConflict=function(){return global.poly2tri=we,zt},zt.VERSION=tt(128).version,zt.PointError=tt(660),zt.Point=tt(770),zt.Triangle=tt(429),zt.SweepContext=tt(21);var se=tt(232);zt.triangulate=se.triangulate,zt.sweep={Triangulate:se.triangulate}},232:(wn,zt,tt)=>{var we=tt(181),se=tt(660),ge=tt(429),$=tt(215).Node,J=tt(76),Le=J.EPSILON,Xe=J.Orientation,kt=J.orient2d,si=J.inScanArea,wi=J.isAngleObtuse;function Ot(k,P){var V=k.locateNode(P),Z=function Hi(k,P,V){var Z=new ge(P,V.point,V.next.point);Z.markNeighbor(V.triangle),k.addToMap(Z);var Ge=new $(P);return Ge.next=V.next,Ge.prev=V,V.next.prev=Ge,V.next=Ge,Wr(k,Z)||k.mapTriangleToNodes(Z),Ge}(k,P,V);return P.x<=V.point.x+Le&&_s(k,V),function na(k,P){for(var V=P.next;V.next&&!wi(V.point,V.next.point,V.prev.point);)_s(k,V),V=V.next;for(V=P.prev;V.prev&&!wi(V.point,V.next.point,V.prev.point);)_s(k,V),V=V.prev;P.next&&P.next.next&&function ky(k){var P=k.point.x-k.next.next.point.x,V=k.point.y-k.next.next.point.y;return we(V>=0,"unordered y"),P>=0||Math.abs(P)<V}(P)&&function Cc(k,P){for(k.basin.left_node=kt(P.point,P.next.point,P.next.next.point)===Xe.CCW?P.next.next:P.next,k.basin.bottom_node=k.basin.left_node;k.basin.bottom_node.next&&k.basin.bottom_node.point.y>=k.basin.bottom_node.next.point.y;)k.basin.bottom_node=k.basin.bottom_node.next;if(k.basin.bottom_node!==k.basin.left_node){for(k.basin.right_node=k.basin.bottom_node;k.basin.right_node.next&&k.basin.right_node.point.y<k.basin.right_node.next.point.y;)k.basin.right_node=k.basin.right_node.next;k.basin.right_node!==k.basin.bottom_node&&(k.basin.width=k.basin.right_node.point.x-k.basin.left_node.point.x,k.basin.left_highest=k.basin.left_node.point.y>k.basin.right_node.point.y,xp(k,k.basin.bottom_node))}}(k,P)}(k,Z),Z}function mn(k,P,V){k.edge_event.constrained_edge=P,k.edge_event.right=P.p.x>P.q.x,!Gr(V.triangle,P.p,P.q)&&(function By(k,P,V){k.edge_event.right?function Ld(k,P,V){for(;V.next.point.x<P.p.x;)kt(P.q,V.next.point,P.p)===Xe.CCW?jr(k,P,V):V=V.next}(k,P,V):function dn(k,P,V){for(;V.prev.point.x>P.p.x;)kt(P.q,V.prev.point,P.p)===Xe.CW?kd(k,P,V):V=V.prev}(k,P,V)}(k,P,V),zr(k,P.p,P.q,V.triangle,P.q))}function zr(k,P,V,Z,Ge){if(!Gr(Z,P,V)){var It=Z.pointCCW(Ge),ot=kt(V,It,P);if(ot===Xe.COLLINEAR)throw new se("poly2tri EdgeEvent: Collinear not supported!",[V,It,P]);var In=Z.pointCW(Ge),Ti=kt(V,In,P);if(Ti===Xe.COLLINEAR)throw new se("poly2tri EdgeEvent: Collinear not supported!",[V,In,P]);ot===Ti?zr(k,P,V,Z=ot===Xe.CW?Z.neighborCCW(Ge):Z.neighborCW(Ge),Ge):Bd(k,P,V,Z,Ge)}}function Gr(k,P,V){var Z=k.edgeIndex(P,V);if(-1!==Z){k.markConstrainedEdgeByIndex(Z);var Ge=k.getNeighbor(Z);return Ge&&Ge.markConstrainedEdgeByPoints(P,V),!0}return!1}function _s(k,P){var V=new ge(P.prev.point,P.point,P.next.point);V.markNeighbor(P.prev.triangle),V.markNeighbor(P.triangle),k.addToMap(V),P.prev.next=P.next,P.next.prev=P.prev,Wr(k,V)||k.mapTriangleToNodes(V)}function Wr(k,P){for(var V=0;V<3;++V)if(!P.delaunay_edge[V]){var Z=P.getNeighbor(V);if(Z){var Ge=P.getPoint(V),It=Z.oppositePoint(P,Ge),ot=Z.index(It);if(Z.constrained_edge[ot]||Z.delaunay_edge[ot]){P.constrained_edge[V]=Z.constrained_edge[ot];continue}if(Ny(Ge,P.pointCCW(Ge),P.pointCW(Ge),It)){P.delaunay_edge[V]=!0,Z.delaunay_edge[ot]=!0,ia(P,Ge,Z,It);var Ti=!Wr(k,P);return Ti&&k.mapTriangleToNodes(P),(Ti=!Wr(k,Z))&&k.mapTriangleToNodes(Z),P.delaunay_edge[V]=!1,Z.delaunay_edge[ot]=!1,!0}}}return!1}function Ny(k,P,V,Z){var Ge=k.x-Z.x,It=k.y-Z.y,ot=P.x-Z.x,In=P.y-Z.y,Ec=Ge*In-ot*It;if(Ec<=0)return!1;var lo=V.x-Z.x,ra=V.y-Z.y,sa=lo*It-Ge*ra;return!(sa<=0)&&(Ge*Ge+It*It)*(ot*ra-lo*In)+(ot*ot+In*In)*sa+(lo*lo+ra*ra)*Ec>0}function ia(k,P,V,Z){var Ge,It,ot,In,Ti,Ja,Ec,lo,ra,el,Hd,sa;Ge=k.neighborCCW(P),It=k.neighborCW(P),ot=V.neighborCCW(Z),In=V.neighborCW(Z),Ti=k.getConstrainedEdgeCCW(P),Ja=k.getConstrainedEdgeCW(P),Ec=V.getConstrainedEdgeCCW(Z),lo=V.getConstrainedEdgeCW(Z),ra=k.getDelaunayEdgeCCW(P),el=k.getDelaunayEdgeCW(P),Hd=V.getDelaunayEdgeCCW(Z),sa=V.getDelaunayEdgeCW(Z),k.legalize(P,Z),V.legalize(Z,P),V.setDelaunayEdgeCCW(P,ra),k.setDelaunayEdgeCW(P,el),k.setDelaunayEdgeCCW(Z,Hd),V.setDelaunayEdgeCW(Z,sa),V.setConstrainedEdgeCCW(P,Ti),k.setConstrainedEdgeCW(P,Ja),k.setConstrainedEdgeCCW(Z,Ec),V.setConstrainedEdgeCW(Z,lo),k.clearNeighbors(),V.clearNeighbors(),Ge&&V.markNeighbor(Ge),It&&k.markNeighbor(It),ot&&k.markNeighbor(ot),In&&V.markNeighbor(In),k.markNeighbor(V)}function xp(k,P){if(!function Pd(k,P){return k.basin.width>(k.basin.left_highest?k.basin.left_node.point.y-P.point.y:k.basin.right_node.point.y-P.point.y)}(k,P)&&(_s(k,P),P.prev!==k.basin.left_node||P.next!==k.basin.right_node)){if(P.prev===k.basin.left_node){if(kt(P.point,P.next.point,P.next.next.point)===Xe.CW)return;P=P.next}else if(P.next===k.basin.right_node){if(kt(P.point,P.prev.point,P.prev.prev.point)===Xe.CCW)return;P=P.prev}else P=P.prev.point.y<P.next.point.y?P.prev:P.next;xp(k,P)}}function jr(k,P,V){V.point.x<P.p.x&&(kt(V.point,V.next.point,V.next.next.point)===Xe.CCW?Od(k,P,V):(Fd(k,P,V),jr(k,P,V)))}function Od(k,P,V){_s(k,V.next),V.next.point!==P.p&&kt(P.q,V.next.point,P.p)===Xe.CCW&&kt(V.point,V.next.point,V.next.next.point)===Xe.CCW&&Od(k,P,V)}function Fd(k,P,V){kt(V.next.point,V.next.next.point,V.next.next.next.point)===Xe.CCW?Od(k,P,V.next):kt(P.q,V.next.next.point,P.p)===Xe.CCW&&Fd(k,P,V.next)}function kd(k,P,V){V.point.x>P.p.x&&(kt(V.point,V.prev.point,V.prev.prev.point)===Xe.CW?Nd(k,P,V):(wp(k,P,V),kd(k,P,V)))}function wp(k,P,V){kt(V.prev.point,V.prev.prev.point,V.prev.prev.prev.point)===Xe.CW?Nd(k,P,V.prev):kt(P.q,V.prev.prev.point,P.p)===Xe.CW&&wp(k,P,V.prev)}function Nd(k,P,V){_s(k,V.prev),V.prev.point!==P.p&&kt(P.q,V.prev.point,P.p)===Xe.CW&&kt(V.point,V.prev.point,V.prev.prev.point)===Xe.CW&&Nd(k,P,V)}function Bd(k,P,V,Z,Ge){var It=Z.neighborAcross(Ge);we(It,"FLIP failed due to missing triangle!");var ot=It.oppositePoint(Z,Ge);if(Z.getConstrainedEdgeAcross(Ge)){var In=Z.index(Ge);throw new se("poly2tri Intersecting Constraints",[Ge,ot,Z.getPoint((In+1)%3),Z.getPoint((In+2)%3)])}si(Ge,Z.pointCCW(Ge),Z.pointCW(Ge),ot)?(ia(Z,Ge,It,ot),k.mapTriangleToNodes(Z),k.mapTriangleToNodes(It),Ge===V&&ot===P?V===k.edge_event.constrained_edge.q&&P===k.edge_event.constrained_edge.p&&(Z.markConstrainedEdgeByPoints(P,V),It.markConstrainedEdgeByPoints(P,V),Wr(k,Z),Wr(k,It)):(Z=function qe(k,P,V,Z,Ge,It){var ot;return P===Xe.CCW?(ot=Z.edgeIndex(Ge,It),Z.delaunay_edge[ot]=!0,Wr(k,Z),Z.clearDelaunayEdges(),V):(ot=V.edgeIndex(Ge,It),V.delaunay_edge[ot]=!0,Wr(k,V),V.clearDelaunayEdges(),Z)}(k,kt(V,ot,P),Z,It,Ge,ot),Bd(k,P,V,Z,Ge))):(Ud(k,P,V,Z,It,Vd(P,V,It,ot)),zr(k,P,V,Z,Ge))}function Vd(k,P,V,Z){var Ge=kt(P,Z,k);if(Ge===Xe.CW)return V.pointCCW(Z);if(Ge===Xe.CCW)return V.pointCW(Z);throw new se("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!",[P,Z,k])}function Ud(k,P,V,Z,Ge,It){var ot=Ge.neighborAcross(It);we(ot,"FLIP failed due to missing triangle");var In=ot.oppositePoint(Ge,It);si(V,Z.pointCCW(V),Z.pointCW(V),In)?Bd(k,V,In,ot,In):Ud(k,P,V,Z,ot,Vd(P,V,ot,In))}zt.triangulate=function wt(k){k.initTriangulation(),k.createAdvancingFront(),function ke(k){var P,V=k.pointCount();for(P=1;P<V;++P)for(var Z=k.getPoint(P),Ge=Ot(k,Z),It=Z._p2t_edge_list,ot=0;It&&ot<It.length;++ot)mn(k,It[ot],Ge)}(k),function je(k){for(var P=k.front().head().next.triangle,V=k.front().head().next.point;!P.getConstrainedEdgeCW(V);)P=P.neighborCCW(V);k.meshClean(P)}(k)}},21:(wn,zt,tt)=>{var we=tt(660),se=tt(770),ge=tt(429),$=tt(232),J=tt(215),Le=J.Node,kt=function(ke,je){if(this.p=ke,this.q=je,ke.y>je.y)this.q=ke,this.p=je;else if(ke.y===je.y)if(ke.x>je.x)this.q=ke,this.p=je;else if(ke.x===je.x)throw new we("poly2tri Invalid Edge constructor: repeated points!",[ke]);this.q._p2t_edge_list||(this.q._p2t_edge_list=[]),this.q._p2t_edge_list.push(this)},si=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};si.prototype.clear=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};var wi=function(){this.constrained_edge=null,this.right=!1},wt=function(ke,je){je=je||{},this.triangles_=[],this.map_=[],this.points_=je.cloneArrays?ke.slice(0):ke,this.edge_list=[],this.pmin_=this.pmax_=null,this.front_=null,this.head_=null,this.tail_=null,this.af_head_=null,this.af_middle_=null,this.af_tail_=null,this.basin=new si,this.edge_event=new wi,this.initEdges(this.points_)};wt.prototype.AddHole=wt.prototype.addHole=function(ke){this.initEdges(ke);var je,Ot=ke.length;for(je=0;je<Ot;je++)this.points_.push(ke[je]);return this},wt.prototype.addHoles=function(ke){var je,Ot=ke.length;for(je=0;je<Ot;je++)this.initEdges(ke[je]);return this.points_=this.points_.concat.apply(this.points_,ke),this},wt.prototype.AddPoint=wt.prototype.addPoint=function(ke){return this.points_.push(ke),this},wt.prototype.addPoints=function(ke){return this.points_=this.points_.concat(ke),this},wt.prototype.triangulate=function(){return $.triangulate(this),this},wt.prototype.getBoundingBox=function(){return{min:this.pmin_,max:this.pmax_}},wt.prototype.GetTriangles=wt.prototype.getTriangles=function(){return this.triangles_},wt.prototype.front=function(){return this.front_},wt.prototype.pointCount=function(){return this.points_.length},wt.prototype.head=function(){return this.head_},wt.prototype.setHead=function(ke){this.head_=ke},wt.prototype.tail=function(){return this.tail_},wt.prototype.setTail=function(ke){this.tail_=ke},wt.prototype.getMap=function(){return this.map_},wt.prototype.initTriangulation=function(){var zr,ke=this.points_[0].x,je=this.points_[0].x,Ot=this.points_[0].y,mn=this.points_[0].y,Gr=this.points_.length;for(zr=1;zr<Gr;zr++){var Hi=this.points_[zr];Hi.x>ke&&(ke=Hi.x),Hi.x<je&&(je=Hi.x),Hi.y>Ot&&(Ot=Hi.y),Hi.y<mn&&(mn=Hi.y)}this.pmin_=new se(je,mn),this.pmax_=new se(ke,Ot);var _s=.3*(ke-je),na=.3*(Ot-mn);this.head_=new se(ke+_s,mn-na),this.tail_=new se(je-_s,mn-na),this.points_.sort(se.compare)},wt.prototype.initEdges=function(ke){var je,Ot=ke.length;for(je=0;je<Ot;++je)this.edge_list.push(new kt(ke[je],ke[(je+1)%Ot]))},wt.prototype.getPoint=function(ke){return this.points_[ke]},wt.prototype.addToMap=function(ke){this.map_.push(ke)},wt.prototype.locateNode=function(ke){return this.front_.locateNode(ke.x)},wt.prototype.createAdvancingFront=function(){var ke,je,Ot,mn=new ge(this.points_[0],this.tail_,this.head_);this.map_.push(mn),ke=new Le(mn.getPoint(1),mn),je=new Le(mn.getPoint(0),mn),Ot=new Le(mn.getPoint(2)),this.front_=new J(ke,Ot),ke.next=je,je.next=Ot,je.prev=ke,Ot.prev=je},wt.prototype.removeNode=function(ke){},wt.prototype.mapTriangleToNodes=function(ke){for(var je=0;je<3;++je)if(!ke.getNeighbor(je)){var Ot=this.front_.locatePoint(ke.pointCW(ke.getPoint(je)));Ot&&(Ot.triangle=ke)}},wt.prototype.removeFromMap=function(ke){var je,Ot=this.map_,mn=Ot.length;for(je=0;je<mn;je++)if(Ot[je]===ke){Ot.splice(je,1);break}},wt.prototype.meshClean=function(ke){for(var Ot,mn,je=[ke];Ot=je.pop();)if(!Ot.isInterior())for(Ot.setInterior(!0),this.triangles_.push(Ot),mn=0;mn<3;mn++)Ot.constrained_edge[mn]||je.push(Ot.getNeighbor(mn))},wn.exports=wt},429:(wn,zt,tt)=>{var se=function($,J,Le){this.points_=[$,J,Le],this.neighbors_=[null,null,null],this.interior_=!1,this.constrained_edge=[!1,!1,!1],this.delaunay_edge=[!1,!1,!1]},ge=tt(468).toString;se.prototype.toString=function(){return"["+ge(this.points_[0])+ge(this.points_[1])+ge(this.points_[2])+"]"},se.prototype.GetPoint=se.prototype.getPoint=function($){return this.points_[$]},se.prototype.getPoints=function(){return this.points_},se.prototype.getNeighbor=function($){return this.neighbors_[$]},se.prototype.containsPoint=function($){var J=this.points_;return $===J[0]||$===J[1]||$===J[2]},se.prototype.containsEdge=function($){return this.containsPoint($.p)&&this.containsPoint($.q)},se.prototype.containsPoints=function($,J){return this.containsPoint($)&&this.containsPoint(J)},se.prototype.isInterior=function(){return this.interior_},se.prototype.setInterior=function($){return this.interior_=$,this},se.prototype.markNeighborPointers=function($,J,Le){var Xe=this.points_;if($===Xe[2]&&J===Xe[1]||$===Xe[1]&&J===Xe[2])this.neighbors_[0]=Le;else if($===Xe[0]&&J===Xe[2]||$===Xe[2]&&J===Xe[0])this.neighbors_[1]=Le;else{if(!($===Xe[0]&&J===Xe[1]||$===Xe[1]&&J===Xe[0]))throw new Error("poly2tri Invalid Triangle.markNeighborPointers() call");this.neighbors_[2]=Le}},se.prototype.markNeighbor=function($){var J=this.points_;$.containsPoints(J[1],J[2])?(this.neighbors_[0]=$,$.markNeighborPointers(J[1],J[2],this)):$.containsPoints(J[0],J[2])?(this.neighbors_[1]=$,$.markNeighborPointers(J[0],J[2],this)):$.containsPoints(J[0],J[1])&&(this.neighbors_[2]=$,$.markNeighborPointers(J[0],J[1],this))},se.prototype.clearNeighbors=function(){this.neighbors_[0]=null,this.neighbors_[1]=null,this.neighbors_[2]=null},se.prototype.clearDelaunayEdges=function(){this.delaunay_edge[0]=!1,this.delaunay_edge[1]=!1,this.delaunay_edge[2]=!1},se.prototype.pointCW=function($){var J=this.points_;return $===J[0]?J[2]:$===J[1]?J[0]:$===J[2]?J[1]:null},se.prototype.pointCCW=function($){var J=this.points_;return $===J[0]?J[1]:$===J[1]?J[2]:$===J[2]?J[0]:null},se.prototype.neighborCW=function($){return $===this.points_[0]?this.neighbors_[1]:$===this.points_[1]?this.neighbors_[2]:this.neighbors_[0]},se.prototype.neighborCCW=function($){return $===this.points_[0]?this.neighbors_[2]:$===this.points_[1]?this.neighbors_[0]:this.neighbors_[1]},se.prototype.getConstrainedEdgeCW=function($){return $===this.points_[0]?this.constrained_edge[1]:$===this.points_[1]?this.constrained_edge[2]:this.constrained_edge[0]},se.prototype.getConstrainedEdgeCCW=function($){return $===this.points_[0]?this.constrained_edge[2]:$===this.points_[1]?this.constrained_edge[0]:this.constrained_edge[1]},se.prototype.getConstrainedEdgeAcross=function($){return $===this.points_[0]?this.constrained_edge[0]:$===this.points_[1]?this.constrained_edge[1]:this.constrained_edge[2]},se.prototype.setConstrainedEdgeCW=function($,J){$===this.points_[0]?this.constrained_edge[1]=J:$===this.points_[1]?this.constrained_edge[2]=J:this.constrained_edge[0]=J},se.prototype.setConstrainedEdgeCCW=function($,J){$===this.points_[0]?this.constrained_edge[2]=J:$===this.points_[1]?this.constrained_edge[0]=J:this.constrained_edge[1]=J},se.prototype.getDelaunayEdgeCW=function($){return $===this.points_[0]?this.delaunay_edge[1]:$===this.points_[1]?this.delaunay_edge[2]:this.delaunay_edge[0]},se.prototype.getDelaunayEdgeCCW=function($){return $===this.points_[0]?this.delaunay_edge[2]:$===this.points_[1]?this.delaunay_edge[0]:this.delaunay_edge[1]},se.prototype.setDelaunayEdgeCW=function($,J){$===this.points_[0]?this.delaunay_edge[1]=J:$===this.points_[1]?this.delaunay_edge[2]=J:this.delaunay_edge[0]=J},se.prototype.setDelaunayEdgeCCW=function($,J){$===this.points_[0]?this.delaunay_edge[2]=J:$===this.points_[1]?this.delaunay_edge[0]=J:this.delaunay_edge[1]=J},se.prototype.neighborAcross=function($){return $===this.points_[0]?this.neighbors_[0]:$===this.points_[1]?this.neighbors_[1]:this.neighbors_[2]},se.prototype.oppositePoint=function($,J){var Le=$.pointCW(J);return this.pointCW(Le)},se.prototype.legalize=function($,J){var Le=this.points_;if($===Le[0])Le[1]=Le[0],Le[0]=Le[2],Le[2]=J;else if($===Le[1])Le[2]=Le[1],Le[1]=Le[0],Le[0]=J;else{if($!==Le[2])throw new Error("poly2tri Invalid Triangle.legalize() call");Le[0]=Le[2],Le[2]=Le[1],Le[1]=J}},se.prototype.index=function($){var J=this.points_;if($===J[0])return 0;if($===J[1])return 1;if($===J[2])return 2;throw new Error("poly2tri Invalid Triangle.index() call")},se.prototype.edgeIndex=function($,J){var Le=this.points_;if($===Le[0]){if(J===Le[1])return 2;if(J===Le[2])return 1}else if($===Le[1]){if(J===Le[2])return 0;if(J===Le[0])return 2}else if($===Le[2]){if(J===Le[0])return 1;if(J===Le[1])return 0}return-1},se.prototype.markConstrainedEdgeByIndex=function($){this.constrained_edge[$]=!0},se.prototype.markConstrainedEdgeByEdge=function($){this.markConstrainedEdgeByPoints($.p,$.q)},se.prototype.markConstrainedEdgeByPoints=function($,J){var Le=this.points_;J===Le[0]&&$===Le[1]||J===Le[1]&&$===Le[0]?this.constrained_edge[2]=!0:J===Le[0]&&$===Le[2]||J===Le[2]&&$===Le[0]?this.constrained_edge[1]=!0:(J===Le[1]&&$===Le[2]||J===Le[2]&&$===Le[1])&&(this.constrained_edge[0]=!0)},wn.exports=se},76:(wn,zt)=>{var tt=1e-12;zt.EPSILON=tt;var we={CW:1,CCW:-1,COLLINEAR:0};zt.Orientation=we,zt.orient2d=function se(J,Le,Xe){var wi=(J.x-Xe.x)*(Le.y-Xe.y)-(J.y-Xe.y)*(Le.x-Xe.x);return wi>-tt&&wi<tt?we.COLLINEAR:wi>0?we.CCW:we.CW},zt.inScanArea=function ge(J,Le,Xe,kt){return!((J.x-Le.x)*(kt.y-Le.y)-(kt.x-Le.x)*(J.y-Le.y)>=-tt||(J.x-Xe.x)*(kt.y-Xe.y)-(kt.x-Xe.x)*(J.y-Xe.y)<=tt)},zt.isAngleObtuse=function $(J,Le,Xe){return(Le.x-J.x)*(Xe.x-J.x)+(Le.y-J.y)*(Xe.y-J.y)<0}},468:wn=>{function zt(ge){return"("+ge.x+";"+ge.y+")"}wn.exports={toString:function tt(ge){var $=ge.toString();return"[object Object]"===$?zt(ge):$},toStringBase:zt,compare:function we(ge,$){return ge.y===$.y?ge.x-$.x:ge.y-$.y},equals:function se(ge,$){return ge.x===$.x&&ge.y===$.y}}},128:wn=>{wn.exports={version:"1.5.0"}}},wn=>{wn(wn.s=306)}]);